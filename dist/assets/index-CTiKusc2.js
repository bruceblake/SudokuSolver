(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function $A(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ed={exports:{}},fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function WA(){if(c_)return fl;c_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return fl.Fragment=t,fl.jsx=n,fl.jsxs=n,fl}var h_;function ZA(){return h_||(h_=1,Ed.exports=WA()),Ed.exports}var C=ZA(),Td={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function JA(){if(f_)return wt;f_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function O(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Z={};function F(N,W,J){this.props=N,this.context=W,this.refs=Z,this.updater=J||B}F.prototype.isReactComponent={},F.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},F.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function dt(){}dt.prototype=F.prototype;function mt(N,W,J){this.props=N,this.context=W,this.refs=Z,this.updater=J||B}var Tt=mt.prototype=new dt;Tt.constructor=mt,X(Tt,F.prototype),Tt.isPureReactComponent=!0;var kt=Array.isArray,_t={H:null,A:null,T:null,S:null},Rt=Object.prototype.hasOwnProperty;function x(N,W,J,tt,et,ft){return J=ft.ref,{$$typeof:r,type:N,key:W,ref:J!==void 0?J:null,props:ft}}function R(N,W){return x(N.type,W,void 0,void 0,void 0,N.props)}function S(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function D(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(J){return W[J]})}var M=/\/+/g;function U(N,W){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):W.toString(36)}function I(){}function ee(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,W,J,tt,et){var ft=typeof N;(ft==="undefined"||ft==="boolean")&&(N=null);var gt=!1;if(N===null)gt=!0;else switch(ft){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(N.$$typeof){case r:case t:gt=!0;break;case T:return gt=N._init,ae(gt(N._payload),W,J,tt,et)}}if(gt)return et=et(N),gt=tt===""?"."+U(N,0):tt,kt(et)?(J="",gt!=null&&(J=gt.replace(M,"$&/")+"/"),ae(et,W,J,"",function(Wt){return Wt})):et!=null&&(S(et)&&(et=R(et,J+(et.key==null||N&&N.key===et.key?"":(""+et.key).replace(M,"$&/")+"/")+gt)),W.push(et)),1;gt=0;var Qt=tt===""?".":tt+":";if(kt(N))for(var Nt=0;Nt<N.length;Nt++)tt=N[Nt],ft=Qt+U(tt,Nt),gt+=ae(tt,W,J,ft,et);else if(Nt=O(N),typeof Nt=="function")for(N=Nt.call(N),Nt=0;!(tt=N.next()).done;)tt=tt.value,ft=Qt+U(tt,Nt++),gt+=ae(tt,W,J,ft,et);else if(ft==="object"){if(typeof N.then=="function")return ae(ee(N),W,J,tt,et);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return gt}function it(N,W,J){if(N==null)return N;var tt=[],et=0;return ae(N,tt,"","",function(ft){return W.call(J,ft,et++)}),tt}function pt(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(J){(N._status===0||N._status===-1)&&(N._status=1,N._result=J)},function(J){(N._status===0||N._status===-1)&&(N._status=2,N._result=J)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ut=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Bt(){}return wt.Children={map:it,forEach:function(N,W,J){it(N,function(){W.apply(this,arguments)},J)},count:function(N){var W=0;return it(N,function(){W++}),W},toArray:function(N){return it(N,function(W){return W})||[]},only:function(N){if(!S(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},wt.Component=F,wt.Fragment=n,wt.Profiler=o,wt.PureComponent=mt,wt.StrictMode=s,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_t,wt.act=function(){throw Error("act(...) is not supported in production builds of React.")},wt.cache=function(N){return function(){return N.apply(null,arguments)}},wt.cloneElement=function(N,W,J){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var tt=X({},N.props),et=N.key,ft=void 0;if(W!=null)for(gt in W.ref!==void 0&&(ft=void 0),W.key!==void 0&&(et=""+W.key),W)!Rt.call(W,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&W.ref===void 0||(tt[gt]=W[gt]);var gt=arguments.length-2;if(gt===1)tt.children=J;else if(1<gt){for(var Qt=Array(gt),Nt=0;Nt<gt;Nt++)Qt[Nt]=arguments[Nt+2];tt.children=Qt}return x(N.type,et,void 0,void 0,ft,tt)},wt.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},wt.createElement=function(N,W,J){var tt,et={},ft=null;if(W!=null)for(tt in W.key!==void 0&&(ft=""+W.key),W)Rt.call(W,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(et[tt]=W[tt]);var gt=arguments.length-2;if(gt===1)et.children=J;else if(1<gt){for(var Qt=Array(gt),Nt=0;Nt<gt;Nt++)Qt[Nt]=arguments[Nt+2];et.children=Qt}if(N&&N.defaultProps)for(tt in gt=N.defaultProps,gt)et[tt]===void 0&&(et[tt]=gt[tt]);return x(N,ft,void 0,void 0,null,et)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(N){return{$$typeof:m,render:N}},wt.isValidElement=S,wt.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:pt}},wt.memo=function(N,W){return{$$typeof:y,type:N,compare:W===void 0?null:W}},wt.startTransition=function(N){var W=_t.T,J={};_t.T=J;try{var tt=N(),et=_t.S;et!==null&&et(J,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Bt,ut)}catch(ft){ut(ft)}finally{_t.T=W}},wt.unstable_useCacheRefresh=function(){return _t.H.useCacheRefresh()},wt.use=function(N){return _t.H.use(N)},wt.useActionState=function(N,W,J){return _t.H.useActionState(N,W,J)},wt.useCallback=function(N,W){return _t.H.useCallback(N,W)},wt.useContext=function(N){return _t.H.useContext(N)},wt.useDebugValue=function(){},wt.useDeferredValue=function(N,W){return _t.H.useDeferredValue(N,W)},wt.useEffect=function(N,W){return _t.H.useEffect(N,W)},wt.useId=function(){return _t.H.useId()},wt.useImperativeHandle=function(N,W,J){return _t.H.useImperativeHandle(N,W,J)},wt.useInsertionEffect=function(N,W){return _t.H.useInsertionEffect(N,W)},wt.useLayoutEffect=function(N,W){return _t.H.useLayoutEffect(N,W)},wt.useMemo=function(N,W){return _t.H.useMemo(N,W)},wt.useOptimistic=function(N,W){return _t.H.useOptimistic(N,W)},wt.useReducer=function(N,W,J){return _t.H.useReducer(N,W,J)},wt.useRef=function(N){return _t.H.useRef(N)},wt.useState=function(N){return _t.H.useState(N)},wt.useSyncExternalStore=function(N,W,J){return _t.H.useSyncExternalStore(N,W,J)},wt.useTransition=function(){return _t.H.useTransition()},wt.version="19.0.0",wt}var d_;function cm(){return d_||(d_=1,Td.exports=JA()),Td.exports}var lt=cm();const tS=$A(lt);var Ad={exports:{}},dl={},Sd={exports:{}},bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function eS(){return m_||(m_=1,function(r){function t(it,pt){var ut=it.length;it.push(pt);t:for(;0<ut;){var Bt=ut-1>>>1,N=it[Bt];if(0<o(N,pt))it[Bt]=pt,it[ut]=N,ut=Bt;else break t}}function n(it){return it.length===0?null:it[0]}function s(it){if(it.length===0)return null;var pt=it[0],ut=it.pop();if(ut!==pt){it[0]=ut;t:for(var Bt=0,N=it.length,W=N>>>1;Bt<W;){var J=2*(Bt+1)-1,tt=it[J],et=J+1,ft=it[et];if(0>o(tt,ut))et<N&&0>o(ft,tt)?(it[Bt]=ft,it[et]=ut,Bt=et):(it[Bt]=tt,it[J]=ut,Bt=J);else if(et<N&&0>o(ft,ut))it[Bt]=ft,it[et]=ut,Bt=et;else break t}}return pt}function o(it,pt){var ut=it.sortIndex-pt.sortIndex;return ut!==0?ut:it.id-pt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],y=[],T=1,w=null,O=3,B=!1,X=!1,Z=!1,F=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,mt=typeof setImmediate<"u"?setImmediate:null;function Tt(it){for(var pt=n(y);pt!==null;){if(pt.callback===null)s(y);else if(pt.startTime<=it)s(y),pt.sortIndex=pt.expirationTime,t(g,pt);else break;pt=n(y)}}function kt(it){if(Z=!1,Tt(it),!X)if(n(g)!==null)X=!0,ee();else{var pt=n(y);pt!==null&&ae(kt,pt.startTime-it)}}var _t=!1,Rt=-1,x=5,R=-1;function S(){return!(r.unstable_now()-R<x)}function D(){if(_t){var it=r.unstable_now();R=it;var pt=!0;try{t:{X=!1,Z&&(Z=!1,dt(Rt),Rt=-1),B=!0;var ut=O;try{e:{for(Tt(it),w=n(g);w!==null&&!(w.expirationTime>it&&S());){var Bt=w.callback;if(typeof Bt=="function"){w.callback=null,O=w.priorityLevel;var N=Bt(w.expirationTime<=it);if(it=r.unstable_now(),typeof N=="function"){w.callback=N,Tt(it),pt=!0;break e}w===n(g)&&s(g),Tt(it)}else s(g);w=n(g)}if(w!==null)pt=!0;else{var W=n(y);W!==null&&ae(kt,W.startTime-it),pt=!1}}break t}finally{w=null,O=ut,B=!1}pt=void 0}}finally{pt?M():_t=!1}}}var M;if(typeof mt=="function")M=function(){mt(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,I=U.port2;U.port1.onmessage=D,M=function(){I.postMessage(null)}}else M=function(){F(D,0)};function ee(){_t||(_t=!0,M())}function ae(it,pt){Rt=F(function(){it(r.unstable_now())},pt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(it){it.callback=null},r.unstable_continueExecution=function(){X||B||(X=!0,ee())},r.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<it?Math.floor(1e3/it):5},r.unstable_getCurrentPriorityLevel=function(){return O},r.unstable_getFirstCallbackNode=function(){return n(g)},r.unstable_next=function(it){switch(O){case 1:case 2:case 3:var pt=3;break;default:pt=O}var ut=O;O=pt;try{return it()}finally{O=ut}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(it,pt){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var ut=O;O=it;try{return pt()}finally{O=ut}},r.unstable_scheduleCallback=function(it,pt,ut){var Bt=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Bt+ut:Bt):ut=Bt,it){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ut+N,it={id:T++,callback:pt,priorityLevel:it,startTime:ut,expirationTime:N,sortIndex:-1},ut>Bt?(it.sortIndex=ut,t(y,it),n(g)===null&&it===n(y)&&(Z?(dt(Rt),Rt=-1):Z=!0,ae(kt,ut-Bt))):(it.sortIndex=N,t(g,it),X||B||(X=!0,ee())),it},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(it){var pt=O;return function(){var ut=O;O=pt;try{return it.apply(this,arguments)}finally{O=ut}}}}(bd)),bd}var p_;function nS(){return p_||(p_=1,Sd.exports=eS()),Sd.exports}var wd={exports:{}},Fe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function iS(){if(g_)return Fe;g_=1;var r=cm();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fe.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,T)},Fe.flushSync=function(g){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=T,s.d.f()}},Fe.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Fe.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Fe.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,w=m(T,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:O,fetchPriority:B}):T==="script"&&s.d.X(g,{crossOrigin:w,integrity:O,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Fe.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Fe.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=m(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Fe.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Fe.requestFormReset=function(g){s.d.r(g)},Fe.unstable_batchedUpdates=function(g,y){return g(y)},Fe.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},Fe.useFormStatus=function(){return f.H.useHostTransitionStatus()},Fe.version="19.0.0",Fe}var y_;function rS(){if(y_)return wd.exports;y_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),wd.exports=iS(),wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function sS(){if(__)return dl;__=1;var r=nS(),t=cm(),n=rS();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var u=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),Tt=Symbol.for("react.offscreen"),kt=Symbol.for("react.memo_cache_sentinel"),_t=Symbol.iterator;function Rt(e){return e===null||typeof e!="object"?null:(e=_t&&e[_t]||e["@@iterator"],typeof e=="function"?e:null)}var x=Symbol.for("react.client.reference");function R(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===x?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case g:return"Fragment";case m:return"Portal";case T:return"Profiler";case y:return"StrictMode";case Z:return"Suspense";case F:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case X:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dt:return i=e.displayName||null,i!==null?i:R(e.type)||"Memo";case mt:i=e._payload,e=e._init;try{return R(e(i))}catch{}}return null}var S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,M,U;function I(e){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||"",U=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+e+U}var ee=!1;function ae(e,i){if(!e||ee)return"";ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var z=H}Reflect.construct(e,[],$)}else{try{$.call()}catch(H){z=H}e.call($.prototype)}}else{try{throw Error()}catch(H){z=H}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&z&&typeof H.stack=="string")return[H.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var b=v.split(`
`),k=E.split(`
`);for(h=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;h<k.length&&!k[h].includes("DetermineComponentFrameRoot");)h++;if(l===b.length||h===k.length)for(l=b.length-1,h=k.length-1;1<=l&&0<=h&&b[l]!==k[h];)h--;for(;1<=l&&0<=h;l--,h--)if(b[l]!==k[h]){if(l!==1||h!==1)do if(l--,h--,0>h||b[l]!==k[h]){var G=`
`+b[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=h);break}}}finally{ee=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?I(a):""}function it(e){switch(e.tag){case 26:case 27:case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return e=ae(e.type,!1),e;case 11:return e=ae(e.type.render,!1),e;case 1:return e=ae(e.type,!0),e;default:return""}}function pt(e){try{var i="";do i+=it(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ut(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function Bt(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function N(e){if(ut(e)!==e)throw Error(s(188))}function W(e){var i=e.alternate;if(!i){if(i=ut(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return N(h),e;if(d===l)return N(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,l=d;break}if(E===l){v=!0,l=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=h;break}if(E===l){v=!0,l=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function J(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=J(e),i!==null)return i;e=e.sibling}return null}var tt=Array.isArray,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},gt=[],Qt=-1;function Nt(e){return{current:e}}function Wt(e){0>Qt||(e.current=gt[Qt],gt[Qt]=null,Qt--)}function zt(e,i){Qt++,gt[Qt]=e.current,e.current=i}var $e=Nt(null),di=Nt(null),_n=Nt(null),Wi=Nt(null);function Zi(e,i){switch(zt(_n,i),zt(di,e),zt($e,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?jy(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=jy(e),i=zy(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Wt($e),zt($e,i)}function mi(){Wt($e),Wt(di),Wt(_n)}function ao(e){e.memoizedState!==null&&zt(Wi,e);var i=$e.current,a=zy(i,e.type);i!==a&&(zt(di,e),zt($e,a))}function Fs(e){di.current===e&&(Wt($e),Wt(di)),Wi.current===e&&(Wt(Wi),ol._currentValue=ft)}var Ks=Object.prototype.hasOwnProperty,ns=r.unstable_scheduleCallback,Qs=r.unstable_cancelCallback,Th=r.unstable_shouldYield,oo=r.unstable_requestPaint,nn=r.unstable_now,$l=r.unstable_getCurrentPriorityLevel,Ee=r.unstable_ImmediatePriority,Ce=r.unstable_UserBlockingPriority,pi=r.unstable_NormalPriority,Wl=r.unstable_LowPriority,lo=r.unstable_IdlePriority,Ah=r.log,is=r.unstable_setDisableYieldValue,Ji=null,He=null;function uo(e){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Ji,e,void 0,(e.current.flags&128)===128)}catch{}}function Gn(e){if(typeof Ah=="function"&&is(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Ji,e)}catch{}}var We=Math.clz32?Math.clz32:Jl,co=Math.log,Zl=Math.LN2;function Jl(e){return e>>>=0,e===0?32:31-(co(e)/Zl|0)|0}var Fn=128,tr=4194304;function Pn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function vn(e,i){var a=e.pendingLanes;if(a===0)return 0;var l=0,h=e.suspendedLanes,d=e.pingedLanes,v=e.warmLanes;e=e.finishedLanes!==0;var E=a&134217727;return E!==0?(a=E&~h,a!==0?l=Pn(a):(d&=E,d!==0?l=Pn(d):e||(v=E&~v,v!==0&&(l=Pn(v))))):(E=a&~h,E!==0?l=Pn(E):d!==0?l=Pn(d):e||(v=a&~v,v!==0&&(l=Pn(v)))),l===0?0:i!==0&&i!==l&&(i&h)===0&&(h=l&-l,v=i&-i,h>=v||h===32&&(v&4194176)!==0)?i:l}function er(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Ys(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=Fn;return Fn<<=1,(Fn&4194176)===0&&(Fn=128),e}function nr(){var e=tr;return tr<<=1,(tr&62914560)===0&&(tr=4194304),e}function Xs(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function he(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tu(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,k=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-We(a),$=1<<G;E[G]=0,b[G]=-1;var z=k[G];if(z!==null)for(k[G]=null,G=0;G<z.length;G++){var H=z[G];H!==null&&(H.lane&=-536870913)}a&=~$}l!==0&&ir(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function ir(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-We(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194218}function rr(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-We(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function eu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nu(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:r_(e.type))}function sr(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var Kn=Math.random().toString(36).slice(2),De="__reactFiber$"+Kn,Te="__reactProps$"+Kn,gi="__reactContainer$"+Kn,rs="__reactEvents$"+Kn,$s="__reactListeners$"+Kn,Qn="__reactHandles$"+Kn,fo="__reactResources$"+Kn,ar="__reactMarker$"+Kn;function ss(e){delete e[De],delete e[Te],delete e[rs],delete e[$s],delete e[Qn]}function Un(e){var i=e[De];if(i)return i;for(var a=e.parentNode;a;){if(i=a[gi]||a[De]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Hy(e);e!==null;){if(a=e[De])return a;e=Hy(e)}return i}e=a,a=e.parentNode}return null}function yi(e){if(e=e[De]||e[gi]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function or(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function lr(e){var i=e[fo];return i||(i=e[fo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ne(e){e[ar]=!0}var mo=new Set,Ws={};function un(e,i){rn(e,i),rn(e+"Capture",i)}function rn(e,i){for(Ws[e]=i,e=0;e<i.length;e++)mo.add(i[e])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),po={},go={};function iu(e){return Ks.call(go,e)?!0:Ks.call(po,e)?!1:Sh.test(e)?go[e]=!0:(po[e]=!0,!1)}function ur(e,i,a){if(iu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function cr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function En(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function Ze(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ru(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function bh(e){var i=ru(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function as(e){e._valueTracker||(e._valueTracker=bh(e))}function yo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=ru(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Zs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _i=/[\n"\\]/g;function oe(e){return e.replace(_i,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function hr(e,i,a,l,h,d,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ze(i)):e.value!==""+Ze(i)&&(e.value=""+Ze(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?Js(e,v,Ze(i)):a!=null?Js(e,v,Ze(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Ze(E):e.removeAttribute("name")}function os(e,i,a,l,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Ze(a):"",i=i!=null?""+Ze(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=E?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Js(e,i,a){i==="number"&&Zs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function qt(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ze(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function ls(e,i,a){if(i!=null&&(i=""+Ze(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Ze(a):""}function fr(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(tt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ze(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Tn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var wh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _o(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||wh.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function su(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&_o(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&_o(e,d,i[d])}function vo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yn(e){return Ih.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var An=null;function ta(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,Ei=null;function Ti(e){var i=yi(e);if(i&&(e=i.stateNode)){var a=e[Te]||null;t:switch(e=i.stateNode,i.type){case"input":if(hr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+oe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Te]||null;if(!h)throw Error(s(90));hr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&yo(l)}break t;case"textarea":ls(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&qt(e,!!a.multiple,i,!1)}}}var Eo=!1;function au(e,i,a){if(Eo)return e(i,a);Eo=!0;try{var l=e(i);return l}finally{if(Eo=!1,(vi!==null||Ei!==null)&&(Wu(),vi&&(i=vi,e=Ei,Ei=vi=null,Ti(i),e)))for(i=0;i<e.length;i++)Ti(e[i])}}function us(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Te]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Sn=!1;if(cn)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{Sn=!1}var Xn=null,dr=null,Ai=null;function To(){if(Ai)return Ai;var e,i=dr,a=i.length,l,h="value"in Xn?Xn.value:Xn.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ai=h.slice(e,1<l?1-l:void 0)}function $n(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function Ao(){return!1}function Ne(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Wn:Ao,this.isPropagationStopped=Ao,this}return D(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var Ft={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=Ne(Ft),hs=D({},Ft,{view:0,detail:0}),ou=Ne(hs),na,ia,Zn,fs=D({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zn&&(Zn&&e.type==="mousemove"?(na=e.screenX-Zn.screenX,ia=e.screenY-Zn.screenY):ia=na=0,Zn=e),na)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),bn=Ne(fs),lu=D({},fs,{dataTransfer:0}),Ch=Ne(lu),ds=D({},hs,{relatedTarget:0}),ra=Ne(ds),So=D({},Ft,{animationName:0,elapsedTime:0,pseudoElement:0}),sa=Ne(So),uu=D({},Ft,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aa=Ne(uu),Dh=D({},Ft,{data:0}),bo=Ne(Dh),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=hu[e])?!!i[e]:!1}function ps(){return wo}var fu=D({},hs,{key:function(e){if(e.key){var i=ms[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oa=Ne(fu),du=D({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ro=Ne(du),Si=D({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),mu=Ne(Si),pu=D({},Ft,{propertyName:0,elapsedTime:0,pseudoElement:0}),gu=Ne(pu),yu=D({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),la=Ne(yu),Je=D({},Ft,{newState:0,oldState:0}),_u=Ne(Je),vu=[9,13,27,32],Jn=cn&&"CompositionEvent"in window,c=null;cn&&"documentMode"in document&&(c=document.documentMode);var p=cn&&"TextEvent"in window&&!c,_=cn&&(!Jn||c&&8<c&&11>=c),A=" ",L=!1;function q(e,i){switch(e){case"keyup":return vu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pt=!1;function Ae(e,i){switch(e){case"compositionend":return nt(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return e=i.data,e===A&&L?null:e;default:return null}}function Ut(e,i){if(Pt)return e==="compositionend"||!Jn&&q(e,i)?(e=To(),Ai=dr=Xn=null,Pt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Se(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function bi(e,i,a,l){vi?Ei?Ei.push(l):Ei=[l]:vi=l,i=nc(i,"onChange"),0<i.length&&(a=new ea("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var Pe=null,ti=null;function Io(e){xy(e,0)}function Eu(e){var i=or(e);if(yo(i))return e}function up(e,i){if(e==="change")return i}var cp=!1;if(cn){var Nh;if(cn){var Oh="oninput"in document;if(!Oh){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),Oh=typeof hp.oninput=="function"}Nh=Oh}else Nh=!1;cp=Nh&&(!document.documentMode||9<document.documentMode)}function fp(){Pe&&(Pe.detachEvent("onpropertychange",dp),ti=Pe=null)}function dp(e){if(e.propertyName==="value"&&Eu(ti)){var i=[];bi(i,ti,e,ta(e)),au(Io,i)}}function RT(e,i,a){e==="focusin"?(fp(),Pe=i,ti=a,Pe.attachEvent("onpropertychange",dp)):e==="focusout"&&fp()}function IT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eu(ti)}function CT(e,i){if(e==="click")return Eu(i)}function DT(e,i){if(e==="input"||e==="change")return Eu(i)}function NT(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var hn=typeof Object.is=="function"?Object.is:NT;function Co(e,i){if(hn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ks.call(i,h)||!hn(e[h],i[h]))return!1}return!0}function mp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pp(e,i){var a=mp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=mp(a)}}function gp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?gp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function yp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Zs(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Zs(e.document)}return i}function Vh(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function OT(e,i){var a=yp(i);i=e.focusedElem;var l=e.selectionRange;if(a!==i&&i&&i.ownerDocument&&gp(i.ownerDocument.documentElement,i)){if(l!==null&&Vh(i)){if(e=l.start,a=l.end,a===void 0&&(a=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(a,i.value.length);else if(a=(e=i.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var h=i.textContent.length,d=Math.min(l.start,h);l=l.end===void 0?d:Math.min(l.end,h),!a.extend&&d>l&&(h=l,l=d,d=h),h=pp(i,d);var v=pp(i,l);h&&v&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),a.removeAllRanges(),d>l?(a.addRange(e),a.extend(v.node,v.offset)):(e.setEnd(v.node,v.offset),a.addRange(e)))}}for(e=[],a=i;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)a=e[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var VT=cn&&"documentMode"in document&&11>=document.documentMode,ua=null,Mh=null,Do=null,xh=!1;function _p(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xh||ua==null||ua!==Zs(l)||(l=ua,"selectionStart"in l&&Vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Do&&Co(Do,l)||(Do=l,l=nc(Mh,"onSelect"),0<l.length&&(i=new ea("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=ua)))}function gs(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var ca={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionrun:gs("Transition","TransitionRun"),transitionstart:gs("Transition","TransitionStart"),transitioncancel:gs("Transition","TransitionCancel"),transitionend:gs("Transition","TransitionEnd")},kh={},vp={};cn&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function ys(e){if(kh[e])return kh[e];if(!ca[e])return e;var i=ca[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in vp)return kh[e]=i[a];return e}var Ep=ys("animationend"),Tp=ys("animationiteration"),Ap=ys("animationstart"),MT=ys("transitionrun"),xT=ys("transitionstart"),kT=ys("transitioncancel"),Sp=ys("transitionend"),bp=new Map,wp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ln(e,i){bp.set(e,i),un(i,[e])}var wn=[],ha=0,Ph=0;function Tu(){for(var e=ha,i=Ph=ha=0;i<e;){var a=wn[i];wn[i++]=null;var l=wn[i];wn[i++]=null;var h=wn[i];wn[i++]=null;var d=wn[i];if(wn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Rp(a,h,d)}}function Au(e,i,a,l){wn[ha++]=e,wn[ha++]=i,wn[ha++]=a,wn[ha++]=l,Ph|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Uh(e,i,a,l){return Au(e,i,a,l),Su(e)}function mr(e,i){return Au(e,null,null,i),Su(e)}function Rp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;h&&i!==null&&e.tag===3&&(d=e.stateNode,h=31-We(a),d=d.hiddenUpdates,e=d[h],e===null?d[h]=[i]:e.push(i),i.lane=a|536870912)}function Su(e){if(50<tl)throw tl=0,Gf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var fa={},Ip=new WeakMap;function Rn(e,i){if(typeof e=="object"&&e!==null){var a=Ip.get(e);return a!==void 0?a:(i={value:e,source:i,stack:pt(i)},Ip.set(e,i),i)}return{value:e,source:i,stack:pt(i)}}var da=[],ma=0,bu=null,wu=0,In=[],Cn=0,_s=null,wi=1,Ri="";function vs(e,i){da[ma++]=wu,da[ma++]=bu,bu=e,wu=i}function Cp(e,i,a){In[Cn++]=wi,In[Cn++]=Ri,In[Cn++]=_s,_s=e;var l=wi;e=Ri;var h=32-We(l)-1;l&=~(1<<h),a+=1;var d=32-We(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,wi=1<<32-We(i)+h|a<<h|l,Ri=d+e}else wi=1<<d|a<<h|l,Ri=e}function Lh(e){e.return!==null&&(vs(e,1),Cp(e,1,0))}function jh(e){for(;e===bu;)bu=da[--ma],da[ma]=null,wu=da[--ma],da[ma]=null;for(;e===_s;)_s=In[--Cn],In[Cn]=null,Ri=In[--Cn],In[Cn]=null,wi=In[--Cn],In[Cn]=null}var tn=null,Ue=null,Ht=!1,jn=null,ei=!1,zh=Error(s(519));function Es(e){var i=Error(s(418,""));throw Vo(Rn(i,e)),zh}function Dp(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[De]=e,i[Te]=l,a){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(a=0;a<nl.length;a++)Mt(nl[a],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),os(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),as(i);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),fr(i,l.value,l.defaultValue,l.children),as(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Ly(i.textContent,a)?(l.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),l.onScroll!=null&&Mt("scroll",i),l.onScrollEnd!=null&&Mt("scrollend",i),l.onClick!=null&&(i.onclick=ic),i=!0):i=!1,i||Es(e)}function Np(e){for(tn=e.return;tn;)switch(tn.tag){case 3:case 27:ei=!0;return;case 5:case 13:ei=!1;return;default:tn=tn.return}}function No(e){if(e!==tn)return!1;if(!Ht)return Np(e),Ht=!0,!1;var i=!1,a;if((a=e.tag!==3&&e.tag!==27)&&((a=e.tag===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||od(e.type,e.memoizedProps)),a=!a),a&&(i=!0),i&&Ue&&Es(e),Np(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Ue=Bn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Ue=null}}else Ue=tn?Bn(e.stateNode.nextSibling):null;return!0}function Oo(){Ue=tn=null,Ht=!1}function Vo(e){jn===null?jn=[e]:jn.push(e)}var Mo=Error(s(460)),Op=Error(s(474)),Bh={then:function(){}};function Vp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ru(){}function Mp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Ru,Ru),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Mo?Error(s(483)):e;default:if(typeof i.status=="string")i.then(Ru,Ru);else{if(e=Zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Mo?Error(s(483)):e}throw xo=i,Mo}}var xo=null;function xp(){if(xo===null)throw Error(s(459));var e=xo;return xo=null,e}var pa=null,ko=0;function Iu(e){var i=ko;return ko+=1,pa===null&&(pa=[]),Mp(pa,e,i)}function Po(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Cu(e,i){throw i.$$typeof===u?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function kp(e){var i=e._init;return i(e._payload)}function Pp(e){function i(P,V){if(e){var j=P.deletions;j===null?(P.deletions=[V],P.flags|=16):j.push(V)}}function a(P,V){if(!e)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function h(P,V){return P=Rr(P,V),P.index=0,P.sibling=null,P}function d(P,V,j){return P.index=j,e?(j=P.alternate,j!==null?(j=j.index,j<V?(P.flags|=33554434,V):j):(P.flags|=33554434,V)):(P.flags|=1048576,V)}function v(P){return e&&P.alternate===null&&(P.flags|=33554434),P}function E(P,V,j,Q){return V===null||V.tag!==6?(V=Pf(j,P.mode,Q),V.return=P,V):(V=h(V,j),V.return=P,V)}function b(P,V,j,Q){var at=j.type;return at===g?G(P,V,j.props.children,Q,j.key):V!==null&&(V.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===mt&&kp(at)===V.type)?(V=h(V,j.props),Po(V,j),V.return=P,V):(V=Ku(j.type,j.key,j.props,null,P.mode,Q),Po(V,j),V.return=P,V)}function k(P,V,j,Q){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=Uf(j,P.mode,Q),V.return=P,V):(V=h(V,j.children||[]),V.return=P,V)}function G(P,V,j,Q,at){return V===null||V.tag!==7?(V=Ns(j,P.mode,Q,at),V.return=P,V):(V=h(V,j),V.return=P,V)}function $(P,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Pf(""+V,P.mode,j),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case f:return j=Ku(V.type,V.key,V.props,null,P.mode,j),Po(j,V),j.return=P,j;case m:return V=Uf(V,P.mode,j),V.return=P,V;case mt:var Q=V._init;return V=Q(V._payload),$(P,V,j)}if(tt(V)||Rt(V))return V=Ns(V,P.mode,j,null),V.return=P,V;if(typeof V.then=="function")return $(P,Iu(V),j);if(V.$$typeof===B)return $(P,Hu(P,V),j);Cu(P,V)}return null}function z(P,V,j,Q){var at=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return at!==null?null:E(P,V,""+j,Q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case f:return j.key===at?b(P,V,j,Q):null;case m:return j.key===at?k(P,V,j,Q):null;case mt:return at=j._init,j=at(j._payload),z(P,V,j,Q)}if(tt(j)||Rt(j))return at!==null?null:G(P,V,j,Q,null);if(typeof j.then=="function")return z(P,V,Iu(j),Q);if(j.$$typeof===B)return z(P,V,Hu(P,j),Q);Cu(P,j)}return null}function H(P,V,j,Q,at){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(j)||null,E(V,P,""+Q,at);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case f:return P=P.get(Q.key===null?j:Q.key)||null,b(V,P,Q,at);case m:return P=P.get(Q.key===null?j:Q.key)||null,k(V,P,Q,at);case mt:var Ct=Q._init;return Q=Ct(Q._payload),H(P,V,j,Q,at)}if(tt(Q)||Rt(Q))return P=P.get(j)||null,G(V,P,Q,at,null);if(typeof Q.then=="function")return H(P,V,j,Iu(Q),at);if(Q.$$typeof===B)return H(P,V,j,Hu(V,Q),at);Cu(V,Q)}return null}function ot(P,V,j,Q){for(var at=null,Ct=null,ct=V,yt=V=0,xe=null;ct!==null&&yt<j.length;yt++){ct.index>yt?(xe=ct,ct=null):xe=ct.sibling;var Gt=z(P,ct,j[yt],Q);if(Gt===null){ct===null&&(ct=xe);break}e&&ct&&Gt.alternate===null&&i(P,ct),V=d(Gt,V,yt),Ct===null?at=Gt:Ct.sibling=Gt,Ct=Gt,ct=xe}if(yt===j.length)return a(P,ct),Ht&&vs(P,yt),at;if(ct===null){for(;yt<j.length;yt++)ct=$(P,j[yt],Q),ct!==null&&(V=d(ct,V,yt),Ct===null?at=ct:Ct.sibling=ct,Ct=ct);return Ht&&vs(P,yt),at}for(ct=l(ct);yt<j.length;yt++)xe=H(ct,P,yt,j[yt],Q),xe!==null&&(e&&xe.alternate!==null&&ct.delete(xe.key===null?yt:xe.key),V=d(xe,V,yt),Ct===null?at=xe:Ct.sibling=xe,Ct=xe);return e&&ct.forEach(function(Mr){return i(P,Mr)}),Ht&&vs(P,yt),at}function St(P,V,j,Q){if(j==null)throw Error(s(151));for(var at=null,Ct=null,ct=V,yt=V=0,xe=null,Gt=j.next();ct!==null&&!Gt.done;yt++,Gt=j.next()){ct.index>yt?(xe=ct,ct=null):xe=ct.sibling;var Mr=z(P,ct,Gt.value,Q);if(Mr===null){ct===null&&(ct=xe);break}e&&ct&&Mr.alternate===null&&i(P,ct),V=d(Mr,V,yt),Ct===null?at=Mr:Ct.sibling=Mr,Ct=Mr,ct=xe}if(Gt.done)return a(P,ct),Ht&&vs(P,yt),at;if(ct===null){for(;!Gt.done;yt++,Gt=j.next())Gt=$(P,Gt.value,Q),Gt!==null&&(V=d(Gt,V,yt),Ct===null?at=Gt:Ct.sibling=Gt,Ct=Gt);return Ht&&vs(P,yt),at}for(ct=l(ct);!Gt.done;yt++,Gt=j.next())Gt=H(ct,P,yt,Gt.value,Q),Gt!==null&&(e&&Gt.alternate!==null&&ct.delete(Gt.key===null?yt:Gt.key),V=d(Gt,V,yt),Ct===null?at=Gt:Ct.sibling=Gt,Ct=Gt);return e&&ct.forEach(function(XA){return i(P,XA)}),Ht&&vs(P,yt),at}function ce(P,V,j,Q){if(typeof j=="object"&&j!==null&&j.type===g&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case f:t:{for(var at=j.key;V!==null;){if(V.key===at){if(at=j.type,at===g){if(V.tag===7){a(P,V.sibling),Q=h(V,j.props.children),Q.return=P,P=Q;break t}}else if(V.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===mt&&kp(at)===V.type){a(P,V.sibling),Q=h(V,j.props),Po(Q,j),Q.return=P,P=Q;break t}a(P,V);break}else i(P,V);V=V.sibling}j.type===g?(Q=Ns(j.props.children,P.mode,Q,j.key),Q.return=P,P=Q):(Q=Ku(j.type,j.key,j.props,null,P.mode,Q),Po(Q,j),Q.return=P,P=Q)}return v(P);case m:t:{for(at=j.key;V!==null;){if(V.key===at)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(P,V.sibling),Q=h(V,j.children||[]),Q.return=P,P=Q;break t}else{a(P,V);break}else i(P,V);V=V.sibling}Q=Uf(j,P.mode,Q),Q.return=P,P=Q}return v(P);case mt:return at=j._init,j=at(j._payload),ce(P,V,j,Q)}if(tt(j))return ot(P,V,j,Q);if(Rt(j)){if(at=Rt(j),typeof at!="function")throw Error(s(150));return j=at.call(j),St(P,V,j,Q)}if(typeof j.then=="function")return ce(P,V,Iu(j),Q);if(j.$$typeof===B)return ce(P,V,Hu(P,j),Q);Cu(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(P,V.sibling),Q=h(V,j),Q.return=P,P=Q):(a(P,V),Q=Pf(j,P.mode,Q),Q.return=P,P=Q),v(P)):a(P,V)}return function(P,V,j,Q){try{ko=0;var at=ce(P,V,j,Q);return pa=null,at}catch(ct){if(ct===Mo)throw ct;var Ct=Vn(29,ct,null,P.mode);return Ct.lanes=Q,Ct.return=P,Ct}finally{}}}var Ts=Pp(!0),Up=Pp(!1),ga=Nt(null),Du=Nt(0);function Lp(e,i){e=Ui,zt(Du,e),zt(ga,i),Ui=e|i.baseLanes}function qh(){zt(Du,Ui),zt(ga,ga.current)}function Hh(){Ui=Du.current,Wt(ga),Wt(Du)}var Dn=Nt(null),ni=null;function pr(e){var i=e.alternate;zt(be,be.current&1),zt(Dn,e),ni===null&&(i===null||ga.current!==null||i.memoizedState!==null)&&(ni=e)}function jp(e){if(e.tag===22){if(zt(be,be.current),zt(Dn,e),ni===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ni=e)}}else gr()}function gr(){zt(be,be.current),zt(Dn,Dn.current)}function Ii(e){Wt(Dn),ni===e&&(ni=null),Wt(be)}var be=Nt(0);function Nu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var PT=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},UT=r.unstable_scheduleCallback,LT=r.unstable_NormalPriority,we={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new PT,data:new Map,refCount:0}}function Uo(e){e.refCount--,e.refCount===0&&UT(LT,function(){e.controller.abort()})}var Lo=null,Fh=0,ya=0,_a=null;function jT(e,i){if(Lo===null){var a=Lo=[];Fh=0,ya=Zf(),_a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Fh++,i.then(zp,zp),i}function zp(){if(--Fh===0&&Lo!==null){_a!==null&&(_a.status="fulfilled");var e=Lo;Lo=null,ya=0,_a=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function zT(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Bp=S.S;S.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&jT(e,i),Bp!==null&&Bp(e,i)};var As=Nt(null);function Kh(){var e=As.current;return e!==null?e:Zt.pooledCache}function Ou(e,i){i===null?zt(As,As.current):zt(As,i.pool)}function qp(){var e=Kh();return e===null?null:{parent:we._currentValue,pool:e}}var yr=0,It=null,Yt=null,me=null,Vu=!1,va=!1,Ss=!1,Mu=0,jo=0,Ea=null,BT=0;function fe(){throw Error(s(321))}function Qh(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!hn(e[a],i[a]))return!1;return!0}function Yh(e,i,a,l,h,d){return yr=d,It=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,S.H=e===null||e.memoizedState===null?bs:_r,Ss=!1,d=a(l,h),Ss=!1,va&&(d=Gp(i,a,l,h)),Hp(e),d}function Hp(e){S.H=ii;var i=Yt!==null&&Yt.next!==null;if(yr=0,me=Yt=It=null,Vu=!1,jo=0,Ea=null,i)throw Error(s(300));e===null||Ve||(e=e.dependencies,e!==null&&qu(e)&&(Ve=!0))}function Gp(e,i,a,l){It=e;var h=0;do{if(va&&(Ea=null),jo=0,va=!1,25<=h)throw Error(s(301));if(h+=1,me=Yt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}S.H=ws,d=i(a,l)}while(va);return d}function qT(){var e=S.H,i=e.useState()[0];return i=typeof i.then=="function"?zo(i):i,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(It.flags|=1024),i}function Xh(){var e=Mu!==0;return Mu=0,e}function $h(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Wh(e){if(Vu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Vu=!1}yr=0,me=Yt=It=null,va=!1,jo=Mu=0,Ea=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?It.memoizedState=me=e:me=me.next=e,me}function pe(){if(Yt===null){var e=It.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var i=me===null?It.memoizedState:me.next;if(i!==null)me=i,Yt=e;else{if(e===null)throw It.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},me===null?It.memoizedState=me=e:me=me.next=e}return me}var xu;xu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function zo(e){var i=jo;return jo+=1,Ea===null&&(Ea=[]),e=Mp(Ea,e,i),i=It,(me===null?i.memoizedState:me.next)===null&&(i=i.alternate,S.H=i===null||i.memoizedState===null?bs:_r),e}function ku(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===B)return Ge(e)}throw Error(s(438,String(e)))}function Zh(e){var i=null,a=It.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=It.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xu(),It.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=kt;return i.index++,a}function Ci(e,i){return typeof i=="function"?i(e):i}function Pu(e){var i=pe();return Jh(i,Yt,e)}function Jh(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var E=v=null,b=null,k=i,G=!1;do{var $=k.lane&-536870913;if($!==k.lane?(Lt&$)===$:(yr&$)===$){var z=k.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),$===ya&&(G=!0);else if((yr&z)===z){k=k.next,z===ya&&(G=!0);continue}else $={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(E=b=$,v=d):b=b.next=$,It.lanes|=z,Ir|=z;$=k.action,Ss&&a(d,$),d=k.hasEagerState?k.eagerState:a(d,$)}else z={lane:$,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},b===null?(E=b=z,v=d):b=b.next=z,It.lanes|=$,Ir|=$;k=k.next}while(k!==null&&k!==i);if(b===null?v=d:b.next=E,!hn(d,e.memoizedState)&&(Ve=!0,G&&(a=_a,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=b,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function tf(e){var i=pe(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);hn(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Fp(e,i,a){var l=It,h=pe(),d=Ht;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!hn((Yt||h).memoizedState,a);if(v&&(h.memoizedState=a,Ve=!0),h=h.queue,rf(Yp.bind(null,l,h,e),[e]),h.getSnapshot!==i||v||me!==null&&me.memoizedState.tag&1){if(l.flags|=2048,Ta(9,Qp.bind(null,l,h,a,i),{destroy:void 0},null),Zt===null)throw Error(s(349));d||(yr&60)!==0||Kp(l,i,a)}return a}function Kp(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=It.updateQueue,i===null?(i=xu(),It.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Qp(e,i,a,l){i.value=a,i.getSnapshot=l,Xp(i)&&$p(e)}function Yp(e,i,a){return a(function(){Xp(i)&&$p(e)})}function Xp(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!hn(e,a)}catch{return!0}}function $p(e){var i=mr(e,2);i!==null&&en(i,e,2)}function ef(e){var i=sn();if(typeof e=="function"){var a=e;if(e=a(),Ss){Gn(!0);try{a()}finally{Gn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},i}function Wp(e,i,a,l){return e.baseState=a,Jh(e,Yt,typeof l=="function"?l:Ci)}function HT(e,i,a,l,h){if(ju(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};S.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Zp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Zp(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=S.T,v={};S.T=v;try{var E=a(h,l),b=S.S;b!==null&&b(v,E),Jp(e,i,E)}catch(k){nf(e,i,k)}finally{S.T=d}}else try{d=a(h,l),Jp(e,i,d)}catch(k){nf(e,i,k)}}function Jp(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){tg(e,i,l)},function(l){return nf(e,i,l)}):tg(e,i,a)}function tg(e,i,a){i.status="fulfilled",i.value=a,eg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,Zp(e,a)))}function nf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,eg(i),i=i.next;while(i!==l)}e.action=null}function eg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function ng(e,i){return i}function ig(e,i){if(Ht){var a=Zt.formState;if(a!==null){t:{var l=It;if(Ht){if(Ue){e:{for(var h=Ue,d=ei;h.nodeType!==8;){if(!d){h=null;break e}if(h=Bn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Ue=Bn(h.nextSibling),l=h.data==="F!";break t}}Es(l)}l=!1}l&&(i=a[0])}}return a=sn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ng,lastRenderedState:i},a.queue=l,a=Tg.bind(null,It,l),l.dispatch=a,l=ef(!1),d=uf.bind(null,It,!1,l.queue),l=sn(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=HT.bind(null,It,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function rg(e){var i=pe();return sg(i,Yt,e)}function sg(e,i,a){i=Jh(e,i,ng)[0],e=Pu(Ci)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?zo(i):i;var l=pe(),h=l.queue,d=h.dispatch;return a!==l.memoizedState&&(It.flags|=2048,Ta(9,GT.bind(null,h,a),{destroy:void 0},null)),[i,d,e]}function GT(e,i){e.action=i}function ag(e){var i=pe(),a=Yt;if(a!==null)return sg(i,a,e);pe(),i=i.memoizedState,a=pe();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ta(e,i,a,l){return e={tag:e,create:i,inst:a,deps:l,next:null},i=It.updateQueue,i===null&&(i=xu(),It.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function og(){return pe().memoizedState}function Uu(e,i,a,l){var h=sn();It.flags|=e,h.memoizedState=Ta(1|i,a,{destroy:void 0},l===void 0?null:l)}function Lu(e,i,a,l){var h=pe();l=l===void 0?null:l;var d=h.memoizedState.inst;Yt!==null&&l!==null&&Qh(l,Yt.memoizedState.deps)?h.memoizedState=Ta(i,a,d,l):(It.flags|=e,h.memoizedState=Ta(1|i,a,d,l))}function lg(e,i){Uu(8390656,8,e,i)}function rf(e,i){Lu(2048,8,e,i)}function ug(e,i){return Lu(4,2,e,i)}function cg(e,i){return Lu(4,4,e,i)}function hg(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function fg(e,i,a){a=a!=null?a.concat([e]):null,Lu(4,4,hg.bind(null,i,e),a)}function sf(){}function dg(e,i){var a=pe();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Qh(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function mg(e,i){var a=pe();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Qh(i,l[1]))return l[0];if(l=e(),Ss){Gn(!0);try{e()}finally{Gn(!1)}}return a.memoizedState=[l,i],l}function af(e,i,a){return a===void 0||(yr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=gy(),It.lanes|=e,Ir|=e,a)}function pg(e,i,a,l){return hn(a,i)?a:ga.current!==null?(e=af(e,a,l),hn(e,i)||(Ve=!0),e):(yr&42)===0?(Ve=!0,e.memoizedState=a):(e=gy(),It.lanes|=e,Ir|=e,i)}function gg(e,i,a,l,h){var d=et.p;et.p=d!==0&&8>d?d:8;var v=S.T,E={};S.T=E,uf(e,!1,i,a);try{var b=h(),k=S.S;if(k!==null&&k(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=zT(b,l);Bo(e,i,G,pn(e))}else Bo(e,i,l,pn(e))}catch($){Bo(e,i,{then:function(){},status:"rejected",reason:$},pn())}finally{et.p=d,S.T=v}}function FT(){}function of(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=yg(e).queue;gg(e,h,i,ft,a===null?FT:function(){return _g(e),a(l)})}function yg(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ft},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function _g(e){var i=yg(e).next.queue;Bo(e,i,{},pn())}function lf(){return Ge(ol)}function vg(){return pe().memoizedState}function Eg(){return pe().memoizedState}function KT(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();e=Tr(a);var l=Ar(i,e,a);l!==null&&(en(l,i,a),Go(l,i,a)),i={cache:Gh()},e.payload=i;return}i=i.return}}function QT(e,i,a){var l=pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ju(e)?Ag(i,a):(a=Uh(e,i,a,l),a!==null&&(en(a,e,l),Sg(a,i,l)))}function Tg(e,i,a){var l=pn();Bo(e,i,a,l)}function Bo(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(e))Ag(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,hn(E,v))return Au(e,i,h,0),Zt===null&&Tu(),!1}catch{}finally{}if(a=Uh(e,i,h,l),a!==null)return en(a,e,l),Sg(a,i,l),!0}return!1}function uf(e,i,a,l){if(l={lane:2,revertLane:Zf(),action:l,hasEagerState:!1,eagerState:null,next:null},ju(e)){if(i)throw Error(s(479))}else i=Uh(e,a,l,2),i!==null&&en(i,e,2)}function ju(e){var i=e.alternate;return e===It||i!==null&&i===It}function Ag(e,i){va=Vu=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Sg(e,i,a){if((a&4194176)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,rr(e,a)}}var ii={readContext:Ge,use:ku,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe};ii.useCacheRefresh=fe,ii.useMemoCache=fe,ii.useHostTransitionStatus=fe,ii.useFormState=fe,ii.useActionState=fe,ii.useOptimistic=fe;var bs={readContext:Ge,use:ku,useCallback:function(e,i){return sn().memoizedState=[e,i===void 0?null:i],e},useContext:Ge,useEffect:lg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Uu(4194308,4,hg.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Uu(4194308,4,e,i)},useInsertionEffect:function(e,i){Uu(4,2,e,i)},useMemo:function(e,i){var a=sn();i=i===void 0?null:i;var l=e();if(Ss){Gn(!0);try{e()}finally{Gn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=sn();if(a!==void 0){var h=a(i);if(Ss){Gn(!0);try{a(i)}finally{Gn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=QT.bind(null,It,e),[l.memoizedState,e]},useRef:function(e){var i=sn();return e={current:e},i.memoizedState=e},useState:function(e){e=ef(e);var i=e.queue,a=Tg.bind(null,It,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:sf,useDeferredValue:function(e,i){var a=sn();return af(a,e,i)},useTransition:function(){var e=ef(!1);return e=gg.bind(null,It,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=It,h=sn();if(Ht){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Zt===null)throw Error(s(349));(Lt&60)!==0||Kp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,lg(Yp.bind(null,l,d,e),[e]),l.flags|=2048,Ta(9,Qp.bind(null,l,d,a,i),{destroy:void 0},null),a},useId:function(){var e=sn(),i=Zt.identifierPrefix;if(Ht){var a=Ri,l=wi;a=(l&~(1<<32-We(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=Mu++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=BT++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return sn().memoizedState=KT.bind(null,It)}};bs.useMemoCache=Zh,bs.useHostTransitionStatus=lf,bs.useFormState=ig,bs.useActionState=ig,bs.useOptimistic=function(e){var i=sn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=uf.bind(null,It,!0,a),a.dispatch=i,[e,i]};var _r={readContext:Ge,use:ku,useCallback:dg,useContext:Ge,useEffect:rf,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:cg,useMemo:mg,useReducer:Pu,useRef:og,useState:function(){return Pu(Ci)},useDebugValue:sf,useDeferredValue:function(e,i){var a=pe();return pg(a,Yt.memoizedState,e,i)},useTransition:function(){var e=Pu(Ci)[0],i=pe().memoizedState;return[typeof e=="boolean"?e:zo(e),i]},useSyncExternalStore:Fp,useId:vg};_r.useCacheRefresh=Eg,_r.useMemoCache=Zh,_r.useHostTransitionStatus=lf,_r.useFormState=rg,_r.useActionState=rg,_r.useOptimistic=function(e,i){var a=pe();return Wp(a,Yt,e,i)};var ws={readContext:Ge,use:ku,useCallback:dg,useContext:Ge,useEffect:rf,useImperativeHandle:fg,useInsertionEffect:ug,useLayoutEffect:cg,useMemo:mg,useReducer:tf,useRef:og,useState:function(){return tf(Ci)},useDebugValue:sf,useDeferredValue:function(e,i){var a=pe();return Yt===null?af(a,e,i):pg(a,Yt.memoizedState,e,i)},useTransition:function(){var e=tf(Ci)[0],i=pe().memoizedState;return[typeof e=="boolean"?e:zo(e),i]},useSyncExternalStore:Fp,useId:vg};ws.useCacheRefresh=Eg,ws.useMemoCache=Zh,ws.useHostTransitionStatus=lf,ws.useFormState=ag,ws.useActionState=ag,ws.useOptimistic=function(e,i){var a=pe();return Yt!==null?Wp(a,Yt,e,i):(a.baseState=e,[e,a.queue.dispatch])};function cf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:D({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var hf={isMounted:function(e){return(e=e._reactInternals)?ut(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var l=pn(),h=Tr(l);h.payload=i,a!=null&&(h.callback=a),i=Ar(e,h,l),i!==null&&(en(i,e,l),Go(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=pn(),h=Tr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ar(e,h,l),i!==null&&(en(i,e,l),Go(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=pn(),l=Tr(a);l.tag=2,i!=null&&(l.callback=i),i=Ar(e,l,a),i!==null&&(en(i,e,a),Go(i,e,a))}};function bg(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Co(a,l)||!Co(h,d):!0}function wg(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&hf.enqueueReplaceState(i,i.state,null)}function Rs(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=D({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var zu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Rg(e){zu(e)}function Ig(e){console.error(e)}function Cg(e){zu(e)}function Bu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Dg(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ff(e,i,a){return a=Tr(a),a.tag=3,a.payload={element:null},a.callback=function(){Bu(e,i)},a}function Ng(e){return e=Tr(e),e.tag=3,e}function Og(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Dg(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Dg(i,a,l),typeof h!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function YT(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ho(i,a,h,!0),a=Dn.current,a!==null){switch(a.tag){case 13:return ni===null?Qf():a.alternate===null&&ue===0&&(ue=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Bh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Xf(e,l,h)),!1;case 22:return a.flags|=65536,l===Bh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Xf(e,l,h)),!1}throw Error(s(435,a.tag))}return Xf(e,l,h),Qf(),!1}if(Ht)return i=Dn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==zh&&(e=Error(s(422),{cause:l}),Vo(Rn(e,a)))):(l!==zh&&(i=Error(s(423),{cause:l}),Vo(Rn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Rn(l,a),h=ff(e.stateNode,l,h),If(e,h),ue!==4&&(ue=2)),!1;var d=Error(s(520),{cause:l});if(d=Rn(d,a),Zo===null?Zo=[d]:Zo.push(d),ue!==4&&(ue=2),i===null)return!0;l=Rn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=ff(a.stateNode,l,e),If(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cr===null||!Cr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ng(h),Og(h,e,a,l),If(a,h),!1}a=a.return}while(a!==null);return!1}var Vg=Error(s(461)),Ve=!1;function Le(e,i,a,l){i.child=e===null?Up(i,null,a,l):Ts(i,e.child,a,l)}function Mg(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return Cs(i),l=Yh(e,i,a,v,d,h),E=Xh(),e!==null&&!Ve?($h(e,i,h),Di(e,i,h)):(Ht&&E&&Lh(i),i.flags|=1,Le(e,i,l,h),i.child)}function xg(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!kf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,kg(e,i,d,l,h)):(e=Ku(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Tf(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Co,a(v,l)&&e.ref===i.ref)return Di(e,i,h)}return i.flags|=1,e=Rr(d,l),e.ref=i.ref,e.return=i,i.child=e}function kg(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Co(d,l)&&e.ref===i.ref)if(Ve=!1,i.pendingProps=l=d,Tf(e,h))(e.flags&131072)!==0&&(Ve=!0);else return i.lanes=e.lanes,Di(e,i,h)}return df(e,i,a,l,h)}function Pg(e,i,a){var l=i.pendingProps,h=l.children,d=(i.stateNode._pendingVisibility&2)!==0,v=e!==null?e.memoizedState:null;if(qo(e,i),l.mode==="hidden"||d){if((i.flags&128)!==0){if(l=v!==null?v.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ug(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ou(i,v!==null?v.cachePool:null),v!==null?Lp(i,v):qh(),jp(i);else return i.lanes=i.childLanes=536870912,Ug(e,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(Ou(i,v.cachePool),Lp(i,v),gr(),i.memoizedState=null):(e!==null&&Ou(i,null),qh(),gr());return Le(e,i,h,a),i.child}function Ug(e,i,a,l){var h=Kh();return h=h===null?null:{parent:we._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Ou(i,null),qh(),jp(i),e!==null&&Ho(e,i,l,!0),null}function qo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=2097664)}}function df(e,i,a,l,h){return Cs(i),a=Yh(e,i,a,l,void 0,h),l=Xh(),e!==null&&!Ve?($h(e,i,h),Di(e,i,h)):(Ht&&l&&Lh(i),i.flags|=1,Le(e,i,a,h),i.child)}function Lg(e,i,a,l,h,d){return Cs(i),i.updateQueue=null,a=Gp(i,l,a,h),Hp(e),l=Xh(),e!==null&&!Ve?($h(e,i,d),Di(e,i,d)):(Ht&&l&&Lh(i),i.flags|=1,Le(e,i,a,d),i.child)}function jg(e,i,a,l,h){if(Cs(i),i.stateNode===null){var d=fa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ge(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},wf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ge(v):fa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(cf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&hf.enqueueReplaceState(d,d.state,null),Ko(i,l,d,h),Fo(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var E=i.memoizedProps,b=Rs(a,E);d.props=b;var k=d.context,G=a.contextType;v=fa,typeof G=="object"&&G!==null&&(v=Ge(G));var $=a.getDerivedStateFromProps;G=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,G||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||k!==v)&&wg(i,d,l,v),Er=!1;var z=i.memoizedState;d.state=z,Ko(i,l,d,h),Fo(),k=i.memoizedState,E||z!==k||Er?(typeof $=="function"&&(cf(i,a,$,l),k=i.memoizedState),(b=Er||bg(i,a,b,l,z,k,v))?(G||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=k),d.props=l,d.state=k,d.context=v,l=b):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Rf(e,i),v=i.memoizedProps,G=Rs(a,v),d.props=G,$=i.pendingProps,z=d.context,k=a.contextType,b=fa,typeof k=="object"&&k!==null&&(b=Ge(k)),E=a.getDerivedStateFromProps,(k=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||z!==b)&&wg(i,d,l,b),Er=!1,z=i.memoizedState,d.state=z,Ko(i,l,d,h),Fo();var H=i.memoizedState;v!==$||z!==H||Er||e!==null&&e.dependencies!==null&&qu(e.dependencies)?(typeof E=="function"&&(cf(i,a,E,l),H=i.memoizedState),(G=Er||bg(i,a,G,l,z,H,b)||e!==null&&e.dependencies!==null&&qu(e.dependencies))?(k||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,b)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=b,l=G):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,qo(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ts(i,e.child,null,h),i.child=Ts(i,null,a,h)):Le(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Di(e,i,h),e}function zg(e,i,a,l){return Oo(),i.flags|=256,Le(e,i,a,l),i.child}var mf={dehydrated:null,treeContext:null,retryLane:0};function pf(e){return{baseLanes:e,cachePool:qp()}}function gf(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function Bg(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(be.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(h?pr(i):gr(),Ht){var E=Ue,b;if(b=E){t:{for(b=E,E=ei;b.nodeType!==8;){if(!E){E=null;break t}if(b=Bn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:_s!==null?{id:wi,overflow:Ri}:null,retryLane:536870912},b=Vn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,tn=i,Ue=null,b=!0):b=!1}b||Es(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return E.data==="$!"?i.lanes=16:i.lanes=536870912,null;Ii(i)}return E=l.children,l=l.fallback,h?(gr(),h=i.mode,E=_f({mode:"hidden",children:E},h),l=Ns(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=pf(a),h.childLanes=gf(e,v,a),i.memoizedState=mf,l):(pr(i),yf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(d)i.flags&256?(pr(i),i.flags&=-257,i=vf(e,i,a)):i.memoizedState!==null?(gr(),i.child=e.child,i.flags|=128,i=null):(gr(),h=l.fallback,E=i.mode,l=_f({mode:"visible",children:l.children},E),h=Ns(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ts(i,e.child,null,a),l=i.child,l.memoizedState=pf(a),l.childLanes=gf(e,v,a),i.memoizedState=mf,i=h);else if(pr(i),E.data==="$!"){if(v=E.nextSibling&&E.nextSibling.dataset,v)var k=v.dgst;v=k,l=Error(s(419)),l.stack="",l.digest=v,Vo({value:l,source:null,stack:null}),i=vf(e,i,a)}else if(Ve||Ho(e,i,a,!1),v=(a&e.childLanes)!==0,Ve||v){if(v=Zt,v!==null){if(l=a&-a,(l&42)!==0)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==b.retryLane)throw b.retryLane=l,mr(e,l),en(v,e,l),Vg}E.data==="$?"||Qf(),i=vf(e,i,a)}else E.data==="$?"?(i.flags|=128,i.child=e.child,i=uA.bind(null,e),E._reactRetry=i,i=null):(e=b.treeContext,Ue=Bn(E.nextSibling),tn=i,Ht=!0,jn=null,ei=!1,e!==null&&(In[Cn++]=wi,In[Cn++]=Ri,In[Cn++]=_s,wi=e.id,Ri=e.overflow,_s=i),i=yf(i,l.children),i.flags|=4096);return i}return h?(gr(),h=l.fallback,E=i.mode,b=e.child,k=b.sibling,l=Rr(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&31457280,k!==null?h=Rr(k,h):(h=Ns(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=e.child.memoizedState,E===null?E=pf(a):(b=E.cachePool,b!==null?(k=we._currentValue,b=b.parent!==k?{parent:k,pool:k}:b):b=qp(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=gf(e,v,a),i.memoizedState=mf,l):(pr(i),a=e.child,e=a.sibling,a=Rr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function yf(e,i){return i=_f({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function _f(e,i){return dy(e,i,0,null)}function vf(e,i,a){return Ts(i,e.child,null,a),e=yf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function qg(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Sf(e.return,i,a)}function Ef(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Hg(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Le(e,i,l.children,a),l=be.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qg(e,a,i);else if(e.tag===19)qg(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(zt(be,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&Nu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Ef(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Nu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Ef(i,!0,a,null,d);break;case"together":Ef(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Di(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ho(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Rr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Rr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Tf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&qu(e)))}function XT(e,i,a){switch(i.tag){case 3:Zi(i,i.stateNode.containerInfo),vr(i,we,e.memoizedState.cache),Oo();break;case 27:case 5:ao(i);break;case 4:Zi(i,i.stateNode.containerInfo);break;case 10:vr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(pr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Bg(e,i,a):(pr(i),e=Di(e,i,a),e!==null?e.sibling:null);pr(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ho(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Hg(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),zt(be,be.current),l)break;return null;case 22:case 23:return i.lanes=0,Pg(e,i,a);case 24:vr(i,we,e.memoizedState.cache)}return Di(e,i,a)}function Gg(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Tf(e,a)&&(i.flags&128)===0)return Ve=!1,XT(e,i,a);Ve=(e.flags&131072)!==0}else Ve=!1,Ht&&(i.flags&1048576)!==0&&Cp(i,wu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")kf(l)?(e=Rs(l,e),i.tag=1,i=jg(null,i,l,e,a)):(i.tag=0,i=df(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===X){i.tag=11,i=Mg(null,i,l,e,a);break t}else if(h===dt){i.tag=14,i=xg(null,i,l,e,a);break t}}throw i=R(l)||l,Error(s(306,i,""))}}return i;case 0:return df(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Rs(l,i.pendingProps),jg(e,i,l,h,a);case 3:t:{if(Zi(i,i.stateNode.containerInfo),e===null)throw Error(s(387));var d=i.pendingProps;h=i.memoizedState,l=h.element,Rf(e,i),Ko(i,d,null,a);var v=i.memoizedState;if(d=v.cache,vr(i,we,d),d!==h.cache&&bf(i,[we],a,!0),Fo(),d=v.element,h.isDehydrated)if(h={element:d,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=zg(e,i,d,a);break t}else if(d!==l){l=Rn(Error(s(424)),i),Vo(l),i=zg(e,i,d,a);break t}else for(Ue=Bn(i.stateNode.containerInfo.firstChild),tn=i,Ht=!0,jn=null,ei=!0,a=Up(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Oo(),d===l){i=Di(e,i,a);break t}Le(e,i,d,a)}i=i.child}return i;case 26:return qo(e,i),e===null?(a=Qy(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ht||(a=i.type,e=i.pendingProps,l=rc(_n.current).createElement(a),l[De]=i,l[Te]=e,je(l,a,e),ne(l),i.stateNode=l):i.memoizedState=Qy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return ao(i),e===null&&Ht&&(l=i.stateNode=Gy(i.type,i.pendingProps,_n.current),tn=i,ei=!0,Ue=Bn(l.firstChild)),l=i.pendingProps.children,e!==null||Ht?Le(e,i,l,a):i.child=Ts(i,null,l,a),qo(e,i),i.child;case 5:return e===null&&Ht&&((h=l=Ue)&&(l=wA(l,i.type,i.pendingProps,ei),l!==null?(i.stateNode=l,tn=i,Ue=Bn(l.firstChild),ei=!1,h=!0):h=!1),h||Es(i)),ao(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,od(h,d)?l=null:v!==null&&od(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Yh(e,i,qT,null,null,a),ol._currentValue=h),qo(e,i),Le(e,i,l,a),i.child;case 6:return e===null&&Ht&&((e=a=Ue)&&(a=RA(a,i.pendingProps,ei),a!==null?(i.stateNode=a,tn=i,Ue=null,e=!0):e=!1),e||Es(i)),null;case 13:return Bg(e,i,a);case 4:return Zi(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ts(i,null,l,a):Le(e,i,l,a),i.child;case 11:return Mg(e,i,i.type,i.pendingProps,a);case 7:return Le(e,i,i.pendingProps,a),i.child;case 8:return Le(e,i,i.pendingProps.children,a),i.child;case 12:return Le(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,vr(i,i.type,l.value),Le(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Cs(i),h=Ge(h),l=l(h),i.flags|=1,Le(e,i,l,a),i.child;case 14:return xg(e,i,i.type,i.pendingProps,a);case 15:return kg(e,i,i.type,i.pendingProps,a);case 19:return Hg(e,i,a);case 22:return Pg(e,i,a);case 24:return Cs(i),l=Ge(we),e===null?(h=Kh(),h===null&&(h=Zt,d=Gh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},wf(i),vr(i,we,h)):((e.lanes&a)!==0&&(Rf(e,i),Ko(i,null,null,a),Fo()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),vr(i,we,l)):(l=d.cache,vr(i,we,l),l!==h.cache&&bf(i,[we],a,!0))),Le(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}var Af=Nt(null),Is=null,Ni=null;function vr(e,i,a){zt(Af,i._currentValue),i._currentValue=a}function Oi(e){e._currentValue=Af.current,Wt(Af)}function Sf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function bf(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Sf(d.return,a,e),l||(v=null);break t}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Sf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ho(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;hn(h.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(h===Wi.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(ol):e=[ol])}h=h.return}e!==null&&bf(i,e,a,l),i.flags|=262144}function qu(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){Is=e,Ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ge(e){return Fg(Is,e)}function Hu(e,i){return Is===null&&Cs(e),Fg(e,i)}function Fg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ni===null){if(e===null)throw Error(s(308));Ni=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Ni=Ni.next=i;return a}var Er=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(re&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Su(e),Rp(e,null,a),i}return Au(e,l,i,a),Su(e)}function Go(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,rr(e,a)}}function If(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Cf=!1;function Fo(){if(Cf){var e=_a;if(e!==null)throw e}}function Ko(e,i,a,l){Cf=!1;var h=e.updateQueue;Er=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,k=b.next;b.next=null,v===null?d=k:v.next=k,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=k:E.next=k,G.lastBaseUpdate=b))}if(d!==null){var $=h.baseState;v=0,G=k=b=null,E=d;do{var z=E.lane&-536870913,H=z!==E.lane;if(H?(Lt&z)===z:(l&z)===z){z!==0&&z===ya&&(Cf=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var ot=e,St=E;z=i;var ce=a;switch(St.tag){case 1:if(ot=St.payload,typeof ot=="function"){$=ot.call(ce,$,z);break t}$=ot;break t;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=St.payload,z=typeof ot=="function"?ot.call(ce,$,z):ot,z==null)break t;$=D({},$,z);break t;case 2:Er=!0}}z=E.callback,z!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[z]:H.push(z))}else H={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(k=G=H,b=$):G=G.next=H,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(b=$),h.baseState=b,h.firstBaseUpdate=k,h.lastBaseUpdate=G,d===null&&(h.shared.lanes=0),Ir|=v,e.lanes=v,e.memoizedState=$}}function Kg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Qg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Kg(a[e],i)}function Qo(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(E){$t(i,i.return,E)}}function Sr(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var b=a;try{E()}catch(k){$t(h,b,k)}}}l=l.next}while(l!==d)}}catch(k){$t(i,i.return,k)}}function Yg(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Qg(i,a)}catch(l){$t(e,e.return,l)}}}function Xg(e,i,a){a.props=Rs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){$t(e,i,l)}}function Ds(e,i){try{var a=e.ref;if(a!==null){var l=e.stateNode;switch(e.tag){case 26:case 27:case 5:var h=l;break;default:h=l}typeof a=="function"?e.refCleanup=a(h):a.current=h}}catch(d){$t(e,i,d)}}function fn(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){$t(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$t(e,i,h)}else a.current=null}function $g(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){$t(e,e.return,h)}}function Wg(e,i,a){try{var l=e.stateNode;EA(l,e.type,a,i),l[Te]=i}catch(h){$t(e,e.return,h)}}function Zg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function Df(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Zg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nf(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ic));else if(l!==4&&l!==27&&(e=e.child,e!==null))for(Nf(e,i,a),e=e.sibling;e!==null;)Nf(e,i,a),e=e.sibling}function Gu(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&l!==27&&(e=e.child,e!==null))for(Gu(e,i,a),e=e.sibling;e!==null;)Gu(e,i,a),e=e.sibling}var Vi=!1,le=!1,Of=!1,Jg=typeof WeakSet=="function"?WeakSet:Set,Me=null,ty=!1;function $T(e,i){if(e=e.containerInfo,sd=cc,e=yp(e),Vh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,k=0,G=0,$=e,z=null;e:for(;;){for(var H;$!==a||h!==0&&$.nodeType!==3||(E=v+h),$!==d||l!==0&&$.nodeType!==3||(b=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(H=$.firstChild)!==null;)z=$,$=H;for(;;){if($===e)break e;if(z===a&&++k===h&&(E=v),z===d&&++G===l&&(b=v),(H=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=H}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:e,selectionRange:a},cc=!1,Me=i;Me!==null;)if(i=Me,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Me=e;else for(;Me!==null;){switch(i=Me,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ot=Rs(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ot,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(St){$t(a,a.return,St)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)cd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":cd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Me=e;break}Me=i.return}return ot=ty,ty=!1,ot}function ey(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:xi(e,a),l&4&&Qo(5,a);break;case 1:if(xi(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(E){$t(a,a.return,E)}else{var h=Rs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(E){$t(a,a.return,E)}}l&64&&Yg(a),l&512&&Ds(a,a.return);break;case 3:if(xi(e,a),l&64&&(l=a.updateQueue,l!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}try{Qg(l,e)}catch(E){$t(a,a.return,E)}}break;case 26:xi(e,a),l&512&&Ds(a,a.return);break;case 27:case 5:xi(e,a),i===null&&l&4&&$g(a),l&512&&Ds(a,a.return);break;case 12:xi(e,a);break;case 13:xi(e,a),l&4&&ry(e,a);break;case 22:if(h=a.memoizedState!==null||Vi,!h){i=i!==null&&i.memoizedState!==null||le;var d=Vi,v=le;Vi=h,(le=i)&&!v?br(e,a,(a.subtreeFlags&8772)!==0):xi(e,a),Vi=d,le=v}l&512&&(a.memoizedProps.mode==="manual"?Ds(a,a.return):fn(a,a.return));break;default:xi(e,a)}}function ny(e){var i=e.alternate;i!==null&&(e.alternate=null,ny(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ss(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ge=null,dn=!1;function Mi(e,i,a){for(a=a.child;a!==null;)iy(e,i,a),a=a.sibling}function iy(e,i,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Ji,a)}catch{}switch(a.tag){case 26:le||fn(a,i),Mi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:le||fn(a,i);var l=ge,h=dn;for(ge=a.stateNode,Mi(e,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);ss(a),ge=l,dn=h;break;case 5:le||fn(a,i);case 6:h=ge;var d=dn;if(ge=null,Mi(e,i,a),ge=h,dn=d,ge!==null)if(dn)try{e=ge,l=a.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)}catch(v){$t(a,i,v)}else try{ge.removeChild(a.stateNode)}catch(v){$t(a,i,v)}break;case 18:ge!==null&&(dn?(i=ge,a=a.stateNode,i.nodeType===8?ud(i.parentNode,a):i.nodeType===1&&ud(i,a),hl(i)):ud(ge,a.stateNode));break;case 4:l=ge,h=dn,ge=a.stateNode.containerInfo,dn=!0,Mi(e,i,a),ge=l,dn=h;break;case 0:case 11:case 14:case 15:le||Sr(2,a,i),le||Sr(4,a,i),Mi(e,i,a);break;case 1:le||(fn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xg(a,i,l)),Mi(e,i,a);break;case 21:Mi(e,i,a);break;case 22:le||fn(a,i),le=(l=le)||a.memoizedState!==null,Mi(e,i,a),le=l;break;default:Mi(e,i,a)}}function ry(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hl(e)}catch(a){$t(i,i.return,a)}}function WT(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Jg),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Jg),i;default:throw Error(s(435,e.tag))}}function Vf(e,i){var a=WT(e);i.forEach(function(l){var h=cA.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Nn(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,E=v;t:for(;E!==null;){switch(E.tag){case 27:case 5:ge=E.stateNode,dn=!1;break t;case 3:ge=E.stateNode.containerInfo,dn=!0;break t;case 4:ge=E.stateNode.containerInfo,dn=!0;break t}E=E.return}if(ge===null)throw Error(s(160));iy(d,v,h),ge=null,dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)sy(i,e),i=i.sibling}var zn=null;function sy(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nn(i,e),On(e),l&4&&(Sr(3,e,e.return),Qo(3,e),Sr(5,e,e.return));break;case 1:Nn(i,e),On(e),l&512&&(le||a===null||fn(a,a.return)),l&64&&Vi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=zn;if(Nn(i,e),On(e),l&512&&(le||a===null||fn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ar]||d[De]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),je(d,l,a),d[De]=e,ne(d),l=d;break t;case"link":var v=$y("link","href",h).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}d=h.createElement(l),je(d,l,a),h.head.appendChild(d);break;case"meta":if(v=$y("meta","content",h).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}d=h.createElement(l),je(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[De]=e,ne(d),l=d}e.stateNode=l}else Wy(h,e.type,e.stateNode);else e.stateNode=Xy(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Wy(h,e.type,e.stateNode):Xy(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Wg(e,e.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&e.alternate===null){h=e.stateNode,d=e.memoizedProps;try{for(var b=h.firstChild;b;){var k=b.nextSibling,G=b.nodeName;b[ar]||G==="HEAD"||G==="BODY"||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&b.rel.toLowerCase()==="stylesheet"||h.removeChild(b),b=k}for(var $=e.type,z=h.attributes;z.length;)h.removeAttributeNode(z[0]);je(h,$,d),h[De]=e,h[Te]=d}catch(ot){$t(e,e.return,ot)}}case 5:if(Nn(i,e),On(e),l&512&&(le||a===null||fn(a,a.return)),e.flags&32){h=e.stateNode;try{Tn(h,"")}catch(ot){$t(e,e.return,ot)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Wg(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Of=!0);break;case 6:if(Nn(i,e),On(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ot){$t(e,e.return,ot)}}break;case 3:if(oc=null,h=zn,zn=sc(i.containerInfo),Nn(i,e),zn=h,On(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(i.containerInfo)}catch(ot){$t(e,e.return,ot)}Of&&(Of=!1,ay(e));break;case 4:l=zn,zn=sc(e.stateNode.containerInfo),Nn(i,e),On(e),zn=l;break;case 12:Nn(i,e),On(e);break;case 13:Nn(i,e),On(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bf=nn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vf(e,l)));break;case 22:if(l&512&&(le||a===null||fn(a,a.return)),b=e.memoizedState!==null,k=a!==null&&a.memoizedState!==null,G=Vi,$=le,Vi=G||b,le=$||k,Nn(i,e),le=$,Vi=G,On(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=b?i._visibility&-2:i._visibility|1,b&&(i=Vi||le,a===null||k||i||Aa(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(a=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){k=a=i;try{if(h=k.stateNode,b)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{v=k.stateNode,E=k.memoizedProps.style;var H=E!=null&&E.hasOwnProperty("display")?E.display:null;v.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(ot){$t(k,k.return,ot)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=b?"":k.memoizedProps}catch(ot){$t(k,k.return,ot)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vf(e,a))));break;case 19:Nn(i,e),On(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vf(e,l)));break;case 21:break;default:Nn(i,e),On(e)}}function On(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var a=e.return;a!==null;){if(Zg(a)){var l=a;break t}a=a.return}throw Error(s(160))}switch(l.tag){case 27:var h=l.stateNode,d=Df(e);Gu(e,d,h);break;case 5:var v=l.stateNode;l.flags&32&&(Tn(v,""),l.flags&=-33);var E=Df(e);Gu(e,E,v);break;case 3:case 4:var b=l.stateNode.containerInfo,k=Df(e);Nf(e,k,b);break;default:throw Error(s(161))}}}catch(G){$t(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ay(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;ay(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function xi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ey(e,i.alternate,i),i=i.sibling}function Aa(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Sr(4,i,i.return),Aa(i);break;case 1:fn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Xg(i,i.return,a),Aa(i);break;case 26:case 27:case 5:fn(i,i.return),Aa(i);break;case 22:fn(i,i.return),i.memoizedState===null&&Aa(i);break;default:Aa(i)}e=e.sibling}}function br(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:br(h,d,a),Qo(4,d);break;case 1:if(br(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(k){$t(l,l.return,k)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Kg(b[h],E)}catch(k){$t(l,l.return,k)}}a&&v&64&&Yg(d),Ds(d,d.return);break;case 26:case 27:case 5:br(h,d,a),a&&l===null&&v&4&&$g(d),Ds(d,d.return);break;case 12:br(h,d,a);break;case 13:br(h,d,a),a&&v&4&&ry(h,d);break;case 22:d.memoizedState===null&&br(h,d,a),Ds(d,d.return);break;default:br(h,d,a)}i=i.sibling}}function Mf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Uo(a))}function xf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Uo(e))}function wr(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)oy(e,i,a,l),i=i.sibling}function oy(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:wr(e,i,a,l),h&2048&&Qo(9,i);break;case 3:wr(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Uo(e)));break;case 12:if(h&2048){wr(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){$t(i,i.return,b)}}else wr(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,i.memoizedState!==null?d._visibility&4?wr(e,i,a,l):Yo(e,i):d._visibility&4?wr(e,i,a,l):(d._visibility|=4,Sa(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Mf(i.alternate,i);break;case 24:wr(e,i,a,l),h&2048&&xf(i.alternate,i);break;default:wr(e,i,a,l)}}function Sa(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,E=a,b=l,k=v.flags;switch(v.tag){case 0:case 11:case 15:Sa(d,v,E,b,h),Qo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&4?Sa(d,v,E,b,h):Yo(d,v):(G._visibility|=4,Sa(d,v,E,b,h)),h&&k&2048&&Mf(v.alternate,v);break;case 24:Sa(d,v,E,b,h),h&&k&2048&&xf(v.alternate,v);break;default:Sa(d,v,E,b,h)}i=i.sibling}}function Yo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:Yo(a,l),h&2048&&Mf(l.alternate,l);break;case 24:Yo(a,l),h&2048&&xf(l.alternate,l);break;default:Yo(a,l)}i=i.sibling}}var Xo=8192;function ba(e){if(e.subtreeFlags&Xo)for(e=e.child;e!==null;)ly(e),e=e.sibling}function ly(e){switch(e.tag){case 26:ba(e),e.flags&Xo&&e.memoizedState!==null&&jA(zn,e.memoizedState,e.memoizedProps);break;case 5:ba(e);break;case 3:case 4:var i=zn;zn=sc(e.stateNode.containerInfo),ba(e),zn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Xo,Xo=16777216,ba(e),Xo=i):ba(e));break;default:ba(e)}}function uy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function $o(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Me=l,hy(l,e)}uy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cy(e),e=e.sibling}function cy(e){switch(e.tag){case 0:case 11:case 15:$o(e),e.flags&2048&&Sr(9,e,e.return);break;case 3:$o(e);break;case 12:$o(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,Fu(e)):$o(e);break;default:$o(e)}}function Fu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Me=l,hy(l,e)}uy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Sr(8,i,i.return),Fu(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,Fu(i));break;default:Fu(i)}e=e.sibling}}function hy(e,i){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:Sr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Uo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Me=l;else t:for(a=e;Me!==null;){l=Me;var h=l.sibling,d=l.return;if(ny(l),l===a){Me=null;break t}if(h!==null){h.return=d,Me=h;break t}Me=d}}}function ZT(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,i,a,l){return new ZT(e,i,a,l)}function kf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rr(e,i){var a=e.alternate;return a===null?(a=Vn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function fy(e,i){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ku(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")kf(e)&&(v=1);else if(typeof e=="string")v=UA(e,a,$e.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case g:return Ns(a.children,h,d,i);case y:v=8,h|=24;break;case T:return e=Vn(12,a,i,h|2),e.elementType=T,e.lanes=d,e;case Z:return e=Vn(13,a,i,h),e.elementType=Z,e.lanes=d,e;case F:return e=Vn(19,a,i,h),e.elementType=F,e.lanes=d,e;case Tt:return dy(a,h,d,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w:case B:v=10;break t;case O:v=9;break t;case X:v=11;break t;case dt:v=14;break t;case mt:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=Vn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function Ns(e,i,a,l){return e=Vn(7,e,l,i),e.lanes=a,e}function dy(e,i,a,l){e=Vn(22,e,l,i),e.elementType=Tt,e.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=h._current;if(d===null)throw Error(s(456));if((h._pendingVisibility&2)===0){var v=mr(d,2);v!==null&&(h._pendingVisibility|=2,en(v,d,2))}},attach:function(){var d=h._current;if(d===null)throw Error(s(456));if((h._pendingVisibility&2)!==0){var v=mr(d,2);v!==null&&(h._pendingVisibility&=-3,en(v,d,2))}}};return e.stateNode=h,e}function Pf(e,i,a){return e=Vn(6,e,null,i),e.lanes=a,e}function Uf(e,i,a){return i=Vn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function ki(e){e.flags|=4}function my(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zy(i)){if(i=Dn.current,i!==null&&((Lt&4194176)===Lt?ni!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||i!==ni))throw xo=Bh,Op;e.flags|=8192}}function Qu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?nr():536870912,e.lanes|=i,Ra|=i)}function Wo(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ie(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&31457280,l|=h.flags&31457280,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function JT(e,i,a){var l=i.pendingProps;switch(jh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ie(i),null;case 1:return ie(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Oi(we),mi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(No(i)?ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,jn!==null&&(Ff(jn),jn=null))),ie(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(ie(i),my(i,a)):(ie(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),ie(i),my(i,a)):(ie(i),i.flags&=-16777217):(e.memoizedProps!==l&&ki(i),ie(i),i.flags&=-16777217),null;case 27:Fs(i),a=_n.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ie(i),null}e=$e.current,No(i)?Dp(i):(e=Gy(h,l,a),i.stateNode=e,ki(i))}return ie(i),null;case 5:if(Fs(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return ie(i),null}if(e=$e.current,No(i))Dp(i);else{switch(h=rc(_n.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[De]=i,e[Te]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(je(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return ie(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=_n.current,No(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=tn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[De]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ly(e.nodeValue,a)),e||Es(i)}else e=rc(e).createTextNode(l),e[De]=i,i.stateNode=e}return ie(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=No(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[De]=i}else Oo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ie(i),h=!1}else jn!==null&&(Ff(jn),jn=null),h=!0;if(!h)return i.flags&256?(Ii(i),i):(Ii(i),null)}if(Ii(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Qu(i,i.updateQueue),ie(i),null;case 4:return mi(),e===null&&nd(i.stateNode.containerInfo),ie(i),null;case 10:return Oi(i.type),ie(i),null;case 19:if(Wt(be),h=i.memoizedState,h===null)return ie(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)Wo(h,!1);else{if(ue!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Nu(e),d!==null){for(i.flags|=128,Wo(h,!1),e=d.updateQueue,i.updateQueue=e,Qu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)fy(a,e),a=a.sibling;return zt(be,be.current&1|2),i.child}e=e.sibling}h.tail!==null&&nn()>Yu&&(i.flags|=128,l=!0,Wo(h,!1),i.lanes=4194304)}else{if(!l)if(e=Nu(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Qu(i,e),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ht)return ie(i),null}else 2*nn()-h.renderingStartTime>Yu&&a!==536870912&&(i.flags|=128,l=!0,Wo(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=nn(),i.sibling=null,e=be.current,zt(be,l?e&1|2:e&1),i):(ie(i),null);case 22:case 23:return Ii(i),Hh(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ie(i),i.subtreeFlags&6&&(i.flags|=8192)):ie(i),a=i.updateQueue,a!==null&&Qu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&Wt(As),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Oi(we),ie(i),null;case 25:return null}throw Error(s(156,i.tag))}function tA(e,i){switch(jh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Oi(we),mi(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Fs(i),null;case 13:if(Ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Oo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Wt(be),null;case 4:return mi(),null;case 10:return Oi(i.type),null;case 22:case 23:return Ii(i),Hh(),e!==null&&Wt(As),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Oi(we),null;case 25:return null;default:return null}}function py(e,i){switch(jh(i),i.tag){case 3:Oi(we),mi();break;case 26:case 27:case 5:Fs(i);break;case 4:mi();break;case 13:Ii(i);break;case 19:Wt(be);break;case 10:Oi(i.type);break;case 22:case 23:Ii(i),Hh(),e!==null&&Wt(As);break;case 24:Oi(we)}}var eA={getCacheForType:function(e){var i=Ge(we),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},nA=typeof WeakMap=="function"?WeakMap:Map,re=0,Zt=null,Dt=null,Lt=0,Jt=0,mn=null,Pi=!1,wa=!1,Lf=!1,Ui=0,ue=0,Ir=0,Os=0,jf=0,Mn=0,Ra=0,Zo=null,ri=null,zf=!1,Bf=0,Yu=1/0,Xu=null,Cr=null,$u=!1,Vs=null,Jo=0,qf=0,Hf=null,tl=0,Gf=null;function pn(){if((re&2)!==0&&Lt!==0)return Lt&-Lt;if(S.T!==null){var e=ya;return e!==0?e:Zf()}return nu()}function gy(){Mn===0&&(Mn=(Lt&536870912)===0||Ht?ho():536870912);var e=Dn.current;return e!==null&&(e.flags|=32),Mn}function en(e,i,a){(e===Zt&&Jt===2||e.cancelPendingCommit!==null)&&(Ia(e,0),Li(e,Lt,Mn,!1)),he(e,a),((re&2)===0||e!==Zt)&&(e===Zt&&((re&2)===0&&(Os|=a),ue===4&&Li(e,Lt,Mn,!1)),si(e))}function yy(e,i,a){if((re&6)!==0)throw Error(s(327));var l=!a&&(i&60)===0&&(i&e.expiredLanes)===0||er(e,i),h=l?sA(e,i):Yf(e,i,!0),d=l;do{if(h===0){wa&&!l&&Li(e,i,0,!1);break}else if(h===6)Li(e,i,0,!Pi);else{if(a=e.current.alternate,d&&!iA(a)){h=Yf(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var E=e;h=Zo;var b=E.current.memoizedState.isDehydrated;if(b&&(Ia(E,v).flags|=256),v=Yf(E,v,!1),v!==2){if(Lf&&!b){E.errorRecoveryDisabledLanes|=d,Os|=d,h=4;break t}d=ri,ri=h,d!==null&&Ff(d)}h=v}if(d=!1,h!==2)continue}}if(h===1){Ia(e,0),Li(e,i,0,!0);break}t:{switch(l=e,h){case 0:case 1:throw Error(s(345));case 4:if((i&4194176)===i){Li(l,i,Mn,!Pi);break t}break;case 2:ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(d=Bf+300-nn(),10<d)){if(Li(l,i,Mn,!Pi),vn(l,0)!==0)break t;l.timeoutHandle=By(_y.bind(null,l,a,ri,Xu,zf,i,Mn,Os,Ra,Pi,2,-0,0),d);break t}_y(l,a,ri,Xu,zf,i,Mn,Os,Ra,Pi,0,-0,0)}}break}while(!0);si(e)}function Ff(e){ri===null?ri=e:ri.push.apply(ri,e)}function _y(e,i,a,l,h,d,v,E,b,k,G,$,z){var H=i.subtreeFlags;if((H&8192||(H&16785408)===16785408)&&(al={stylesheets:null,count:0,unsuspend:LA},ly(i),i=zA(),i!==null)){e.cancelPendingCommit=i(wy.bind(null,e,a,l,h,v,E,b,1,$,z)),Li(e,d,v,!k);return}wy(e,a,l,h,v,E,b,G,$,z)}function iA(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!hn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Li(e,i,a,l){i&=~jf,i&=~Os,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-We(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ir(e,a,i)}function Wu(){return(re&6)===0?(el(0),!1):!0}function Kf(){if(Dt!==null){if(Jt===0)var e=Dt.return;else e=Dt,Ni=Is=null,Wh(e),pa=null,ko=0,e=Dt;for(;e!==null;)py(e.alternate,e),e=e.return;Dt=null}}function Ia(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,AA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Kf(),Zt=e,Dt=a=Rr(e.current,null),Lt=i,Jt=0,mn=null,Pi=!1,wa=er(e,i),Lf=!1,Ra=Mn=jf=Os=Ir=ue=0,ri=Zo=null,zf=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-We(l),d=1<<h;i|=e[h],l&=~d}return Ui=i,Tu(),a}function vy(e,i){It=null,S.H=ii,i===Mo?(i=xp(),Jt=3):i===Op?(i=xp(),Jt=4):Jt=i===Vg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,mn=i,Dt===null&&(ue=1,Bu(e,Rn(i,e.current)))}function Ey(){var e=S.H;return S.H=ii,e===null?ii:e}function Ty(){var e=S.A;return S.A=eA,e}function Qf(){ue=4,Pi||(Lt&4194176)!==Lt&&Dn.current!==null||(wa=!0),(Ir&134217727)===0&&(Os&134217727)===0||Zt===null||Li(Zt,Lt,Mn,!1)}function Yf(e,i,a){var l=re;re|=2;var h=Ey(),d=Ty();(Zt!==e||Lt!==i)&&(Xu=null,Ia(e,i)),i=!1;var v=ue;t:do try{if(Jt!==0&&Dt!==null){var E=Dt,b=mn;switch(Jt){case 8:Kf(),v=6;break t;case 3:case 2:case 6:Dn.current===null&&(i=!0);var k=Jt;if(Jt=0,mn=null,Ca(e,E,b,k),a&&wa){v=0;break t}break;default:k=Jt,Jt=0,mn=null,Ca(e,E,b,k)}}rA(),v=ue;break}catch(G){vy(e,G)}while(!0);return i&&e.shellSuspendCounter++,Ni=Is=null,re=l,S.H=h,S.A=d,Dt===null&&(Zt=null,Lt=0,Tu()),v}function rA(){for(;Dt!==null;)Ay(Dt)}function sA(e,i){var a=re;re|=2;var l=Ey(),h=Ty();Zt!==e||Lt!==i?(Xu=null,Yu=nn()+500,Ia(e,i)):wa=er(e,i);t:do try{if(Jt!==0&&Dt!==null){i=Dt;var d=mn;e:switch(Jt){case 1:Jt=0,mn=null,Ca(e,i,d,1);break;case 2:if(Vp(d)){Jt=0,mn=null,Sy(i);break}i=function(){Jt===2&&Zt===e&&(Jt=7),si(e)},d.then(i,i);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:Vp(d)?(Jt=0,mn=null,Sy(i)):(Jt=0,mn=null,Ca(e,i,d,7));break;case 5:var v=null;switch(Dt.tag){case 26:v=Dt.memoizedState;case 5:case 27:var E=Dt;if(!v||Zy(v)){Jt=0,mn=null;var b=E.sibling;if(b!==null)Dt=b;else{var k=E.return;k!==null?(Dt=k,Zu(k)):Dt=null}break e}}Jt=0,mn=null,Ca(e,i,d,5);break;case 6:Jt=0,mn=null,Ca(e,i,d,6);break;case 8:Kf(),ue=6;break t;default:throw Error(s(462))}}aA();break}catch(G){vy(e,G)}while(!0);return Ni=Is=null,S.H=l,S.A=h,re=a,Dt!==null?0:(Zt=null,Lt=0,Tu(),ue)}function aA(){for(;Dt!==null&&!Th();)Ay(Dt)}function Ay(e){var i=Gg(e.alternate,e,Ui);e.memoizedProps=e.pendingProps,i===null?Zu(e):Dt=i}function Sy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Lg(a,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=Lg(a,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Wh(i);default:py(a,i),i=Dt=fy(i,Ui),i=Gg(a,i,Ui)}e.memoizedProps=e.pendingProps,i===null?Zu(e):Dt=i}function Ca(e,i,a,l){Ni=Is=null,Wh(i),pa=null,ko=0;var h=i.return;try{if(YT(e,h,i,a,Lt)){ue=1,Bu(e,Rn(a,e.current)),Dt=null;return}}catch(d){if(h!==null)throw Dt=h,d;ue=1,Bu(e,Rn(a,e.current)),Dt=null;return}i.flags&32768?(Ht||l===1?e=!0:wa||(Lt&536870912)!==0?e=!1:(Pi=e=!0,(l===2||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),by(i,e)):Zu(i)}function Zu(e){var i=e;do{if((i.flags&32768)!==0){by(i,Pi);return}e=i.return;var a=JT(i.alternate,i,Ui);if(a!==null){Dt=a;return}if(i=i.sibling,i!==null){Dt=i;return}Dt=i=e}while(i!==null);ue===0&&(ue=5)}function by(e,i){do{var a=tA(e.alternate,e);if(a!==null){a.flags&=32767,Dt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=a}while(e!==null);ue=6,Dt=null}function wy(e,i,a,l,h,d,v,E,b,k){var G=S.T,$=et.p;try{et.p=2,S.T=null,oA(e,i,a,l,$,h,d,v,E,b,k)}finally{S.T=G,et.p=$}}function oA(e,i,a,l,h,d,v,E){do Da();while(Vs!==null);if((re&6)!==0)throw Error(s(327));var b=e.finishedWork;if(l=e.finishedLanes,b===null)return null;if(e.finishedWork=null,e.finishedLanes=0,b===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var k=b.lanes|b.childLanes;if(k|=Ph,tu(e,l,k,d,v,E),e===Zt&&(Dt=Zt=null,Lt=0),(b.subtreeFlags&10256)===0&&(b.flags&10256)===0||$u||($u=!0,qf=k,Hf=a,hA(pi,function(){return Da(),null})),a=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||a?(a=S.T,S.T=null,d=et.p,et.p=2,v=re,re|=4,$T(e,b),sy(b,e),OT(ad,e.containerInfo),cc=!!sd,ad=sd=null,e.current=b,ey(e,b.alternate,b),oo(),re=v,et.p=d,S.T=a):e.current=b,$u?($u=!1,Vs=e,Jo=l):Ry(e,k),k=e.pendingLanes,k===0&&(Cr=null),uo(b.stateNode),si(e),i!==null)for(h=e.onRecoverableError,b=0;b<i.length;b++)k=i[b],h(k.value,{componentStack:k.stack});return(Jo&3)!==0&&Da(),k=e.pendingLanes,(l&4194218)!==0&&(k&42)!==0?e===Gf?tl++:(tl=0,Gf=e):tl=0,el(0),null}function Ry(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Uo(i)))}function Da(){if(Vs!==null){var e=Vs,i=qf;qf=0;var a=eu(Jo),l=S.T,h=et.p;try{if(et.p=32>a?32:a,S.T=null,Vs===null)var d=!1;else{a=Hf,Hf=null;var v=Vs,E=Jo;if(Vs=null,Jo=0,(re&6)!==0)throw Error(s(331));var b=re;if(re|=4,cy(v.current),oy(v,v.current,E,a),re=b,el(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Ji,v)}catch{}d=!0}return d}finally{et.p=h,S.T=l,Ry(e,i)}}return!1}function Iy(e,i,a){i=Rn(a,i),i=ff(e.stateNode,i,2),e=Ar(e,i,2),e!==null&&(he(e,2),si(e))}function $t(e,i,a){if(e.tag===3)Iy(e,e,a);else for(;i!==null;){if(i.tag===3){Iy(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cr===null||!Cr.has(l))){e=Rn(a,e),a=Ng(2),l=Ar(i,a,2),l!==null&&(Og(a,l,i,e),he(l,2),si(l));break}}i=i.return}}function Xf(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new nA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Lf=!0,h.add(a),e=lA.bind(null,e,i,a),i.then(e,e))}function lA(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Zt===e&&(Lt&a)===a&&(ue===4||ue===3&&(Lt&62914560)===Lt&&300>nn()-Bf?(re&2)===0&&Ia(e,0):jf|=a,Ra===Lt&&(Ra=0)),si(e)}function Cy(e,i){i===0&&(i=nr()),e=mr(e,i),e!==null&&(he(e,i),si(e))}function uA(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Cy(e,a)}function cA(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Cy(e,a)}function hA(e,i){return ns(e,i)}var Ju=null,Na=null,$f=!1,tc=!1,Wf=!1,Ms=0;function si(e){e!==Na&&e.next===null&&(Na===null?Ju=Na=e:Na=Na.next=e),tc=!0,$f||($f=!0,dA(fA))}function el(e,i){if(!Wf&&tc){Wf=!0;do for(var a=!1,l=Ju;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-We(42|e)+1)-1,d&=h&~(v&~E),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,Oy(l,d))}else d=Lt,d=vn(l,l===Zt?d:0),(d&3)===0||er(l,d)||(a=!0,Oy(l,d));l=l.next}while(a);Wf=!1}}function fA(){tc=$f=!1;var e=0;Ms!==0&&(TA()&&(e=Ms),Ms=0);for(var i=nn(),a=null,l=Ju;l!==null;){var h=l.next,d=Dy(l,i);d===0?(l.next=null,a===null?Ju=h:a.next=h,h===null&&(Na=a)):(a=l,(e!==0||(d&3)!==0)&&(tc=!0)),l=h}el(e)}function Dy(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-We(d),E=1<<v,b=h[v];b===-1?((E&a)===0||(E&l)!==0)&&(h[v]=Ys(E,i)):b<=i&&(e.expiredLanes|=E),d&=~E}if(i=Zt,a=Lt,a=vn(e,e===i?a:0),l=e.callbackNode,a===0||e===i&&Jt===2||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Qs(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||er(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&Qs(l),eu(a)){case 2:case 8:a=Ce;break;case 32:a=pi;break;case 268435456:a=lo;break;default:a=pi}return l=Ny.bind(null,e),a=ns(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&Qs(l),e.callbackPriority=2,e.callbackNode=null,2}function Ny(e,i){var a=e.callbackNode;if(Da()&&e.callbackNode!==a)return null;var l=Lt;return l=vn(e,e===Zt?l:0),l===0?null:(yy(e,l,i),Dy(e,nn()),e.callbackNode!=null&&e.callbackNode===a?Ny.bind(null,e):null)}function Oy(e,i){if(Da())return null;yy(e,i,!0)}function dA(e){SA(function(){(re&6)!==0?ns(Ee,e):e()})}function Zf(){return Ms===0&&(Ms=ho()),Ms}function Vy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yn(""+e)}function My(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function mA(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Vy((h[Te]||null).action),v=l.submitter;v&&(i=(i=v[Te]||null)?Vy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new ea("action","action",null,l,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var b=v?My(h,v):new FormData(h);of(a,{pending:!0,data:b,method:h.method,action:d},null,b)}}else typeof d=="function"&&(E.preventDefault(),b=v?My(h,v):new FormData(h),of(a,{pending:!0,data:b,method:h.method,action:d},d,b))},currentTarget:h}]})}}for(var Jf=0;Jf<wp.length;Jf++){var td=wp[Jf],pA=td.toLowerCase(),gA=td[0].toUpperCase()+td.slice(1);Ln(pA,"on"+gA)}Ln(Ep,"onAnimationEnd"),Ln(Tp,"onAnimationIteration"),Ln(Ap,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(MT,"onTransitionRun"),Ln(xT,"onTransitionStart"),Ln(kT,"onTransitionCancel"),Ln(Sp,"onTransitionEnd"),rn("onMouseEnter",["mouseout","mouseover"]),rn("onMouseLeave",["mouseout","mouseover"]),rn("onPointerEnter",["pointerout","pointerover"]),rn("onPointerLeave",["pointerout","pointerover"]),un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),un("onBeforeInput",["compositionend","keypress","textInput","paste"]),un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nl));function xy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],b=E.instance,k=E.currentTarget;if(E=E.listener,b!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=k;try{d(h)}catch(G){zu(G)}h.currentTarget=null,d=b}else for(v=0;v<l.length;v++){if(E=l[v],b=E.instance,k=E.currentTarget,E=E.listener,b!==d&&h.isPropagationStopped())break t;d=E,h.currentTarget=k;try{d(h)}catch(G){zu(G)}h.currentTarget=null,d=b}}}}function Mt(e,i){var a=i[rs];a===void 0&&(a=i[rs]=new Set);var l=e+"__bubble";a.has(l)||(ky(i,e,2,!1),a.add(l))}function ed(e,i,a){var l=0;i&&(l|=4),ky(a,e,l,i)}var ec="_reactListening"+Math.random().toString(36).slice(2);function nd(e){if(!e[ec]){e[ec]=!0,mo.forEach(function(a){a!=="selectionchange"&&(yA.has(a)||ed(a,!1,e),ed(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[ec]||(i[ec]=!0,ed("selectionchange",!1,i))}}function ky(e,i,a,l){switch(r_(i)){case 2:var h=HA;break;case 8:h=GA;break;default:h=pd}a=h.bind(null,i,a,e),h=void 0,!Sn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function id(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(v===4)for(v=l.return;v!==null;){var b=v.tag;if((b===3||b===4)&&(b=v.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;v=v.return}for(;E!==null;){if(v=Un(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){l=d=v;continue t}E=E.parentNode}}l=l.return}au(function(){var k=d,G=ta(a),$=[];t:{var z=bp.get(e);if(z!==void 0){var H=ea,ot=e;switch(e){case"keypress":if($n(a)===0)break t;case"keydown":case"keyup":H=oa;break;case"focusin":ot="focus",H=ra;break;case"focusout":ot="blur",H=ra;break;case"beforeblur":case"afterblur":H=ra;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=mu;break;case Ep:case Tp:case Ap:H=sa;break;case Sp:H=gu;break;case"scroll":case"scrollend":H=ou;break;case"wheel":H=la;break;case"copy":case"cut":case"paste":H=aa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ro;break;case"toggle":case"beforetoggle":H=_u}var St=(i&4)!==0,ce=!St&&(e==="scroll"||e==="scrollend"),P=St?z!==null?z+"Capture":null:z;St=[];for(var V=k,j;V!==null;){var Q=V;if(j=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||j===null||P===null||(Q=us(V,P),Q!=null&&St.push(il(V,Q,j))),ce)break;V=V.return}0<St.length&&(z=new H(z,ot,null,a,G),$.push({event:z,listeners:St}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",z&&a!==An&&(ot=a.relatedTarget||a.fromElement)&&(Un(ot)||ot[gi]))break t;if((H||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,H?(ot=a.relatedTarget||a.toElement,H=k,ot=ot?Un(ot):null,ot!==null&&(ce=ut(ot),St=ot.tag,ot!==ce||St!==5&&St!==27&&St!==6)&&(ot=null)):(H=null,ot=k),H!==ot)){if(St=bn,Q="onMouseLeave",P="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(St=Ro,Q="onPointerLeave",P="onPointerEnter",V="pointer"),ce=H==null?z:or(H),j=ot==null?z:or(ot),z=new St(Q,V+"leave",H,a,G),z.target=ce,z.relatedTarget=j,Q=null,Un(G)===k&&(St=new St(P,V+"enter",ot,a,G),St.target=j,St.relatedTarget=ce,Q=St),ce=Q,H&&ot)e:{for(St=H,P=ot,V=0,j=St;j;j=Oa(j))V++;for(j=0,Q=P;Q;Q=Oa(Q))j++;for(;0<V-j;)St=Oa(St),V--;for(;0<j-V;)P=Oa(P),j--;for(;V--;){if(St===P||P!==null&&St===P.alternate)break e;St=Oa(St),P=Oa(P)}St=null}else St=null;H!==null&&Py($,z,H,St,!1),ot!==null&&ce!==null&&Py($,ce,ot,St,!0)}}t:{if(z=k?or(k):window,H=z.nodeName&&z.nodeName.toLowerCase(),H==="select"||H==="input"&&z.type==="file")var at=up;else if(Se(z))if(cp)at=DT;else{at=IT;var Ct=RT}else H=z.nodeName,!H||H.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?k&&vo(k.elementType)&&(at=up):at=CT;if(at&&(at=at(e,k))){bi($,at,a,G);break t}Ct&&Ct(e,z,k),e==="focusout"&&k&&z.type==="number"&&k.memoizedProps.value!=null&&Js(z,"number",z.value)}switch(Ct=k?or(k):window,e){case"focusin":(Se(Ct)||Ct.contentEditable==="true")&&(ua=Ct,Mh=k,Do=null);break;case"focusout":Do=Mh=ua=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,_p($,a,G);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":_p($,a,G)}var ct;if(Jn)t:{switch(e){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Pt?q(e,a)&&(yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(yt="onCompositionStart");yt&&(_&&a.locale!=="ko"&&(Pt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Pt&&(ct=To()):(Xn=G,dr="value"in Xn?Xn.value:Xn.textContent,Pt=!0)),Ct=nc(k,yt),0<Ct.length&&(yt=new bo(yt,e,null,a,G),$.push({event:yt,listeners:Ct}),ct?yt.data=ct:(ct=nt(a),ct!==null&&(yt.data=ct)))),(ct=p?Ae(e,a):Ut(e,a))&&(yt=nc(k,"onBeforeInput"),0<yt.length&&(Ct=new bo("onBeforeInput","beforeinput",null,a,G),$.push({event:Ct,listeners:yt}),Ct.data=ct)),mA($,e,k,a,G)}xy($,i)})}function il(e,i,a){return{instance:e,listener:i,currentTarget:a}}function nc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=us(e,a),h!=null&&l.unshift(il(e,h,d)),h=us(e,i),h!=null&&l.push(il(e,h,d))),e=e.return}return l}function Oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Py(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,b=E.alternate,k=E.stateNode;if(E=E.tag,b!==null&&b===l)break;E!==5&&E!==26&&E!==27||k===null||(b=k,h?(k=us(a,d),k!=null&&v.unshift(il(a,k,b))):h||(k=us(a,d),k!=null&&v.push(il(a,k,b)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var _A=/\r\n?/g,vA=/\u0000|\uFFFD/g;function Uy(e){return(typeof e=="string"?e:""+e).replace(_A,`
`).replace(vA,"")}function Ly(e,i){return i=Uy(i),Uy(e)===i}function ic(){}function Xt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Tn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Tn(e,""+l);break;case"className":cr(e,"class",l);break;case"tabIndex":cr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(e,a,l);break;case"style":su(e,l,d);break;case"data":if(i!=="object"){cr(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Yn(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Xt(e,i,"name",h.name,h,null),Xt(e,i,"formEncType",h.formEncType,h,null),Xt(e,i,"formMethod",h.formMethod,h,null),Xt(e,i,"formTarget",h.formTarget,h,null)):(Xt(e,i,"encType",h.encType,h,null),Xt(e,i,"method",h.method,h,null),Xt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Yn(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ic);break;case"onScroll":l!=null&&Mt("scroll",e);break;case"onScrollEnd":l!=null&&Mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Yn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Mt("beforetoggle",e),Mt("toggle",e),ur(e,"popover",l);break;case"xlinkActuate":En(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":En(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":En(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":En(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":En(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":En(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":En(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":En(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":En(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ur(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rh.get(a)||a,ur(e,a,l))}}function rd(e,i,a,l,h,d){switch(a){case"style":su(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Tn(e,l):(typeof l=="number"||typeof l=="bigint")&&Tn(e,""+l);break;case"onScroll":l!=null&&Mt("scroll",e);break;case"onScrollEnd":l!=null&&Mt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ws.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Te]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ur(e,a,l)}}}function je(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",e),Mt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,d,v,a,null)}}h&&Xt(e,i,"srcSet",a.srcSet,a,null),l&&Xt(e,i,"src",a.src,a,null);return;case"input":Mt("invalid",e);var E=d=v=h=null,b=null,k=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":k=G;break;case"value":d=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Xt(e,i,l,G,a,null)}}os(e,d,E,b,k,v,h,!1),as(e);return;case"select":Mt("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Xt(e,i,h,E,a,null)}i=d,a=v,e.multiple=!!l,i!=null?qt(e,!!l,i,!1):a!=null&&qt(e,!!l,a,!0);return;case"textarea":Mt("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Xt(e,i,v,E,a,null)}fr(e,l,h,d),as(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(l=a[b],l!=null))switch(b){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xt(e,i,b,l,a,null)}return;case"dialog":Mt("cancel",e),Mt("close",e);break;case"iframe":case"object":Mt("load",e);break;case"video":case"audio":for(l=0;l<nl.length;l++)Mt(nl[l],e);break;case"image":Mt("error",e),Mt("load",e);break;case"details":Mt("toggle",e);break;case"embed":case"source":case"link":Mt("error",e),Mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xt(e,i,k,l,a,null)}return;default:if(vo(i)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&rd(e,i,G,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Xt(e,i,E,l,a,null))}function EA(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,b=null,k=null,G=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":b=$;default:l.hasOwnProperty(H)||Xt(e,i,H,null,l,$)}}for(var z in l){var H=l[z];if($=a[z],l.hasOwnProperty(z)&&(H!=null||$!=null))switch(z){case"type":d=H;break;case"name":h=H;break;case"checked":k=H;break;case"defaultChecked":G=H;break;case"value":v=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==$&&Xt(e,i,z,H,l,$)}}hr(e,v,E,b,k,G,d,h);return;case"select":H=v=E=z=null;for(d in a)if(b=a[d],a.hasOwnProperty(d)&&b!=null)switch(d){case"value":break;case"multiple":H=b;default:l.hasOwnProperty(d)||Xt(e,i,d,null,l,b)}for(h in l)if(d=l[h],b=a[h],l.hasOwnProperty(h)&&(d!=null||b!=null))switch(h){case"value":z=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==b&&Xt(e,i,h,d,l,b)}i=E,a=v,l=H,z!=null?qt(e,!!a,z,!1):!!l!=!!a&&(i!=null?qt(e,!!a,i,!0):qt(e,!!a,a?[]:"",!1));return;case"textarea":H=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Xt(e,i,E,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Xt(e,i,v,h,l,d)}ls(e,z,H);return;case"option":for(var ot in a)if(z=a[ot],a.hasOwnProperty(ot)&&z!=null&&!l.hasOwnProperty(ot))switch(ot){case"selected":e.selected=!1;break;default:Xt(e,i,ot,null,l,z)}for(b in l)if(z=l[b],H=a[b],l.hasOwnProperty(b)&&z!==H&&(z!=null||H!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Xt(e,i,b,z,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in a)z=a[St],a.hasOwnProperty(St)&&z!=null&&!l.hasOwnProperty(St)&&Xt(e,i,St,null,l,z);for(k in l)if(z=l[k],H=a[k],l.hasOwnProperty(k)&&z!==H&&(z!=null||H!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Xt(e,i,k,z,l,H)}return;default:if(vo(i)){for(var ce in a)z=a[ce],a.hasOwnProperty(ce)&&z!==void 0&&!l.hasOwnProperty(ce)&&rd(e,i,ce,void 0,l,z);for(G in l)z=l[G],H=a[G],!l.hasOwnProperty(G)||z===H||z===void 0&&H===void 0||rd(e,i,G,z,l,H);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!l.hasOwnProperty(P)&&Xt(e,i,P,null,l,z);for($ in l)z=l[$],H=a[$],!l.hasOwnProperty($)||z===H||z==null&&H==null||Xt(e,i,$,z,l,H)}var sd=null,ad=null;function rc(e){return e.nodeType===9?e:e.ownerDocument}function jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function od(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ld=null;function TA(){var e=window.event;return e&&e.type==="popstate"?e===ld?!1:(ld=e,!0):(ld=null,!1)}var By=typeof setTimeout=="function"?setTimeout:void 0,AA=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,SA=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(e){return qy.resolve(null).then(e).catch(bA)}:By;function bA(e){setTimeout(function(){throw e})}function ud(e,i){var a=i,l=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(l===0){e.removeChild(h),hl(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=h}while(a);hl(i)}function cd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cd(a),ss(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function wA(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ar])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Bn(e.nextSibling),e===null)break}return null}function RA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bn(e.nextSibling),e===null))return null;return e}function Bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function Hy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Gy(e,i,a){switch(i=rc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}var xn=new Map,Fy=new Set;function sc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var ji=et.d;et.d={f:IA,r:CA,D:DA,C:NA,L:OA,m:VA,X:xA,S:MA,M:kA};function IA(){var e=ji.f(),i=Wu();return e||i}function CA(e){var i=yi(e);i!==null&&i.tag===5&&i.type==="form"?_g(i):ji.r(e)}var Va=typeof document>"u"?null:document;function Ky(e,i,a){var l=Va;if(l&&typeof i=="string"&&i){var h=oe(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Fy.has(h)||(Fy.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),je(i,"link",e),ne(i),l.head.appendChild(i)))}}function DA(e){ji.D(e),Ky("dns-prefetch",e,null)}function NA(e,i){ji.C(e,i),Ky("preconnect",e,i)}function OA(e,i,a){ji.L(e,i,a);var l=Va;if(l&&e&&i){var h='link[rel="preload"][as="'+oe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+oe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+oe(a.imageSizes)+'"]')):h+='[href="'+oe(e)+'"]';var d=h;switch(i){case"style":d=Ma(e);break;case"script":d=xa(e)}xn.has(d)||(e=D({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),xn.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(rl(d))||i==="script"&&l.querySelector(sl(d))||(i=l.createElement("link"),je(i,"link",e),ne(i),l.head.appendChild(i)))}}function VA(e,i){ji.m(e,i);var a=Va;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+oe(l)+'"][href="'+oe(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=xa(e)}if(!xn.has(d)&&(e=D({rel:"modulepreload",href:e},i),xn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sl(d)))return}l=a.createElement("link"),je(l,"link",e),ne(l),a.head.appendChild(l)}}}function MA(e,i,a){ji.S(e,i,a);var l=Va;if(l&&e){var h=lr(l).hoistableStyles,d=Ma(e);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(rl(d)))E.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":i},a),(a=xn.get(d))&&hd(e,a);var b=v=l.createElement("link");ne(b),je(b,"link",e),b._p=new Promise(function(k,G){b.onload=k,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ac(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function xA(e,i){ji.X(e,i);var a=Va;if(a&&e){var l=lr(a).hoistableScripts,h=xa(e),d=l.get(h);d||(d=a.querySelector(sl(h)),d||(e=D({src:e,async:!0},i),(i=xn.get(h))&&fd(e,i),d=a.createElement("script"),ne(d),je(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function kA(e,i){ji.M(e,i);var a=Va;if(a&&e){var l=lr(a).hoistableScripts,h=xa(e),d=l.get(h);d||(d=a.querySelector(sl(h)),d||(e=D({src:e,async:!0,type:"module"},i),(i=xn.get(h))&&fd(e,i),d=a.createElement("script"),ne(d),je(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Qy(e,i,a,l){var h=(h=_n.current)?sc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Ma(a.href),a=lr(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ma(a.href);var d=lr(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(rl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),xn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},xn.set(e,a),d||PA(h,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=xa(a),a=lr(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ma(e){return'href="'+oe(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Yy(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function PA(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),je(i,"link",a),ne(i),e.head.appendChild(i))}function xa(e){return'[src="'+oe(e)+'"]'}function sl(e){return"script[async]"+e}function Xy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+oe(a.href)+'"]');if(l)return i.instance=l,ne(l),l;var h=D({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ne(l),je(l,"style",h),ac(l,a.precedence,e),i.instance=l;case"stylesheet":h=Ma(a.href);var d=e.querySelector(rl(h));if(d)return i.state.loading|=4,i.instance=d,ne(d),d;l=Yy(a),(h=xn.get(h))&&hd(l,h),d=(e.ownerDocument||e).createElement("link"),ne(d);var v=d;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(d,"link",l),i.state.loading|=4,ac(d,a.precedence,e),i.instance=d;case"script":return d=xa(a.src),(h=e.querySelector(sl(d)))?(i.instance=h,ne(h),h):(l=a,(h=xn.get(d))&&(l=D({},a),fd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ne(h),je(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ac(l,a.precedence,e));return i.instance}function ac(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function hd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function fd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var oc=null;function $y(e,i,a){if(oc===null){var l=new Map,h=oc=new Map;h.set(a,l)}else h=oc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ar]||d[De]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function Wy(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function UA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Zy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var al=null;function LA(){}function jA(e,i,a){if(al===null)throw Error(s(475));var l=al;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Ma(a.href),d=e.querySelector(rl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=lc.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,ne(d);return}d=e.ownerDocument||e,a=Yy(a),(h=xn.get(h))&&hd(a,h),d=d.createElement("link"),ne(d);var v=d;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),je(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=lc.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function zA(){if(al===null)throw Error(s(475));var e=al;return e.stylesheets&&e.count===0&&dd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&dd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function lc(){if(this.count--,this.count===0){if(this.stylesheets)dd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uc=null;function dd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,uc=new Map,i.forEach(BA,e),uc=null,lc.call(e))}function BA(e,i){if(!(i.state.loading&4)){var a=uc.get(e);if(a)var l=a.get(null);else{a=new Map,uc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=lc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var ol={$$typeof:B,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function qA(e,i,a,l,h,d,v,E){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.hiddenUpdates=Xs(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Jy(e,i,a,l,h,d,v,E,b,k,G,$){return e=new qA(e,i,a,v,E,b,k,$),i=1,d===!0&&(i|=24),d=Vn(3,null,null,i),e.current=d,d.stateNode=e,i=Gh(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},wf(d),e}function t_(e){return e?(e=fa,e):fa}function e_(e,i,a,l,h,d){h=t_(h),l.context===null?l.context=h:l.pendingContext=h,l=Tr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ar(e,l,i),a!==null&&(en(a,e,i),Go(a,e,i))}function n_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function md(e,i){n_(e,i),(e=e.alternate)&&n_(e,i)}function i_(e){if(e.tag===13){var i=mr(e,67108864);i!==null&&en(i,e,67108864),md(e,67108864)}}var cc=!0;function HA(e,i,a,l){var h=S.T;S.T=null;var d=et.p;try{et.p=2,pd(e,i,a,l)}finally{et.p=d,S.T=h}}function GA(e,i,a,l){var h=S.T;S.T=null;var d=et.p;try{et.p=8,pd(e,i,a,l)}finally{et.p=d,S.T=h}}function pd(e,i,a,l){if(cc){var h=gd(l);if(h===null)id(e,i,l,hc,a),s_(e,l);else if(KA(h,e,i,a,l))l.stopPropagation();else if(s_(e,l),i&4&&-1<FA.indexOf(e)){for(;h!==null;){var d=yi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Pn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-We(v);E.entanglements[1]|=b,v&=~b}si(d),(re&6)===0&&(Yu=nn()+500,el(0))}}break;case 13:E=mr(d,2),E!==null&&en(E,d,2),Wu(),md(d,2)}if(d=gd(l),d===null&&id(e,i,l,hc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else id(e,i,l,null,a)}}function gd(e){return e=ta(e),yd(e)}var hc=null;function yd(e){if(hc=null,e=Un(e),e!==null){var i=ut(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=Bt(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return hc=e,null}function r_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($l()){case Ee:return 2;case Ce:return 8;case pi:case Wl:return 32;case lo:return 268435456;default:return 32}default:return 32}}var _d=!1,Dr=null,Nr=null,Or=null,ll=new Map,ul=new Map,Vr=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(e,i){switch(e){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(i.pointerId)}}function cl(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=yi(i),i!==null&&i_(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function KA(e,i,a,l,h){switch(i){case"focusin":return Dr=cl(Dr,e,i,a,l,h),!0;case"dragenter":return Nr=cl(Nr,e,i,a,l,h),!0;case"mouseover":return Or=cl(Or,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return ll.set(d,cl(ll.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,ul.set(d,cl(ul.get(d)||null,e,i,a,l,h)),!0}return!1}function a_(e){var i=Un(e.target);if(i!==null){var a=ut(i);if(a!==null){if(i=a.tag,i===13){if(i=Bt(a),i!==null){e.blockedOn=i,sr(e.priority,function(){if(a.tag===13){var l=pn(),h=mr(a,l);h!==null&&en(h,a,l),md(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=gd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);An=l,a.target.dispatchEvent(l),An=null}else return i=yi(a),i!==null&&i_(i),e.blockedOn=a,!1;i.shift()}return!0}function o_(e,i,a){fc(e)&&a.delete(i)}function QA(){_d=!1,Dr!==null&&fc(Dr)&&(Dr=null),Nr!==null&&fc(Nr)&&(Nr=null),Or!==null&&fc(Or)&&(Or=null),ll.forEach(o_),ul.forEach(o_)}function dc(e,i){e.blockedOn===i&&(e.blockedOn=null,_d||(_d=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,QA)))}var mc=null;function l_(e){mc!==e&&(mc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mc===e&&(mc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(yd(l||a)===null)continue;break}var d=yi(a);d!==null&&(e.splice(i,3),i-=3,of(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function hl(e){function i(b){return dc(b,e)}Dr!==null&&dc(Dr,e),Nr!==null&&dc(Nr,e),Or!==null&&dc(Or,e),ll.forEach(i),ul.forEach(i);for(var a=0;a<Vr.length;a++){var l=Vr[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Vr.length&&(a=Vr[0],a.blockedOn===null);)a_(a),a.blockedOn===null&&Vr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Te]||null;if(typeof d=="function")v||l_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Te]||null)E=v.formAction;else if(yd(h)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),l_(a)}}}function vd(e){this._internalRoot=e}pc.prototype.render=vd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=pn();e_(a,l,e,i,null,null)},pc.prototype.unmount=vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&Da(),e_(e.current,2,null,e,null,null),Wu(),i[gi]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var i=nu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Vr.length&&i!==0&&i<Vr[a].priority;a++);Vr.splice(a,0,e),a===0&&a_(e)}};var u_=t.version;if(u_!=="19.0.0")throw Error(s(527,u_,"19.0.0"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=W(i),e=e!==null?J(e):null,e=e===null?null:e.stateNode,e};var YA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:Un,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Ji=gc.inject(YA),He=gc}catch{}}return dl.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=Rg,d=Ig,v=Cg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=Jy(e,1,!1,null,null,a,l,h,d,v,E,null),e[gi]=i.current,nd(e.nodeType===8?e.parentNode:e),new vd(i)},dl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=Rg,v=Ig,E=Cg,b=null,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(k=a.formState)),i=Jy(e,1,!0,i,a??null,l,h,d,v,E,b,k),i.context=t_(null),a=i.current,l=pn(),h=Tr(l),h.callback=null,Ar(a,h,l),i.current.lanes=l,he(i,l),si(i),e[gi]=i.current,nd(e),new pc(i)},dl.version="19.0.0",dl}var v_;function aS(){if(v_)return Ad.exports;v_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ad.exports=sS(),Ad.exports}var oS=aS();const lS=({value:r,row:t,col:n,isSelected:s,isHighlighted:o,isConflict:u,isPreset:f,onClick:m})=>{const g=n%3===2&&n<8,y=t%3===2&&t<8,[T,w]=lt.useState(!1),[O,B]=lt.useState(r);lt.useEffect(()=>{if(r!==O&&!f&&r!==null){w(!0);const Z=setTimeout(()=>w(!1),300);return B(r),()=>clearTimeout(Z)}},[r,O,f]);const X=["sudoku-cell",s?"sudoku-cell-selected":"",o&&!s?"sudoku-cell-highlight":"",u?"sudoku-cell-error":"",f?"sudoku-cell-preset":"sudoku-cell-input",g?"sudoku-cell-right-border":"",y?"sudoku-cell-bottom-border":"",T?"animate-solve":""].filter(Boolean).join(" ");return C.jsx("div",{className:X,onClick:m,"data-testid":`cell-${t}-${n}`,"aria-label":`Cell ${t+1},${n+1} ${r?`contains ${r}`:"is empty"}`,children:r||""})},Ud=()=>Array(9).fill(null).map(()=>Array(9).fill(null)),gn=r=>r.map(t=>[...t]),uS=r=>{for(let t=0;t<9;t++)for(let n=0;n<9;n++)if(r[t][n]===null)return[t,n];return null},hm=(r,t,n,s)=>{for(let f=0;f<9;f++)if(r[t][f]===s)return!1;for(let f=0;f<9;f++)if(r[f][n]===s)return!1;const o=Math.floor(t/3)*3,u=Math.floor(n/3)*3;for(let f=0;f<3;f++)for(let m=0;m<3;m++)if(r[o+f][u+m]===s)return!1;return!0},kl=r=>{const t=uS(r);if(!t)return!0;const[n,s]=t;for(let o=1;o<=9;o++)if(hm(r,n,s,o)){if(r[n][s]=o,kl(r))return!0;r[n][s]=null}return!1},cS=r=>{const t=[];for(let n=0;n<9;n++)for(let s=0;s<9;s++){const o=r[n][s];if(o===null)continue;r[n][s]=null;const u=hm(r,n,s,o);r[n][s]=o,u||t.push([n,s])}return t},hS=(r,t)=>{const n=[];for(let u=0;u<9;u++)u!==t&&n.push([r,u]);for(let u=0;u<9;u++)u!==r&&n.push([u,t]);const s=Math.floor(r/3)*3,o=Math.floor(t/3)*3;for(let u=0;u<3;u++)for(let f=0;f<3;f++){const m=s+u,g=o+f;(m!==r||g!==t)&&n.push([m,g])}return n},fS=r=>{const t=Ud();kl(t);const n=gn(t),s={easy:40,medium:50,hard:55,expert:60},o=[];for(let m=0;m<9;m++)for(let g=0;g<9;g++)o.push([m,g]);for(let m=o.length-1;m>0;m--){const g=Math.floor(Math.random()*(m+1));[o[m],o[g]]=[o[g],o[m]]}const u=s[r];let f=0;for(let m=0;m<o.length&&f<u;m++){const[g,y]=o[m],T=n[g][y];n[g][y]=null;const w=gn(n);dS(w)?f++:n[g][y]=T}return n},dS=r=>{const t=[];for(let u=0;u<9;u++)for(let f=0;f<9;f++)r[u][f]===null&&t.push([u,f]);if(t.length===0)return!0;const[n,s]=t[0];let o=0;for(let u=1;u<=9&&o<2;u++)hm(r,n,s,u)&&(r[n][s]=u,kl(gn(r))&&o++,r[n][s]=null);return o===1},mS=r=>{const t=gn(r);if(!kl(t))return null;for(let n=0;n<9;n++)for(let s=0;s<9;s++)if(r[n][s]===null)return[n,s,t[n][s]];return null},xc={easy:[[5,3,null,null,7,null,null,null,null],[6,null,null,1,9,5,null,null,null],[null,9,8,null,null,null,null,6,null],[8,null,null,null,6,null,null,null,3],[4,null,null,8,null,3,null,null,1],[7,null,null,null,2,null,null,null,6],[null,6,null,null,null,null,2,8,null],[null,null,null,4,1,9,null,null,5],[null,null,null,null,8,null,null,7,9]],medium:[[null,null,null,2,6,null,7,null,1],[6,8,null,null,7,null,null,9,null],[1,9,null,null,null,4,5,null,null],[8,2,null,1,null,null,null,4,null],[null,null,4,6,null,2,9,null,null],[null,5,null,null,null,3,null,2,8],[null,null,9,3,null,null,null,7,4],[null,4,null,null,5,null,null,3,6],[7,null,3,null,1,8,null,null,null]],hard:[[null,null,null,6,null,null,4,null,null],[7,null,null,null,null,3,6,null,null],[null,null,null,null,9,1,null,8,null],[null,null,null,null,null,null,null,null,null],[null,5,null,1,8,null,null,null,3],[null,null,null,3,null,6,null,4,5],[null,4,null,2,null,null,null,6,null],[9,null,3,null,null,null,null,null,null],[null,2,null,null,null,null,1,null,null]],expert:[[null,2,null,null,null,null,null,null,null],[null,null,null,6,null,null,null,null,3],[null,7,4,null,8,null,null,null,null],[null,null,null,null,null,3,null,null,2],[null,8,null,null,4,null,null,1,null],[6,null,null,5,null,null,null,null,null],[null,null,null,null,1,null,7,8,null],[5,null,null,null,null,9,null,null,null],[null,null,null,null,null,null,null,4,null]]};Object.keys(xc).forEach(r=>{const t=xc[r];for(let n=0;n<9;n++)for(let s=0;s<9;s++)t[n][s]===0&&(t[n][s]=null)});const pS=({grid:r,presetCells:t,conflicts:n,selectedCell:s,onCellClick:o})=>{const u=s?hS(s[0],s[1]):[],f=new Set(n.map(([g,y])=>`${g}-${y}`)),m=new Set(u.map(([g,y])=>`${g}-${y}`));return C.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none"},children:C.jsx("div",{className:"sudoku-board","data-testid":"sudoku-board",children:r.map((g,y)=>C.jsx(tS.Fragment,{children:g.map((T,w)=>{const O=s!==null&&s[0]===y&&s[1]===w,B=m.has(`${y}-${w}`),X=f.has(`${y}-${w}`),Z=t[y][w];return C.jsx(lS,{value:T,row:y,col:w,isSelected:O,isHighlighted:B,isConflict:X,isPreset:Z,onClick:()=>o(y,w)},`cell-${y}-${w}`)})},`row-${y}`))})})},gS=({onNumberClick:r,disabled:t})=>{const n=[1,2,3,4,5,6,7,8,9];return C.jsxs("div",{className:"app-card","data-testid":"number-pad-container",children:[C.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.75rem",color:"var(--color-gray-700)"},children:"Enter Number"}),C.jsxs("div",{className:"number-pad","data-testid":"number-pad",children:[n.map(s=>C.jsx("button",{className:"number-pad-button",onClick:()=>r(s),disabled:t,"aria-label":`Number ${s}`,"data-testid":`num-button-${s}`,children:s},`num-${s}`)),C.jsx("button",{className:"number-pad-button",style:{backgroundColor:"var(--color-gray-200)"},onClick:()=>r(null),disabled:t,"aria-label":"Clear cell","data-testid":"erase-button",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"1.5rem",height:"1.5rem",margin:"0 auto"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{style:{marginTop:"0.75rem",height:"1.5rem"},children:[t&&C.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-gray-500)",textAlign:"center"},children:"This cell cannot be modified"}),!t&&C.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-primary)",textAlign:"center"},children:"Select a number to place in the highlighted cell"})]})]})},yS=({onNewGame:r,onSolve:t,onHint:n,onReset:s,onDifficultyChange:o,currentDifficulty:u,isSolved:f,isLoading:m})=>C.jsxs("div",{className:"app-card",children:[C.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"1rem",color:"var(--color-gray-700)"},children:"Game Controls"}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[C.jsxs("button",{className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onClick:r,disabled:m,"data-testid":"new-game-button",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"1.25rem",height:"1.25rem"},viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"New Game"]}),C.jsxs("button",{className:"btn btn-secondary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onClick:t,disabled:f||m,"data-testid":"solve-button",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"1.25rem",height:"1.25rem"},viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Solve"]})]}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[C.jsxs("button",{className:"btn btn-outline",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onClick:n,disabled:f||m,"data-testid":"hint-button",children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"1.25rem",height:"1.25rem"},viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 010-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 010-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})}),"Hint"]}),C.jsxs("button",{className:"btn btn-outline",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onClick:s,disabled:m,"data-testid":"reset-button",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"1.25rem",height:"1.25rem"},viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1z",clipRule:"evenodd"}),C.jsx("path",{fillRule:"evenodd",d:"M3.008 11.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})]}),"Reset"]})]}),C.jsxs("div",{style:{marginTop:"0.75rem"},children:[C.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"var(--color-gray-700)",marginBottom:"0.5rem"},children:"Difficulty Level"}),C.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem"},children:["easy","medium","hard","expert"].map(g=>C.jsx("button",{className:u===g?"btn btn-primary":"btn btn-outline",style:{fontSize:"0.875rem",textTransform:"capitalize",boxShadow:u===g?"0 1px 3px rgba(0,0,0,0.12)":"none"},onClick:()=>o(g),disabled:m,"data-testid":`difficulty-${g}`,children:g},g))})]})]}),m&&C.jsx("div",{style:{marginTop:"1rem",display:"flex",justifyContent:"center"},children:C.jsx("div",{className:"loading-spinner"})})]}),_S=({timeElapsed:r,movesCount:t,hintsUsed:n,isSolved:s})=>{const o=u=>{const f=Math.floor(u/60),m=u%60;return`${f.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`};return C.jsxs("div",{className:"app-card",children:[C.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.75rem",color:"var(--color-gray-700)"},children:"Game Stats"}),C.jsxs("div",{className:"stats-container",children:[C.jsxs("div",{className:"stat-item",style:{backgroundColor:"#eff6ff"},children:[C.jsx("span",{className:"stat-label",children:"Time"}),C.jsx("span",{className:"stat-value",style:{color:"#1d4ed8"},"data-testid":"time-display",children:o(r)})]}),C.jsxs("div",{className:"stat-item",style:{backgroundColor:"#faf5ff"},children:[C.jsx("span",{className:"stat-label",children:"Moves"}),C.jsx("span",{className:"stat-value",style:{color:"#7e22ce"},"data-testid":"moves-count",children:t})]}),C.jsxs("div",{className:"stat-item",style:{backgroundColor:"#f0fdfa"},children:[C.jsx("span",{className:"stat-label",children:"Hints"}),C.jsx("span",{className:"stat-value",style:{color:"#0f766e"},"data-testid":"hints-used",children:n})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-label",children:"Status"}),C.jsx("span",{className:s?"stat-badge stat-badge-success":"stat-badge stat-badge-info","data-testid":"game-status",children:s?"Solved!":"Playing"})]})]})]})},vS=()=>{};var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},ES=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Yv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,T=u>>2,w=(u&3)<<4|m>>4;let O=(m&15)<<2|y>>6,B=y&63;g||(B=64,f||(O=64)),s.push(n[T],n[w],n[O],n[B])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(Qv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):ES(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||w==null)throw new TS;const O=u<<2|m>>4;if(s.push(O),y!==64){const B=m<<4&240|y>>2;if(s.push(B),w!==64){const X=y<<6&192|w;s.push(X)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AS=function(r){const t=Qv(r);return Yv.encodeByteArray(t,!0)},kc=function(r){return AS(r).replace(/\./g,"")},Xv=function(r){try{return Yv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=()=>SS().__FIREBASE_DEFAULTS__,wS=()=>{if(typeof process>"u"||typeof E_>"u")return;const r=E_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},RS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Xv(r[1]);return t&&JSON.parse(t)},th=()=>{try{return vS()||bS()||wS()||RS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$v=r=>{var t,n;return(n=(t=th())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[r]},IS=r=>{const t=$v(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Wv=()=>{var r;return(r=th())===null||r===void 0?void 0:r.config},Zv=r=>{var t;return(t=th())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[kc(JSON.stringify(n)),kc(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function OS(){var r;const t=(r=th())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function xS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kS(){const r=Xe();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function PS(){return!OS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function US(){try{return typeof indexedDB=="object"}catch{return!1}}function LS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="FirebaseError";class Xi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=jS,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?zS(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Xi(o,m,s)}}function zS(r,t){return r.replace(BS,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const BS=/\{\$([^}]+)}/g;function qS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Ps(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(T_(u)&&T_(f)){if(!Ps(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function T_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function ml(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function pl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function HS(r,t){const n=new GS(r,t);return n.subscribe.bind(n)}class GS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");FS(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=Rd),o.error===void 0&&(o.error=Rd),o.complete===void 0&&(o.complete=Rd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function Rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r){return r&&r._delegate?r._delegate:r}class Us{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new CS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YS(t))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=xs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xs){return this.instances.has(t)}getOptions(t=xs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(t,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:QS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=xs){return this.component?this.component.multipleInstances?t:xs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QS(r){return r===xs?void 0:r}function YS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new KS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const $S={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},WS=Ot.INFO,ZS={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},JS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=ZS[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fm{constructor(t){this.name=t,this._logLevel=WS,this._logHandler=JS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$S[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const tb=(r,t)=>t.some(n=>r instanceof n);let A_,S_;function eb(){return A_||(A_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nb(){return S_||(S_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jv=new WeakMap,Ld=new WeakMap,t0=new WeakMap,Id=new WeakMap,dm=new WeakMap;function ib(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(zr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&Jv.set(n,r)}).catch(()=>{}),dm.set(t,r),t}function rb(r){if(Ld.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Ld.set(r,t)}let jd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Ld.get(r);if(t==="objectStoreNames")return r.objectStoreNames||t0.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function sb(r){jd=r(jd)}function ab(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(Cd(this),t,...n);return t0.set(s,t.sort?t.sort():[t]),zr(s)}:nb().includes(r)?function(...t){return r.apply(Cd(this),t),zr(Jv.get(this))}:function(...t){return zr(r.apply(Cd(this),t))}}function ob(r){return typeof r=="function"?ab(r):(r instanceof IDBTransaction&&rb(r),tb(r,eb())?new Proxy(r,jd):r)}function zr(r){if(r instanceof IDBRequest)return ib(r);if(Id.has(r))return Id.get(r);const t=ob(r);return t!==r&&(Id.set(r,t),dm.set(t,r)),t}const Cd=r=>dm.get(r);function lb(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),m=zr(f);return s&&f.addEventListener("upgradeneeded",g=>{s(zr(f.result),g.oldVersion,g.newVersion,zr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const ub=["get","getKey","getAll","getAllKeys","count"],cb=["put","add","delete","clear"],Dd=new Map;function b_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Dd.get(t))return Dd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=cb.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||ub.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Dd.set(t,u),u}sb(r=>({...r,get:(t,n,s)=>b_(t,n)||r.get(t,n,s),has:(t,n)=>!!b_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fb(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fb(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const zd="@firebase/app",w_="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new fm("@firebase/app"),db="@firebase/app-compat",mb="@firebase/analytics-compat",pb="@firebase/analytics",gb="@firebase/app-check-compat",yb="@firebase/app-check",_b="@firebase/auth",vb="@firebase/auth-compat",Eb="@firebase/database",Tb="@firebase/data-connect",Ab="@firebase/database-compat",Sb="@firebase/functions",bb="@firebase/functions-compat",wb="@firebase/installations",Rb="@firebase/installations-compat",Ib="@firebase/messaging",Cb="@firebase/messaging-compat",Db="@firebase/performance",Nb="@firebase/performance-compat",Ob="@firebase/remote-config",Vb="@firebase/remote-config-compat",Mb="@firebase/storage",xb="@firebase/storage-compat",kb="@firebase/firestore",Pb="@firebase/vertexai",Ub="@firebase/firestore-compat",Lb="firebase",jb="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]",zb={[zd]:"fire-core",[db]:"fire-core-compat",[pb]:"fire-analytics",[mb]:"fire-analytics-compat",[yb]:"fire-app-check",[gb]:"fire-app-check-compat",[_b]:"fire-auth",[vb]:"fire-auth-compat",[Eb]:"fire-rtdb",[Tb]:"fire-data-connect",[Ab]:"fire-rtdb-compat",[Sb]:"fire-fn",[bb]:"fire-fn-compat",[wb]:"fire-iid",[Rb]:"fire-iid-compat",[Ib]:"fire-fcm",[Cb]:"fire-fcm-compat",[Db]:"fire-perf",[Nb]:"fire-perf-compat",[Ob]:"fire-rc",[Vb]:"fire-rc-compat",[Mb]:"fire-gcs",[xb]:"fire-gcs-compat",[kb]:"fire-fst",[Ub]:"fire-fst-compat",[Pb]:"fire-vertex","fire-js":"fire-js",[Lb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,Bb=new Map,qd=new Map;function R_(r,t){try{r.container.addComponent(t)}catch(n){Fi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ga(r){const t=r.name;if(qd.has(t))return Fi.debug(`There were multiple attempts to register component ${t}.`),!1;qd.set(t,r);for(const n of Pc.values())R_(n,r);for(const n of Bb.values())R_(n,r);return!0}function mm(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function kn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Pl("app","Firebase",qb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=jb;function e0(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Bd,automaticDataCollectionEnabled:!1},t),o=s.name;if(typeof o!="string"||!o)throw Br.create("bad-app-name",{appName:String(o)});if(n||(n=Wv()),!n)throw Br.create("no-options");const u=Pc.get(o);if(u){if(Ps(n,u.options)&&Ps(s,u.config))return u;throw Br.create("duplicate-app",{appName:o})}const f=new XS(o);for(const g of qd.values())f.addComponent(g);const m=new Hb(n,s,f);return Pc.set(o,m),m}function n0(r=Bd){const t=Pc.get(r);if(!t&&r===Bd&&Wv())return e0();if(!t)throw Br.create("no-app",{appName:r});return t}function qr(r,t,n){var s;let o=(s=zb[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Fi.warn(m.join(" "));return}Ga(new Us(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firebase-heartbeat-database",Fb=1,Rl="firebase-heartbeat-store";let Nd=null;function i0(){return Nd||(Nd=lb(Gb,Fb,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Br.create("idb-open",{originalErrorMessage:r.message})})),Nd}async function Kb(r){try{const n=(await i0()).transaction(Rl),s=await n.objectStore(Rl).get(r0(r));return await n.done,s}catch(t){if(t instanceof Xi)Fi.warn(t.message);else{const n=Br.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Fi.warn(n.message)}}}async function I_(r,t){try{const s=(await i0()).transaction(Rl,"readwrite");await s.objectStore(Rl).put(t,r0(r)),await s.done}catch(n){if(n instanceof Xi)Fi.warn(n.message);else{const s=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(s.message)}}}function r0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1024,Yb=30;class Xb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wb(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=C_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Yb){const f=Zb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C_(),{heartbeatsToSend:s,unsentEntries:o}=$b(this._heartbeatsCache.heartbeats),u=kc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Fi.warn(n),""}}}function C_(){return new Date().toISOString().substring(0,10)}function $b(r,t=Qb){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),D_(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),D_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Wb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return US()?LS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Kb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return I_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return I_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function D_(r){return kc(JSON.stringify({version:2,heartbeats:r})).length}function Zb(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(r){Ga(new Us("platform-logger",t=>new hb(t),"PRIVATE")),Ga(new Us("heartbeat",t=>new Xb(t),"PRIVATE")),qr(zd,w_,r),qr(zd,w_,"esm2017"),qr("fire-js","")}Jb("");function pm(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function s0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tw=s0,a0=new Pl("auth","Firebase",s0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new fm("@firebase/auth");function ew(r,...t){Uc.logLevel<=Ot.WARN&&Uc.warn(`Auth (${Ja}): ${r}`,...t)}function bc(r,...t){Uc.logLevel<=Ot.ERROR&&Uc.error(`Auth (${Ja}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(r,...t){throw gm(r,...t)}function oi(r,...t){return gm(r,...t)}function o0(r,t,n){const s=Object.assign(Object.assign({},tw()),{[t]:n});return new Pl("auth","Firebase",s).create(t,{appName:r.name})}function Hi(r){return o0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gm(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return a0.create(r,...t)}function vt(r,t,...n){if(!r)throw gm(t,...n)}function zi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw bc(t),new Error(t)}function Ki(r,t){r||zi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function nw(){return N_()==="http:"||N_()==="https:"}function N_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nw()||MS()||"connection"in navigator)?navigator.onLine:!0}function rw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ki(n>t,"Short delay should be less than long delay!"),this.isMobile=NS()||xS()}get(){return iw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(r,t){Ki(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Ll(3e4,6e4);function Zr(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function $i(r,t,n,s,o={}){return u0(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const m=Ul(Object.assign({key:r.config.apiKey},f)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:t,headers:g},u);return VS()||(y.referrerPolicy="no-referrer"),l0.fetch()(c0(r,r.config.apiHost,n,m),y)})}async function u0(r,t,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},sw),t);try{const o=new lw(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw yc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw yc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw yc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw yc(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw o0(r,T,y);qn(r,T)}}catch(o){if(o instanceof Xi)throw o;qn(r,"network-request-failed",{message:String(o)})}}async function jl(r,t,n,s,o={}){const u=await $i(r,t,n,s,o);return"mfaPendingCredential"in u&&qn(r,"multi-factor-auth-required",{_serverResponse:u}),u}function c0(r,t,n,s){const o=`${t}${n}?${s}`;return r.config.emulator?ym(r.config,o):`${r.config.apiScheme}://${o}`}function ow(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),aw.get())})}}function yc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=oi(r,t,s);return o.customData._tokenResponse=n,o}function O_(r){return r!==void 0&&r.enterprise!==void 0}class uw{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return ow(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cw(r,t){return $i(r,"GET","/v2/recaptchaConfig",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(r,t){return $i(r,"POST","/v1/accounts:delete",t)}async function h0(r,t){return $i(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fw(r,t=!1){const n=Ie(r),s=await n.getIdToken(t),o=_m(s);vt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:El(Od(o.auth_time)),issuedAtTime:El(Od(o.iat)),expirationTime:El(Od(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Od(r){return Number(r)*1e3}function _m(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Xv(n);return o?JSON.parse(o):(bc("Failed to decode base64 JWT payload"),null)}catch(o){return bc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function V_(r){const t=_m(r);return vt(t,"internal-error"),vt(typeof t.exp<"u","internal-error"),vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Xi&&dw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function dw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=El(this.lastLoginAt),this.creationTime=El(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r){var t;const n=r.auth,s=await r.getIdToken(),o=await Fa(r,h0(n,{idToken:s}));vt(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?f0(u.providerUserInfo):[],m=gw(r.providerData,f),g=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),T=g?y:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Gd(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(r,w)}async function pw(r){const t=Ie(r);await Lc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function gw(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function f0(r){return r.map(t=>{var{providerId:n}=t,s=pm(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(r,t){const n=await u0(r,{},async()=>{const s=Ul({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=c0(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",l0.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _w(r,t){return $i(r,"POST","/v2/accounts:revokeToken",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vt(t.idToken,"internal-error"),vt(typeof t.idToken<"u","internal-error"),vt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):V_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){vt(t.length!==0,"internal-error");const n=V_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await yw(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new za;return s&&(vt(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(vt(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(vt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(r,t){vt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Bi{constructor(t){var{uid:n,auth:s,stsTokenManager:o}=t,u=pm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Gd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const n=await Fa(this,this.stsTokenManager.getToken(this.auth,t));return vt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return fw(this,t)}reload(){return pw(this)}_assign(t){this!==t&&(vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Bi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Lc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Hi(this.auth));const t=await this.getIdToken();return await Fa(this,hw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,o,u,f,m,g,y,T;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,O=(o=n.email)!==null&&o!==void 0?o:void 0,B=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,X=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Z=(m=n.tenantId)!==null&&m!==void 0?m:void 0,F=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,dt=(y=n.createdAt)!==null&&y!==void 0?y:void 0,mt=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:Tt,emailVerified:kt,isAnonymous:_t,providerData:Rt,stsTokenManager:x}=n;vt(Tt&&x,t,"internal-error");const R=za.fromJSON(this.name,x);vt(typeof Tt=="string",t,"internal-error"),xr(w,t.name),xr(O,t.name),vt(typeof kt=="boolean",t,"internal-error"),vt(typeof _t=="boolean",t,"internal-error"),xr(B,t.name),xr(X,t.name),xr(Z,t.name),xr(F,t.name),xr(dt,t.name),xr(mt,t.name);const S=new Bi({uid:Tt,auth:t,email:O,emailVerified:kt,displayName:w,isAnonymous:_t,photoURL:X,phoneNumber:B,tenantId:Z,stsTokenManager:R,createdAt:dt,lastLoginAt:mt});return Rt&&Array.isArray(Rt)&&(S.providerData=Rt.map(D=>Object.assign({},D))),F&&(S._redirectEventId=F),S}static async _fromIdTokenResponse(t,n,s=!1){const o=new za;o.updateFromServerResponse(n);const u=new Bi({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await Lc(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];vt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?f0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new za;m.updateFromIdToken(s);const g=new Bi({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function qi(r){Ki(r instanceof Function,"Expected a class definition");let t=M_.get(r);return t?(Ki(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,M_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}d0.type="NONE";const x_=d0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(r,t,n){return`firebase:${r}:${t}:${n}`}class Ba{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=wc(this.userKey,o.apiKey,u),this.fullPersistenceKey=wc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Bi._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ba(qi(x_),t,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||qi(x_);const f=wc(s,t.config.apiKey,t.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){const w=Bi._fromJSON(t,T);y!==u&&(m=w),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ba(u,t,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Ba(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(y0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(m0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(v0(t))return"Blackberry";if(E0(t))return"Webos";if(p0(t))return"Safari";if((t.includes("chrome/")||g0(t))&&!t.includes("edge/"))return"Chrome";if(_0(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function m0(r=Xe()){return/firefox\//i.test(r)}function p0(r=Xe()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function g0(r=Xe()){return/crios\//i.test(r)}function y0(r=Xe()){return/iemobile/i.test(r)}function _0(r=Xe()){return/android/i.test(r)}function v0(r=Xe()){return/blackberry/i.test(r)}function E0(r=Xe()){return/webos/i.test(r)}function vm(r=Xe()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function vw(r=Xe()){var t;return vm(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Ew(){return kS()&&document.documentMode===10}function T0(r=Xe()){return vm(r)||_0(r)||E0(r)||v0(r)||/windows phone/i.test(r)||y0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(r,t=[]){let n;switch(r){case"Browser":n=k_(Xe());break;case"Worker":n=`${k_(Xe())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(r,t={}){return $i(r,"GET","/v2/passwordPolicy",Zr(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=6;class bw{constructor(t){var n,s,o,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:Sw,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,o,u,f,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P_(this),this.idTokenSubscription=new P_(this),this.beforeStateQueue=new Tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await h0(this,{idToken:t}),s=await Bi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(kn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(t);(!f||f===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Lc(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=rw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kn(this.app))return Promise.reject(Hi(this));const n=t?Ie(t):null;return n&&vt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kn(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Aw(this),n=new bw(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Pl("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await _w(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&qi(t)||this._popupRedirectResolver;vt(n,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=t.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=A0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var t;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&ew(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qs(r){return Ie(r)}class P_{constructor(t){this.auth=t,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rw(r){eh=r}function S0(r){return eh.loadJS(r)}function Iw(){return eh.recaptchaEnterpriseScript}function Cw(){return eh.gapiScript}function Dw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Nw{constructor(){this.enterprise=new Ow}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Ow{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Vw="recaptcha-enterprise",b0="NO_RECAPTCHA";class Mw{constructor(t){this.type=Vw,this.auth=qs(t)}async verify(t="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{cw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new uw(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;O_(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(y=>{f(y)}).catch(()=>{f(b0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nw().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&O_(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Iw();g.length!==0&&(g+=m),S0(g).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function U_(r,t,n,s=!1,o=!1){const u=new Mw(r);let f;if(o)f=b0;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Fd(r,t,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await U_(r,t,n,n==="getOobCode");return s(r,f)}else return s(r,t).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await U_(r,t,n,n==="getOobCode");return s(r,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r,t){const n=mm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ps(u,t??{}))return o;qn(o,"already-initialized")}return n.initialize({options:t})}function kw(r,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(qi);t!=null&&t.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function Pw(r,t,n){const s=qs(r);vt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=w0(t),{host:f,port:m}=Uw(t),g=m===null?"":`:${m}`,y={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){vt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),vt(Ps(y,s.config.emulator)&&Ps(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Lw()}function w0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Uw(r){const t=w0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:L_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:L_(f)}}}function L_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Lw(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zi("not implemented")}_getIdTokenResponse(t){return zi("not implemented")}_linkToIdToken(t,n){return zi("not implemented")}_getReauthenticationResolver(t){return zi("not implemented")}}async function jw(r,t){return $i(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zw(r,t){return jl(r,"POST","/v1/accounts:signInWithPassword",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(r,t){return jl(r,"POST","/v1/accounts:signInWithEmailLink",Zr(r,t))}async function qw(r,t){return jl(r,"POST","/v1/accounts:signInWithEmailLink",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Em{constructor(t,n,s,o=null){super("password",s),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Il(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Il(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(t,n,"signInWithPassword",zw);case"emailLink":return Bw(t,{email:this._email,oobCode:this._password});default:qn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(t,s,"signUpPassword",jw);case"emailLink":return qw(t,{idToken:n,email:this._email,oobCode:this._password});default:qn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(r,t){return jl(r,"POST","/v1/accounts:signInWithIdp",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="http://localhost";class Ls extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ls(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o}=n,u=pm(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new Ls(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return qa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,qa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qa(t,n)}buildRequest(){const t={requestUri:Hw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ul(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fw(r){const t=ml(pl(r)).link,n=t?ml(pl(t)).deep_link_id:null,s=ml(pl(r)).deep_link_id;return(s?ml(pl(s)).link:null)||s||n||t||r}class Tm{constructor(t){var n,s,o,u,f,m;const g=ml(pl(t)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,T=(s=g.oobCode)!==null&&s!==void 0?s:null,w=Gw((o=g.mode)!==null&&o!==void 0?o:null);vt(y&&T&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=T,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=g.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(t){const n=Fw(t);try{return new Tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(t,n){return Il._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Tm.parseLink(n);return vt(s,"argument-error"),Il._fromEmailAndCode(t,s.code,s.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends R0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends zl{constructor(){super("facebook.com")}static credential(t){return Ls._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch{return null}}}kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";kr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends zl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Pr.credential(n,s)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends zl{constructor(){super("github.com")}static credential(t){return Ls._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ur.credential(t.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends zl{constructor(){super("twitter.com")}static credential(t,n){return Ls._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Lr.credentialFromTaggedObject(t)}static credentialFromError(t){return Lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Lr.credential(n,s)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(r,t){return jl(r,"POST","/v1/accounts:signUp",Zr(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Bi._fromIdTokenResponse(t,s,o),f=j_(s);return new js({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=j_(s);return new js({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function j_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Xi{constructor(t,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,jc.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new jc(t,n,s,o)}}function I0(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?jc._fromErrorAndOperation(r,u,t,s):u})}async function Qw(r,t,n=!1){const s=await Fa(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return js._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(r,t,n=!1){const{auth:s}=r;if(kn(s.app))return Promise.reject(Hi(s));const o="reauthenticate";try{const u=await Fa(r,I0(s,o,t,r),n);vt(u.idToken,s,"internal-error");const f=_m(u.idToken);vt(f,s,"internal-error");const{sub:m}=f;return vt(r.uid===m,s,"user-mismatch"),js._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&qn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C0(r,t,n=!1){if(kn(r.app))return Promise.reject(Hi(r));const s="signIn",o=await I0(r,s,t),u=await js._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function Xw(r,t){return C0(qs(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D0(r){const t=qs(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function $w(r,t,n){if(kn(r.app))return Promise.reject(Hi(r));const s=qs(r),f=await Fd(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Kw).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&D0(r),g}),m=await js._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function Ww(r,t,n){return kn(r.app)?Promise.reject(Hi(r)):Xw(Ie(r),to.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&D0(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(r,t){return $i(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(r,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const s=Ie(r),u={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await Fa(s,Zw(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function t1(r,t,n,s){return Ie(r).onIdTokenChanged(t,n,s)}function e1(r,t,n){return Ie(r).beforeAuthStateChanged(t,n)}function n1(r,t,n,s){return Ie(r).onAuthStateChanged(t,n,s)}function i1(r){return Ie(r).signOut()}const zc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=1e3,s1=10;class O0 extends N0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Ew()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,s1):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},r1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}O0.type="LOCAL";const a1=O0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends N0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}V0.type="SESSION";const M0=V0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new nh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),g=await o1(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=Am("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(w){const O=w;if(O.data.eventId===y)switch(O.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(O.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function u1(r){li().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function c1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function f1(){return x0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebaseLocalStorageDb",d1=1,Bc="firebaseLocalStorage",P0="fbase_key";class Bl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ih(r,t){return r.transaction([Bc],t?"readwrite":"readonly").objectStore(Bc)}function m1(){const r=indexedDB.deleteDatabase(k0);return new Bl(r).toPromise()}function Kd(){const r=indexedDB.open(k0,d1);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Bc,{keyPath:P0})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Bc)?t(s):(s.close(),await m1(),t(await Kd()))})})}async function z_(r,t,n){const s=ih(r,!0).put({[P0]:t,value:n});return new Bl(s).toPromise()}async function p1(r,t){const n=ih(r,!1).get(t),s=await new Bl(n).toPromise();return s===void 0?null:s.value}function B_(r,t){const n=ih(r,!0).delete(t);return new Bl(n).toPromise()}const g1=800,y1=3;class U0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>y1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(f1()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await c1(),!this.activeServiceWorker)return;this.sender=new l1(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||h1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Kd();return await z_(t,zc,"1"),await B_(t,zc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>z_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>p1(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>B_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=ih(o,!1).getAll();return new Bl(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U0.type="LOCAL";const _1=U0;new Ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(r,t){return t?qi(t):(vt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Em{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function E1(r){return C0(r.auth,new Sm(r),r.bypassAuthState)}function T1(r){const{auth:t,user:n}=r;return vt(n,t,"internal-error"),Yw(n,new Sm(r),r.bypassAuthState)}async function A1(r){const{auth:t,user:n}=r;return vt(n,t,"internal-error"),Qw(n,new Sm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return E1;case"linkViaPopup":case"linkViaRedirect":return A1;case"reauthViaPopup":case"reauthViaRedirect":return T1;default:qn(this.auth,"internal-error")}}resolve(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=new Ll(2e3,1e4);class ja extends L0{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vt(t,this.auth,"internal-error"),t}async onExecution(){Ki(this.filter.length===1,"Popup operations only handle one event");const t=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,S1.get())};t()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="pendingRedirect",Rc=new Map;class w1 extends L0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Rc.get(this.auth._key());if(!t){try{const s=await R1(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Rc.set(this.auth._key(),t)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R1(r,t){const n=D1(t),s=C1(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function I1(r,t){Rc.set(r._key(),t)}function C1(r){return qi(r._redirectPersistence)}function D1(r){return wc(b1,r.config.apiKey,r.name)}async function N1(r,t,n=!1){if(kn(r.app))return Promise.reject(Hi(r));const s=qs(r),o=v1(s,t),f=await new w1(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=10*60*1e3;class V1{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!M1(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!j0(t)){const o=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=O1&&this.cachedEventUids.clear(),this.cachedEventUids.has(q_(t))}saveEventToCache(t){this.cachedEventUids.add(q_(t)),this.lastProcessedEventTime=Date.now()}}function q_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function j0({type:r,error:t}){return r==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function M1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(r,t={}){return $i(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P1=/^https?/;async function U1(r){if(r.config.emulator)return;const{authorizedDomains:t}=await x1(r);for(const n of t)try{if(L1(n))return}catch{}qn(r,"unauthorized-domain")}function L1(r){const t=Hd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!P1.test(n))return!1;if(k1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Ll(3e4,6e4);function H_(){const r=li().___jsl;if(r!=null&&r.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function z1(r){return new Promise((t,n)=>{var s,o,u;function f(){H_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{H_(),n(oi(r,"network-request-failed"))},timeout:j1.get()})}if(!((o=(s=li().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((u=li().gapi)===null||u===void 0)&&u.load)f();else{const m=Dw("iframefcb");return li()[m]=()=>{gapi.load?f():n(oi(r,"network-request-failed"))},S0(`${Cw()}?onload=${m}`).catch(g=>n(g))}}).catch(t=>{throw Ic=null,t})}let Ic=null;function B1(r){return Ic=Ic||z1(r),Ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Ll(5e3,15e3),H1="__/auth/iframe",G1="emulator/auth/iframe",F1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q1(r){const t=r.config;vt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?ym(t,G1):`https://${r.config.authDomain}/${H1}`,s={apiKey:t.apiKey,appName:r.name,v:Ja},o=K1.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Ul(s).slice(1)}`}async function Y1(r){const t=await B1(r),n=li().gapi;return vt(n,r,"internal-error"),t.open({where:document.body,url:Q1(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F1,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=oi(r,"network-request-failed"),m=li().setTimeout(()=>{u(f)},q1.get());function g(){li().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$1=500,W1=600,Z1="_blank",J1="http://localhost";class G_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tR(r,t,n,s=$1,o=W1){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g=Object.assign(Object.assign({},X1),{width:s.toString(),height:o.toString(),top:u,left:f}),y=Xe().toLowerCase();n&&(m=g0(y)?Z1:n),m0(y)&&(t=t||J1,g.scrollbars="yes");const T=Object.entries(g).reduce((O,[B,X])=>`${O}${B}=${X},`,"");if(vw(y)&&m!=="_self")return eR(t||"",m),new G_(null);const w=window.open(t||"",m,T);vt(w,r,"popup-blocked");try{w.focus()}catch{}return new G_(w)}function eR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",iR="emulator/auth/handler",rR=encodeURIComponent("fac");async function F_(r,t,n,s,o,u){vt(r.config.authDomain,r,"auth-domain-config-required"),vt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ja,eventId:o};if(t instanceof R0){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",qS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(t instanceof zl){const T=t.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await r._getAppCheckToken(),y=g?`#${rR}=${encodeURIComponent(g)}`:"";return`${sR(r)}?${Ul(m).slice(1)}${y}`}function sR({config:r}){return r.emulator?ym(r,iR):`https://${r.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class aR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M0,this._completeRedirectFn=N1,this._overrideRedirectResult=I1}async _openPopup(t,n,s,o){var u;Ki((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await F_(t,n,s,Hd(),o);return tR(t,f,Am())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await F_(t,n,s,Hd(),o);return u1(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ki(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await Y1(t),s=new V1(t);return n.register("authEvent",o=>(vt(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Vd,{type:Vd},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Vd];f!==void 0&&n(!!f),qn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=U1(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return T0()||p0()||vm()}}const oR=aR;var K_="@firebase/auth",Q_="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(r){Ga(new Us("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;vt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A0(r)},y=new ww(s,o,u,g);return kw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Ga(new Us("auth-internal",t=>{const n=qs(t.getProvider("auth").getImmediate());return(s=>new lR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(K_,Q_,uR(r)),qr(K_,Q_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=5*60,fR=Zv("authIdTokenMaxAge")||hR;let Y_=null;const dR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fR)return;const o=n==null?void 0:n.token;Y_!==o&&(Y_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mR(r=n0()){const t=mm(r,"auth");if(t.isInitialized())return t.getImmediate();const n=xw(r,{popupRedirectResolver:oR,persistence:[_1,a1,M0]}),s=Zv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=dR(u.toString());e1(n,f,()=>f(n.currentUser)),t1(n,m=>f(m))}}const o=$v("auth");return o&&Pw(n,`http://${o}`),n}function pR(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}Rw({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=oi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",pR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");var gR="firebase",yR="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(gR,yR,"app");var X_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,z0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,R){function S(){}S.prototype=R.prototype,x.D=R.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(D,M,U){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return R.prototype[M].apply(D,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,S){S||(S=0);var D=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)D[M]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(M=0;16>M;++M)D[M]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=x.g[0],S=x.g[1],M=x.g[2];var U=x.g[3],I=R+(U^S&(M^U))+D[0]+3614090360&4294967295;R=S+(I<<7&4294967295|I>>>25),I=U+(M^R&(S^M))+D[1]+3905402710&4294967295,U=R+(I<<12&4294967295|I>>>20),I=M+(S^U&(R^S))+D[2]+606105819&4294967295,M=U+(I<<17&4294967295|I>>>15),I=S+(R^M&(U^R))+D[3]+3250441966&4294967295,S=M+(I<<22&4294967295|I>>>10),I=R+(U^S&(M^U))+D[4]+4118548399&4294967295,R=S+(I<<7&4294967295|I>>>25),I=U+(M^R&(S^M))+D[5]+1200080426&4294967295,U=R+(I<<12&4294967295|I>>>20),I=M+(S^U&(R^S))+D[6]+2821735955&4294967295,M=U+(I<<17&4294967295|I>>>15),I=S+(R^M&(U^R))+D[7]+4249261313&4294967295,S=M+(I<<22&4294967295|I>>>10),I=R+(U^S&(M^U))+D[8]+1770035416&4294967295,R=S+(I<<7&4294967295|I>>>25),I=U+(M^R&(S^M))+D[9]+2336552879&4294967295,U=R+(I<<12&4294967295|I>>>20),I=M+(S^U&(R^S))+D[10]+4294925233&4294967295,M=U+(I<<17&4294967295|I>>>15),I=S+(R^M&(U^R))+D[11]+2304563134&4294967295,S=M+(I<<22&4294967295|I>>>10),I=R+(U^S&(M^U))+D[12]+1804603682&4294967295,R=S+(I<<7&4294967295|I>>>25),I=U+(M^R&(S^M))+D[13]+4254626195&4294967295,U=R+(I<<12&4294967295|I>>>20),I=M+(S^U&(R^S))+D[14]+2792965006&4294967295,M=U+(I<<17&4294967295|I>>>15),I=S+(R^M&(U^R))+D[15]+1236535329&4294967295,S=M+(I<<22&4294967295|I>>>10),I=R+(M^U&(S^M))+D[1]+4129170786&4294967295,R=S+(I<<5&4294967295|I>>>27),I=U+(S^M&(R^S))+D[6]+3225465664&4294967295,U=R+(I<<9&4294967295|I>>>23),I=M+(R^S&(U^R))+D[11]+643717713&4294967295,M=U+(I<<14&4294967295|I>>>18),I=S+(U^R&(M^U))+D[0]+3921069994&4294967295,S=M+(I<<20&4294967295|I>>>12),I=R+(M^U&(S^M))+D[5]+3593408605&4294967295,R=S+(I<<5&4294967295|I>>>27),I=U+(S^M&(R^S))+D[10]+38016083&4294967295,U=R+(I<<9&4294967295|I>>>23),I=M+(R^S&(U^R))+D[15]+3634488961&4294967295,M=U+(I<<14&4294967295|I>>>18),I=S+(U^R&(M^U))+D[4]+3889429448&4294967295,S=M+(I<<20&4294967295|I>>>12),I=R+(M^U&(S^M))+D[9]+568446438&4294967295,R=S+(I<<5&4294967295|I>>>27),I=U+(S^M&(R^S))+D[14]+3275163606&4294967295,U=R+(I<<9&4294967295|I>>>23),I=M+(R^S&(U^R))+D[3]+4107603335&4294967295,M=U+(I<<14&4294967295|I>>>18),I=S+(U^R&(M^U))+D[8]+1163531501&4294967295,S=M+(I<<20&4294967295|I>>>12),I=R+(M^U&(S^M))+D[13]+2850285829&4294967295,R=S+(I<<5&4294967295|I>>>27),I=U+(S^M&(R^S))+D[2]+4243563512&4294967295,U=R+(I<<9&4294967295|I>>>23),I=M+(R^S&(U^R))+D[7]+1735328473&4294967295,M=U+(I<<14&4294967295|I>>>18),I=S+(U^R&(M^U))+D[12]+2368359562&4294967295,S=M+(I<<20&4294967295|I>>>12),I=R+(S^M^U)+D[5]+4294588738&4294967295,R=S+(I<<4&4294967295|I>>>28),I=U+(R^S^M)+D[8]+2272392833&4294967295,U=R+(I<<11&4294967295|I>>>21),I=M+(U^R^S)+D[11]+1839030562&4294967295,M=U+(I<<16&4294967295|I>>>16),I=S+(M^U^R)+D[14]+4259657740&4294967295,S=M+(I<<23&4294967295|I>>>9),I=R+(S^M^U)+D[1]+2763975236&4294967295,R=S+(I<<4&4294967295|I>>>28),I=U+(R^S^M)+D[4]+1272893353&4294967295,U=R+(I<<11&4294967295|I>>>21),I=M+(U^R^S)+D[7]+4139469664&4294967295,M=U+(I<<16&4294967295|I>>>16),I=S+(M^U^R)+D[10]+3200236656&4294967295,S=M+(I<<23&4294967295|I>>>9),I=R+(S^M^U)+D[13]+681279174&4294967295,R=S+(I<<4&4294967295|I>>>28),I=U+(R^S^M)+D[0]+3936430074&4294967295,U=R+(I<<11&4294967295|I>>>21),I=M+(U^R^S)+D[3]+3572445317&4294967295,M=U+(I<<16&4294967295|I>>>16),I=S+(M^U^R)+D[6]+76029189&4294967295,S=M+(I<<23&4294967295|I>>>9),I=R+(S^M^U)+D[9]+3654602809&4294967295,R=S+(I<<4&4294967295|I>>>28),I=U+(R^S^M)+D[12]+3873151461&4294967295,U=R+(I<<11&4294967295|I>>>21),I=M+(U^R^S)+D[15]+530742520&4294967295,M=U+(I<<16&4294967295|I>>>16),I=S+(M^U^R)+D[2]+3299628645&4294967295,S=M+(I<<23&4294967295|I>>>9),I=R+(M^(S|~U))+D[0]+4096336452&4294967295,R=S+(I<<6&4294967295|I>>>26),I=U+(S^(R|~M))+D[7]+1126891415&4294967295,U=R+(I<<10&4294967295|I>>>22),I=M+(R^(U|~S))+D[14]+2878612391&4294967295,M=U+(I<<15&4294967295|I>>>17),I=S+(U^(M|~R))+D[5]+4237533241&4294967295,S=M+(I<<21&4294967295|I>>>11),I=R+(M^(S|~U))+D[12]+1700485571&4294967295,R=S+(I<<6&4294967295|I>>>26),I=U+(S^(R|~M))+D[3]+2399980690&4294967295,U=R+(I<<10&4294967295|I>>>22),I=M+(R^(U|~S))+D[10]+4293915773&4294967295,M=U+(I<<15&4294967295|I>>>17),I=S+(U^(M|~R))+D[1]+2240044497&4294967295,S=M+(I<<21&4294967295|I>>>11),I=R+(M^(S|~U))+D[8]+1873313359&4294967295,R=S+(I<<6&4294967295|I>>>26),I=U+(S^(R|~M))+D[15]+4264355552&4294967295,U=R+(I<<10&4294967295|I>>>22),I=M+(R^(U|~S))+D[6]+2734768916&4294967295,M=U+(I<<15&4294967295|I>>>17),I=S+(U^(M|~R))+D[13]+1309151649&4294967295,S=M+(I<<21&4294967295|I>>>11),I=R+(M^(S|~U))+D[4]+4149444226&4294967295,R=S+(I<<6&4294967295|I>>>26),I=U+(S^(R|~M))+D[11]+3174756917&4294967295,U=R+(I<<10&4294967295|I>>>22),I=M+(R^(U|~S))+D[2]+718787259&4294967295,M=U+(I<<15&4294967295|I>>>17),I=S+(U^(M|~R))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+U&4294967295}s.prototype.u=function(x,R){R===void 0&&(R=x.length);for(var S=R-this.blockSize,D=this.B,M=this.h,U=0;U<R;){if(M==0)for(;U<=S;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<R;)if(D[M++]=x.charCodeAt(U++),M==this.blockSize){o(this,D),M=0;break}}else for(;U<R;)if(D[M++]=x[U++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=R},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;var S=8*this.o;for(R=x.length-8;R<x.length;++R)x[R]=S&255,S/=256;for(this.u(x),x=Array(16),R=S=0;4>R;++R)for(var D=0;32>D;D+=8)x[S++]=this.g[R]>>>D&255;return x};function u(x,R){var S=m;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=R(x)}function f(x,R){this.h=R;for(var S=[],D=!0,M=x.length-1;0<=M;M--){var U=x[M]|0;D&&U==R||(S[M]=U,D=!1)}this.g=S}var m={};function g(x){return-128<=x&&128>x?u(x,function(R){return new f([R|0],0>R?-1:0)}):new f([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return w;if(0>x)return F(y(-x));for(var R=[],S=1,D=0;x>=S;D++)R[D]=x/S|0,S*=4294967296;return new f(R,0)}function T(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return F(T(x.substring(1),R));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(R,8)),D=w,M=0;M<x.length;M+=8){var U=Math.min(8,x.length-M),I=parseInt(x.substring(M,M+U),R);8>U?(U=y(Math.pow(R,U)),D=D.j(U).add(y(I))):(D=D.j(S),D=D.add(y(I)))}return D}var w=g(0),O=g(1),B=g(16777216);r=f.prototype,r.m=function(){if(Z(this))return-F(this).m();for(var x=0,R=1,S=0;S<this.g.length;S++){var D=this.i(S);x+=(0<=D?D:4294967296+D)*R,R*=4294967296}return x},r.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(X(this))return"0";if(Z(this))return"-"+F(this).toString(x);for(var R=y(Math.pow(x,6)),S=this,D="";;){var M=kt(S,R).g;S=dt(S,M.j(R));var U=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=M,X(S))return U+D;for(;6>U.length;)U="0"+U;D=U+D}},r.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function X(x){if(x.h!=0)return!1;for(var R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function Z(x){return x.h==-1}r.l=function(x){return x=dt(this,x),Z(x)?-1:X(x)?0:1};function F(x){for(var R=x.g.length,S=[],D=0;D<R;D++)S[D]=~x.g[D];return new f(S,~x.h).add(O)}r.abs=function(){return Z(this)?F(this):this},r.add=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0,M=0;M<=R;M++){var U=D+(this.i(M)&65535)+(x.i(M)&65535),I=(U>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);D=I>>>16,U&=65535,I&=65535,S[M]=I<<16|U}return new f(S,S[S.length-1]&-2147483648?-1:0)};function dt(x,R){return x.add(F(R))}r.j=function(x){if(X(this)||X(x))return w;if(Z(this))return Z(x)?F(this).j(F(x)):F(F(this).j(x));if(Z(x))return F(this.j(F(x)));if(0>this.l(B)&&0>x.l(B))return y(this.m()*x.m());for(var R=this.g.length+x.g.length,S=[],D=0;D<2*R;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<x.g.length;M++){var U=this.i(D)>>>16,I=this.i(D)&65535,ee=x.i(M)>>>16,ae=x.i(M)&65535;S[2*D+2*M]+=I*ae,mt(S,2*D+2*M),S[2*D+2*M+1]+=U*ae,mt(S,2*D+2*M+1),S[2*D+2*M+1]+=I*ee,mt(S,2*D+2*M+1),S[2*D+2*M+2]+=U*ee,mt(S,2*D+2*M+2)}for(D=0;D<R;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=R;D<2*R;D++)S[D]=0;return new f(S,0)};function mt(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function Tt(x,R){this.g=x,this.h=R}function kt(x,R){if(X(R))throw Error("division by zero");if(X(x))return new Tt(w,w);if(Z(x))return R=kt(F(x),R),new Tt(F(R.g),F(R.h));if(Z(R))return R=kt(x,F(R)),new Tt(F(R.g),R.h);if(30<x.g.length){if(Z(x)||Z(R))throw Error("slowDivide_ only works with positive integers.");for(var S=O,D=R;0>=D.l(x);)S=_t(S),D=_t(D);var M=Rt(S,1),U=Rt(D,1);for(D=Rt(D,2),S=Rt(S,2);!X(D);){var I=U.add(D);0>=I.l(x)&&(M=M.add(S),U=I),D=Rt(D,1),S=Rt(S,1)}return R=dt(x,M.j(R)),new Tt(M,R)}for(M=w;0<=x.l(R);){for(S=Math.max(1,Math.floor(x.m()/R.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),U=y(S),I=U.j(R);Z(I)||0<I.l(x);)S-=D,U=y(S),I=U.j(R);X(U)&&(U=O),M=M.add(U),x=dt(x,I)}return new Tt(M,x)}r.A=function(x){return kt(this,x).h},r.and=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)&x.i(D);return new f(S,this.h&x.h)},r.or=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)|x.i(D);return new f(S,this.h|x.h)},r.xor=function(x){for(var R=Math.max(this.g.length,x.g.length),S=[],D=0;D<R;D++)S[D]=this.i(D)^x.i(D);return new f(S,this.h^x.h)};function _t(x){for(var R=x.g.length+1,S=[],D=0;D<R;D++)S[D]=x.i(D)<<1|x.i(D-1)>>>31;return new f(S,x.h)}function Rt(x,R){var S=R>>5;R%=32;for(var D=x.g.length-S,M=[],U=0;U<D;U++)M[U]=0<R?x.i(U+S)>>>R|x.i(U+S+1)<<32-R:x.i(U+S);return new f(M,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,z0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Hr=f}).apply(typeof X_<"u"?X_:typeof self<"u"?self:typeof window<"u"?window:{});var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B0,gl,q0,Cc,Qd,H0,G0,F0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _c=="object"&&_c];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)t:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in _))break t;_=_[L]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,L={next:function(){if(!A&&_<c.length){var q=_++;return{value:p(q,c[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,_){return c.call.apply(c.bind,arguments)}function w(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function O(c,p,_){return O=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,O.apply(null,arguments)}function B(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function X(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,L,q){for(var nt=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)nt[Pt-2]=arguments[Pt];return p.prototype[L].apply(A,nt)}}function Z(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function F(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const L=c.length||0,q=A.length||0;c.length=L+q;for(let nt=0;nt<q;nt++)c[L+nt]=A[nt]}else c.push(A)}}class dt{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function mt(c){return/^[\s\xa0]*$/.test(c)}function Tt(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function kt(c){return kt[" "](c),c}kt[" "]=function(){};var _t=Tt().indexOf("Gecko")!=-1&&!(Tt().toLowerCase().indexOf("webkit")!=-1&&Tt().indexOf("Edge")==-1)&&!(Tt().indexOf("Trident")!=-1||Tt().indexOf("MSIE")!=-1)&&Tt().indexOf("Edge")==-1;function Rt(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function x(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function R(c){const p={};for(const _ in c)p[_]=c[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,p){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)c[_]=A[_];for(let q=0;q<S.length;q++)_=S[q],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function M(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function U(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Bt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,_){const A=ae.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new dt(()=>new it,c=>c.reset());class it{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,ut=!1,Bt=new ee,N=()=>{const c=m.Promise.resolve(void 0);pt=()=>{c.then(W)}};var W=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){U(_)}var p=ae;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ut=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var et=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function ft(c,p){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(_t){t:{try{kt(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ft.aa.h.call(this)}}X(ft,tt);var gt={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qt="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function Wt(c,p,_,A,L){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=L,this.key=++Nt,this.da=this.fa=!1}function zt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $e(c){this.src=c,this.g={},this.h=0}$e.prototype.add=function(c,p,_,A,L){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var nt=_n(c,p,A,L);return-1<nt?(p=c[nt],_||(p.fa=!1)):(p=new Wt(p,this.src,q,!!A,L),p.fa=_,c.push(p)),p};function di(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],L=Array.prototype.indexOf.call(A,p,void 0),q;(q=0<=L)&&Array.prototype.splice.call(A,L,1),q&&(zt(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function _n(c,p,_,A){for(var L=0;L<c.length;++L){var q=c[L];if(!q.da&&q.listener==p&&q.capture==!!_&&q.ha==A)return L}return-1}var Wi="closure_lm_"+(1e6*Math.random()|0),Zi={};function mi(c,p,_,A,L){if(Array.isArray(p)){for(var q=0;q<p.length;q++)mi(c,p[q],_,A,L);return null}return _=$l(_),c&&c[Qt]?c.K(p,_,y(A)?!!A.capture:!1,L):ao(c,p,_,!1,A,L)}function ao(c,p,_,A,L,q){if(!p)throw Error("Invalid event type");var nt=y(L)?!!L.capture:!!L,Pt=oo(c);if(Pt||(c[Wi]=Pt=new $e(c)),_=Pt.add(p,_,A,nt,q),_.proxy)return _;if(A=Fs(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)et||(L=nt),L===void 0&&(L=!1),c.addEventListener(p.toString(),A,L);else if(c.attachEvent)c.attachEvent(Qs(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Fs(){function c(_){return p.call(c.src,c.listener,_)}const p=Th;return c}function Ks(c,p,_,A,L){if(Array.isArray(p))for(var q=0;q<p.length;q++)Ks(c,p[q],_,A,L);else A=y(A)?!!A.capture:!!A,_=$l(_),c&&c[Qt]?(c=c.i,p=String(p).toString(),p in c.g&&(q=c.g[p],_=_n(q,_,A,L),-1<_&&(zt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete c.g[p],c.h--)))):c&&(c=oo(c))&&(p=c.g[p.toString()],c=-1,p&&(c=_n(p,_,A,L)),(_=-1<c?p[c]:null)&&ns(_))}function ns(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Qt])di(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(Qs(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=oo(p))?(di(_,c),_.h==0&&(_.src=null,p[Wi]=null)):zt(c)}}}function Qs(c){return c in Zi?Zi[c]:Zi[c]="on"+c}function Th(c,p){if(c.da)c=!0;else{p=new ft(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&ns(c),c=_.call(A,p)}return c}function oo(c){return c=c[Wi],c instanceof $e?c:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function $l(c){return typeof c=="function"?c:(c[nn]||(c[nn]=function(p){return c.handleEvent(p)}),c[nn])}function Ee(){J.call(this),this.i=new $e(this),this.M=this,this.F=null}X(Ee,J),Ee.prototype[Qt]=!0,Ee.prototype.removeEventListener=function(c,p,_,A){Ks(this,c,p,_,A)};function Ce(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new tt(p,c);else if(p instanceof tt)p.target=p.target||c;else{var L=p;p=new tt(A,c),D(p,L)}if(L=!0,_)for(var q=_.length-1;0<=q;q--){var nt=p.g=_[q];L=pi(nt,A,!0,p)&&L}if(nt=p.g=c,L=pi(nt,A,!0,p)&&L,L=pi(nt,A,!1,p)&&L,_)for(q=0;q<_.length;q++)nt=p.g=_[q],L=pi(nt,A,!1,p)&&L}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)zt(_[A]);delete c.g[p],c.h--}}this.F=null},Ee.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},Ee.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function pi(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,q=0;q<p.length;++q){var nt=p[q];if(nt&&!nt.da&&nt.capture==_){var Pt=nt.listener,Ae=nt.ha||nt.src;nt.fa&&di(c.i,nt),L=Pt.call(Ae,A)!==!1&&L}}return L&&!A.defaultPrevented}function Wl(c,p,_){if(typeof c=="function")_&&(c=O(c,_));else if(c&&typeof c.handleEvent=="function")c=O(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function lo(c){c.g=Wl(()=>{c.g=null,c.i&&(c.i=!1,lo(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Ah extends J{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:lo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(c){J.call(this),this.h=c,this.g={}}X(is,J);var Ji=[];function He(c){Rt(c.g,function(p,_){this.g.hasOwnProperty(_)&&ns(p)},c),c.g={}}is.prototype.N=function(){is.aa.N.call(this),He(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=m.JSON.stringify,Gn=m.JSON.parse,We=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function co(){}co.prototype.h=null;function Zl(c){return c.h||(c.h=c.i())}function Jl(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){tt.call(this,"d")}X(tr,tt);function Pn(){tt.call(this,"c")}X(Pn,tt);var vn={},er=null;function Ys(){return er=er||new Ee}vn.La="serverreachability";function ho(c){tt.call(this,vn.La,c)}X(ho,tt);function nr(c){const p=Ys();Ce(p,new ho(p))}vn.STAT_EVENT="statevent";function Xs(c,p){tt.call(this,vn.STAT_EVENT,c),this.stat=p}X(Xs,tt);function he(c){const p=Ys();Ce(p,new Xs(p,c))}vn.Ma="timingevent";function tu(c,p){tt.call(this,vn.Ma,c),this.size=p}X(tu,tt);function ir(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function rr(){this.g=!0}rr.prototype.xa=function(){this.g=!1};function eu(c,p,_,A,L,q){c.info(function(){if(c.g)if(q)for(var nt="",Pt=q.split("&"),Ae=0;Ae<Pt.length;Ae++){var Ut=Pt[Ae].split("=");if(1<Ut.length){var Oe=Ut[0];Ut=Ut[1];var Se=Oe.split("_");nt=2<=Se.length&&Se[1]=="type"?nt+(Oe+"="+Ut+"&"):nt+(Oe+"=redacted&")}}else nt=null;else nt=q;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+p+`
`+_+`
`+nt})}function nu(c,p,_,A,L,q,nt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+p+`
`+_+`
`+q+" "+nt})}function sr(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+De(c,_)+(A?" "+A:"")})}function Kn(c,p){c.info(function(){return"TIMEOUT: "+p})}rr.prototype.info=function(){};function De(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var q=L[0];if(q!="noop"&&q!="stop"&&q!="close")for(var nt=1;nt<L.length;nt++)L[nt]=""}}}}return uo(_)}catch{return p}}var Te={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rs;function $s(){}X($s,co),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},rs=new $s;function Qn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fo}function fo(){this.i=null,this.g="",this.h=!1}var ar={},ss={};function Un(c,p,_){c.L=1,c.v=ls(oe(p)),c.m=_,c.P=!0,yi(c,null)}function yi(c,p){c.F=Date.now(),ne(c),c.A=oe(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Ei(_.i,"t",A),c.C=0,_=c.j.J,c.h=new fo,c.g=gu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new Ah(O(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ji[0]=L.toString()),L=Ji);for(var q=0;q<L.length;q++){var nt=mi(_,L[q],A||p.handleEvent,!1,p.h||p);if(!nt)break;p.g[nt.key]=nt}p=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),nr(),eu(c.i,c.u,c.A,c.l,c.R,c.m)}Qn.prototype.ca=function(c){c=c.target;const p=this.M;p&&bn(c)==3?p.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)t:{const Se=bn(this.g);var p=this.g.Ba();const bi=this.g.Z();if(!(3>Se)&&(Se!=3||this.g&&(this.h.h||this.g.oa()||lu(this.g)))){this.J||Se!=4||p==7||(p==8||0>=bi?nr(3):nr(2)),Ws(this);var _=this.g.Z();this.X=_;e:if(or(this)){var A=lu(this.g);c="";var L=A.length,q=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),un(this);var nt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(q&&p==L-1)});A.length=0,this.h.g+=c,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=_==200,nu(this.i,this.u,this.A,this.l,this.R,Se,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,Ae=this.g;if((Pt=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mt(Pt)){var Ut=Pt;break e}}Ut=null}if(_=Ut)sr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cn(this,_);else{this.o=!1,this.s=3,he(12),rn(this),un(this);break t}}if(this.P){_=!0;let Pe;for(;!this.J&&this.C<nt.length;)if(Pe=lr(this,nt),Pe==ss){Se==4&&(this.s=4,he(14),_=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Pe==ar){this.s=4,he(15),sr(this.i,this.l,nt,"[Invalid Chunk]"),_=!1;break}else sr(this.i,this.l,Pe,null),cn(this,Pe);if(or(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||nt.length!=0||this.h.h||(this.s=1,he(16),_=!1),this.o=this.o&&_,!_)sr(this.i,this.l,nt,"[Invalid Chunked Response]"),rn(this),un(this);else if(0<nt.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),ps(Oe),Oe.M=!0,he(11))}}else sr(this.i,this.l,nt,null),cn(this,nt);Se==4&&rn(this),this.o&&!this.J&&(Se==4?du(this.j,this):(this.o=!1,ne(this)))}else Ch(this.g),_==400&&0<nt.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),rn(this),un(this)}}}catch{}finally{}};function or(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lr(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?ss:(_=Number(p.substring(_,A)),isNaN(_)?ar:(A+=1,A+_>p.length?ss:(p=p.slice(A,A+_),c.C=A+_,p)))}Qn.prototype.cancel=function(){this.J=!0,rn(this)};function ne(c){c.S=Date.now()+c.I,mo(c,c.I)}function mo(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ir(O(c.ba,c),p)}function Ws(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Qn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Kn(this.i,this.A),this.L!=2&&(nr(),he(17)),rn(this),this.s=2,un(this)):mo(this,this.S-c)};function un(c){c.j.G==0||c.J||du(c.j,c)}function rn(c){Ws(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,He(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function cn(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||ur(_.h,c))){if(!c.K&&ur(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)oa(_),sa(_);else break t;wo(_),he(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=ir(O(_.Za,_),6e3));if(1>=iu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Si(_,11)}else if((c.K||_.g==c)&&oa(_),!mt(p))for(L=_.Da.g.parse(p),p=0;p<L.length;p++){let Ut=L[p];if(_.T=Ut[0],Ut=Ut[1],_.G==2)if(Ut[0]=="c"){_.K=Ut[1],_.ia=Ut[2];const Oe=Ut[3];Oe!=null&&(_.la=Oe,_.j.info("VER="+_.la));const Se=Ut[4];Se!=null&&(_.Aa=Se,_.j.info("SVER="+_.Aa));const bi=Ut[5];bi!=null&&typeof bi=="number"&&0<bi&&(A=1.5*bi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Pe=c.g;if(Pe){const ti=Pe.g?Pe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var q=A.h;q.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(cr(q,q.h),q.h=null))}if(A.D){const Io=Pe.g?Pe.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(A.ya=Io,qt(A.I,A.D,Io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var nt=c;if(A.qa=pu(A,A.J?A.ia:null,A.W),nt.K){En(A.h,nt);var Pt=nt,Ae=A.L;Ae&&(Pt.I=Ae),Pt.B&&(Ws(Pt),ne(Pt)),A.g=nt}else hu(A);0<_.i.length&&aa(_)}else Ut[0]!="stop"&&Ut[0]!="close"||Si(_,7);else _.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Si(_,7):So(_):Ut[0]!="noop"&&_.l&&_.l.ta(Ut),_.v=0)}}nr(4)}catch{}}var Sh=class{constructor(c,p){this.g=c,this.map=p}};function po(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function go(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function iu(c){return c.h?1:c.g?c.g.size:0}function ur(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function cr(c,p){c.g?c.g.add(p):c.h=p}function En(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}po.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ze(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return Z(c.i)}function ru(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function bh(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function as(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=bh(c),A=ru(c),L=A.length,q=0;q<L;q++)p.call(void 0,A[q],_&&_[q],c)}var yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zs(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),L=null;if(0<=A){var q=c[_].substring(0,A);L=c[_].substring(A+1)}else q=c[_];p(q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function _i(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _i){this.h=c.h,hr(this,c.j),this.o=c.o,this.g=c.g,os(this,c.s),this.l=c.l;var p=c.i,_=new Yn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Js(this,_),this.m=c.m}else c&&(p=String(c).match(yo))?(this.h=!1,hr(this,p[1]||"",!0),this.o=fr(p[2]||""),this.g=fr(p[3]||"",!0),os(this,p[4]),this.l=fr(p[5]||"",!0),Js(this,p[6]||"",!0),this.m=fr(p[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}_i.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Tn(p,_o,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Tn(p,_o,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Tn(_,_.charAt(0)=="/"?vo:su,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Tn(_,Ih)),c.join("")};function oe(c){return new _i(c)}function hr(c,p,_){c.j=_?fr(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function os(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Js(c,p,_){p instanceof Yn?(c.i=p,Eo(c.i,c.h)):(_||(p=Tn(p,Rh)),c.i=new Yn(p,c.h))}function qt(c,p,_){c.i.set(p,_)}function ls(c){return qt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fr(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Tn(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,wh),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _o=/[#\/\?@]/g,su=/[#\?:]/g,vo=/[#\?]/g,Rh=/[#\?@]/g,Ih=/#/g;function Yn(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function An(c){c.g||(c.g=new Map,c.h=0,c.i&&Zs(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Yn.prototype,r.add=function(c,p){An(this),this.i=null,c=Ti(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function ta(c,p){An(c),p=Ti(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function vi(c,p){return An(c),p=Ti(c,p),c.g.has(p)}r.forEach=function(c,p){An(this),this.g.forEach(function(_,A){_.forEach(function(L){c.call(p,L,A,this)},this)},this)},r.na=function(){An(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const L=c[A];for(let q=0;q<L.length;q++)_.push(p[A])}return _},r.V=function(c){An(this);let p=[];if(typeof c=="string")vi(this,c)&&(p=p.concat(this.g.get(Ti(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},r.set=function(c,p){return An(this),this.i=null,c=Ti(this,c),vi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Ei(c,p,_){ta(c,p),0<_.length&&(c.i=null,c.g.set(Ti(c,p),Z(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const q=encodeURIComponent(String(A)),nt=this.V(A);for(A=0;A<nt.length;A++){var L=q;nt[A]!==""&&(L+="="+encodeURIComponent(String(nt[A]))),c.push(L)}}return this.i=c.join("&")};function Ti(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Eo(c,p){p&&!c.j&&(An(c),c.i=null,c.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(ta(this,A),Ei(this,L,_))},c)),c.j=p}function au(c,p){const _=new rr;if(m.Image){const A=new Image;A.onload=B(Sn,_,"TestLoadImage: loaded",!0,p,A),A.onerror=B(Sn,_,"TestLoadImage: error",!1,p,A),A.onabort=B(Sn,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=B(Sn,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function us(c,p){const _=new rr,A=new AbortController,L=setTimeout(()=>{A.abort(),Sn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(q=>{clearTimeout(L),q.ok?Sn(_,"TestPingServer: ok",!0,p):Sn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Sn(_,"TestPingServer: error",!1,p)})}function Sn(c,p,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function cs(){this.g=new We}function Xn(c,p,_){const A=_||"";try{as(c,function(L,q){let nt=L;y(L)&&(nt=uo(L)),p.push(A+q+"="+encodeURIComponent(nt))})}catch(L){throw p.push(A+"type="+encodeURIComponent("_badmap")),L}}function dr(c){this.l=c.Ub||null,this.j=c.eb||!1}X(dr,co),dr.prototype.g=function(){return new Ai(this.l,this.j)},dr.prototype.i=function(c){return function(){return c}}({});function Ai(c,p){Ee.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(Ai,Ee),r=Ai.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;To(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function To(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?$n(this):Wn(this),this.readyState==3&&To(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,$n(this))},r.Qa=function(c){this.g&&(this.response=c,$n(this))},r.ga=function(){this.g&&$n(this)};function $n(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wn(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ao(c){let p="";return Rt(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function Ne(c,p,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Ao(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):qt(c,p,_))}function Ft(c){Ee.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(Ft,Ee);var ea=/^https?$/i,hs=["POST","PUT"];r=Ft.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rs.g(),this.v=this.o?Zl(this.o):Zl(rs),this.g.onreadystatechange=O(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(q){ou(this,q);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const q of A.keys())_.set(q,A.get(q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(hs,p,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,nt]of _)this.g.setRequestHeader(q,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fs(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){ou(this,q)}};function ou(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,na(c),Zn(c)}function na(c){c.A||(c.A=!0,Ce(c,"complete"),Ce(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ce(this,"complete"),Ce(this,"abort"),Zn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zn(this,!0)),Ft.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ia(this):this.bb())},r.bb=function(){ia(this)};function ia(c){if(c.h&&typeof f<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)Wl(c.Ea,0,c);else if(Ce(c,"readystatechange"),bn(c)==4){c.h=!1;try{const nt=c.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var A;if(A=nt===0){var L=String(c.D).match(yo)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),A=!ea.test(L?L.toLowerCase():"")}_=A}if(_)Ce(c,"complete"),Ce(c,"success");else{c.m=6;try{var q=2<bn(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",na(c)}}finally{Zn(c)}}}}function Zn(c,p){if(c.g){fs(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ce(c,"ready");try{_.onreadystatechange=A}catch{}}}function fs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Gn(p)}};function lu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(c){const p={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(mt(c[A]))continue;var _=M(c[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=p[L]||[];p[L]=q,q.push(_)}x(p,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ra(c){this.Aa=0,this.i=[],this.j=new rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,c),this.cb=ds("retryDelaySeedMs",1e4,c),this.Wa=ds("forwardChannelMaxRetries",2,c),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new po(c&&c.concurrentRequestLimit),this.Da=new cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ra.prototype,r.la=8,r.G=1,r.connect=function(c,p,_,A){he(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=pu(this,null,this.W),aa(this)};function So(c){if(uu(c),c.G==3){var p=c.U++,_=oe(c.I);if(qt(_,"SID",c.K),qt(_,"RID",p),qt(_,"TYPE","terminate"),ms(c,_),p=new Qn(c,c.j,p),p.L=2,p.v=ls(oe(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=gu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ne(p)}mu(c)}function sa(c){c.g&&(ps(c),c.g.cancel(),c.g=null)}function uu(c){sa(c),c.u&&(m.clearTimeout(c.u),c.u=null),oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function aa(c){if(!go(c.h)&&!c.s){c.s=!0;var p=c.Ga;pt||N(),ut||(pt(),ut=!0),Bt.add(p,c),c.B=0}}function Dh(c,p){return iu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ir(O(c.Ga,c,p),Ro(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Qn(this,this.j,c);let q=this.o;if(this.S&&(q?(q=R(q),D(q,this.S)):q=this.S),this.m!==null||this.O||(L.H=q,q=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=cu(this,L,p),_=oe(this.I),qt(_,"RID",c),qt(_,"CVER",22),this.D&&qt(_,"X-HTTP-Session-Id",this.D),ms(this,_),q&&(this.O?p="headers="+encodeURIComponent(String(Ao(q)))+"&"+p:this.m&&Ne(_,this.m,q)),cr(this.h,L),this.Ua&&qt(_,"TYPE","init"),this.P?(qt(_,"$req",p),qt(_,"SID","null"),L.T=!0,Un(L,_,null)):Un(L,_,p),this.G=2}}else this.G==3&&(c?bo(this,c):this.i.length==0||go(this.h)||bo(this))};function bo(c,p){var _;p?_=p.l:_=c.U++;const A=oe(c.I);qt(A,"SID",c.K),qt(A,"RID",_),qt(A,"AID",c.T),ms(c,A),c.m&&c.o&&Ne(A,c.m,c.o),_=new Qn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=cu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),cr(c.h,_),Un(_,A,p)}function ms(c,p){c.H&&Rt(c.H,function(_,A){qt(p,A,_)}),c.l&&as({},function(_,A){qt(p,A,_)})}function cu(c,p,_){_=Math.min(c.i.length,_);var A=c.l?O(c.l.Na,c.l,c):null;t:{var L=c.i;let q=-1;for(;;){const nt=["count="+_];q==-1?0<_?(q=L[0].g,nt.push("ofs="+q)):q=0:nt.push("ofs="+q);let Pt=!0;for(let Ae=0;Ae<_;Ae++){let Ut=L[Ae].g;const Oe=L[Ae].map;if(Ut-=q,0>Ut)q=Math.max(0,L[Ae].g-100),Pt=!1;else try{Xn(Oe,nt,"req"+Ut+"_")}catch{A&&A(Oe)}}if(Pt){A=nt.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,A}function hu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;pt||N(),ut||(pt(),ut=!0),Bt.add(p,c),c.v=0}}function wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ir(O(c.Fa,c),Ro(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ir(O(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),sa(this),fu(this))};function ps(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function fu(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=oe(c.qa);qt(p,"RID","rpc"),qt(p,"SID",c.K),qt(p,"AID",c.T),qt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&qt(p,"TO",c.ja),qt(p,"TYPE","xmlhttp"),ms(c,p),c.m&&c.o&&Ne(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ls(oe(p)),_.m=null,_.P=!0,yi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,sa(this),wo(this),he(19))};function oa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function du(c,p){var _=null;if(c.g==p){oa(c),ps(c),c.g=null;var A=2}else if(ur(c.h,p))_=p.D,En(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;A=Ys(),Ce(A,new tu(A,_)),aa(c)}else hu(c);else if(L=p.s,L==3||L==0&&0<p.X||!(A==1&&Dh(c,p)||A==2&&wo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),L){case 1:Si(c,5);break;case 4:Si(c,10);break;case 3:Si(c,6);break;default:Si(c,2)}}}function Ro(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Si(c,p){if(c.j.info("Error code "+p),p==2){var _=O(c.fb,c),A=c.Xa;const L=!A;A=new _i(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||hr(A,"https"),ls(A),L?au(A.toString(),_):us(A.toString(),_)}else he(2);c.G=0,c.l&&c.l.sa(p),mu(c),uu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function mu(c){if(c.G=0,c.ka=[],c.l){const p=Ze(c.h);(p.length!=0||c.i.length!=0)&&(F(c.ka,p),F(c.ka,c.i),c.h.i.length=0,Z(c.i),c.i.length=0),c.l.ra()}}function pu(c,p,_){var A=_ instanceof _i?oe(_):new _i(_);if(A.g!="")p&&(A.g=p+"."+A.g),os(A,A.s);else{var L=m.location;A=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var q=new _i(null);A&&hr(q,A),p&&(q.g=p),L&&os(q,L),_&&(q.l=_),A=q}return _=c.D,p=c.ya,_&&p&&qt(A,_,p),qt(A,"VER",c.la),ms(c,A),A}function gu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ft(new dr({eb:_})):new Ft(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function yu(){}r=yu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function la(){}la.prototype.g=function(c,p){return new Je(c,p)};function Je(c,p){Ee.call(this),this.g=new ra(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!mt(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!mt(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Jn(this)}X(Je,Ee),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){So(this.g)},Je.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=uo(c),c=_);p.i.push(new Sh(p.Ya++,c)),p.G==3&&aa(p)},Je.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,Je.aa.N.call(this)};function _u(c){tr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}X(_u,tr);function vu(){Pn.call(this),this.status=1}X(vu,Pn);function Jn(c){this.g=c}X(Jn,yu),Jn.prototype.ua=function(){Ce(this.g,"a")},Jn.prototype.ta=function(c){Ce(this.g,new _u(c))},Jn.prototype.sa=function(c){Ce(this.g,new vu)},Jn.prototype.ra=function(){Ce(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,F0=function(){return new la},G0=function(){return Ys()},H0=vn,Qd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,Cc=Te,gi.COMPLETE="complete",q0=gi,Jl.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,gl=Jl,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,B0=Ft}).apply(typeof _c<"u"?_c:typeof self<"u"?self:typeof window<"u"?window:{});const $_="@firebase/firestore",W_="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new fm("@firebase/firestore");function ka(){return zs.logLevel}function st(r,...t){if(zs.logLevel<=Ot.DEBUG){const n=t.map(bm);zs.debug(`Firestore (${eo}): ${r}`,...n)}}function Qi(r,...t){if(zs.logLevel<=Ot.ERROR){const n=t.map(bm);zs.error(`Firestore (${eo}): ${r}`,...n)}}function Ka(r,...t){if(zs.logLevel<=Ot.WARN){const n=t.map(bm);zs.warn(`Firestore (${eo}): ${r}`,...n)}}function bm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(r="Unexpected state"){const t=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: `+r;throw Qi(t),new Error(t)}function Kt(r,t){r||Et()}function bt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends Xi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}}class vR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ER{constructor(t){this.t=t,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Kt(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Kt(typeof s.accessToken=="string"),new K0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string"),new Qe(t)}}class TR{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class AR{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new TR(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kn(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Kt(this.o===void 0);const s=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,st("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>s(u))};const o=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Z_(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Kt(typeof n.token=="string"),this.R=n.token,new Z_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=bR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function xt(r,t){return r<t?-1:r>t?1:0}function Qa(r,t,n){return r.length===t.length&&r.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=-62135596800,tv=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(t){return ve.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*tv);return new ve(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<J_)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new rt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tv}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-J_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new ve(0,0))}static max(){return new At(new ve(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="__name__";class ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&Et(),s===void 0?s=t.length-n:s>t.length-n&&Et(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=ai.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Math.sign(t.length-n.length)}static compareSegments(t,n){const s=ai.isNumericId(t),o=ai.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ai.extractNumericId(t).compare(ai.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Hr.fromString(t.substring(4,t.length-2))}}class te extends ai{construct(t,n,s){return new te(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new rt(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new te(n)}static emptyPath(){return new te([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends ai{construct(t,n,s){return new Be(t,n,s)}static isValidIdentifier(t){return wR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ev}static keyField(){return new Be([ev])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new rt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new rt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new rt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t){this.path=t}static fromPath(t){return new ht(te.fromString(t))}static fromName(t){return new ht(te.fromString(t).popFirst(5))}static empty(){return new ht(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&te.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return te.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ht(new te(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function RR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=At.fromTimestamp(s===1e9?new ve(n+1,0):new ve(n,s));return new Fr(o,ht.empty(),t)}function IR(r){return new Fr(r.readTime,r.key,Cl)}class Fr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Fr(At.min(),ht.empty(),Cl)}static max(){return new Fr(At.max(),ht.empty(),Cl)}}function CR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ht.comparator(r.documentKey,t.documentKey),n!==0?n:xt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==DR)throw r;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Y((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Y.reject(n)}static resolve(t){return new Y((n,s)=>{n(t)})}static reject(t){return new Y((n,s)=>{s(t)})}static waitFor(t){return new Y((n,s)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>s(g))}),f=!0,u===o&&n()})}static or(t){let n=Y.resolve(!1);for(const s of t)n=n.next(o=>o?Y.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(t,n){return new Y((s,o)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(t[y]).next(T=>{f[y]=T,++m,m===u&&s(f)},T=>o(T))}})}static doWhile(t,n){return new Y((s,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):s()};u()})}}function OR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}rh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-1;function sh(r){return r==null}function qc(r){return r===0&&1/r==-1/0}function VR(r){return typeof r=="number"&&Number.isInteger(r)&&!qc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="";function MR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=nv(t)),t=xR(r.get(n),t);return nv(t)}function xR(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case Y0:n+="";break;default:n+=u}}return n}function nv(r){return r+Y0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Jr(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function X0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n){this.comparator=t,this.root=n||ze.EMPTY}insert(t,n){return new se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ze.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vc(this.root,t,this.comparator,!1)}getReverseIterator(){return new vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vc(this.root,t,this.comparator,!0)}}class vc{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ze{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??ze.RED,this.left=o??ze.EMPTY,this.right=u??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new ze(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return ze.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const t=this.left.check();if(t!==this.right.check())throw Et();return t+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(t,n,s,o,u){return this}insert(t,n,s){return new ze(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(t){return new rv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Re)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Re(this.comparator);return n.data=t,n}}class rv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.fields=t,t.sort(Be.comparator)}static empty(){return new yn([])}unionWith(t){let n=new Re(Be.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new yn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Qa(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $0("Invalid base64 string: "+u):u}}(t);return new qe(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new qe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(r){if(Kt(!!r),typeof r=="string"){let t=0;const n=kR.exec(r);if(Kt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:de(r.seconds),nanos:de(r.nanos)}}function de(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?qe.fromBase64String(r):qe.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="server_timestamp",Z0="__type__",J0="__previous_value__",tE="__local_write_time__";function Rm(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[Z0])===null||n===void 0?void 0:n.stringValue)===W0}function ah(r){const t=r.mapValue.fields[J0];return Rm(t)?ah(t):t}function Dl(r){const t=Kr(r.mapValue.fields[tE].timestampValue);return new ve(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(t,n,s,o,u,f,m,g,y){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y}}const Hc="(default)";class Nl{constructor(t,n){this.projectId=t,this.database=n||Hc}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(t){return t instanceof Nl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="__type__",UR="__max__",Ec={mapValue:{}},nE="__vector__",Gc="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rm(r)?4:jR(r)?9007199254740991:LR(r)?10:11:Et()}function fi(r,t){if(r===t)return!0;const n=Yr(r);if(n!==Yr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Dl(r).isEqual(Dl(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Kr(o.timestampValue),m=Kr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(o,u){return Qr(o.bytesValue).isEqual(Qr(u.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(o,u){return de(o.geoPointValue.latitude)===de(u.geoPointValue.latitude)&&de(o.geoPointValue.longitude)===de(u.geoPointValue.longitude)}(r,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return de(o.integerValue)===de(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=de(o.doubleValue),m=de(u.doubleValue);return f===m?qc(f)===qc(m):isNaN(f)&&isNaN(m)}return!1}(r,t);case 9:return Qa(r.arrayValue.values||[],t.arrayValue.values||[],fi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(iv(f)!==iv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!fi(f[g],m[g])))return!1;return!0}(r,t);default:return Et()}}function Ol(r,t){return(r.values||[]).find(n=>fi(n,t))!==void 0}function Ya(r,t){if(r===t)return 0;const n=Yr(r),s=Yr(t);if(n!==s)return xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(r.booleanValue,t.booleanValue);case 2:return function(u,f){const m=de(u.integerValue||u.doubleValue),g=de(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,t);case 3:return sv(r.timestampValue,t.timestampValue);case 4:return sv(Dl(r),Dl(t));case 5:return xt(r.stringValue,t.stringValue);case 6:return function(u,f){const m=Qr(u),g=Qr(f);return m.compareTo(g)}(r.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const T=xt(m[y],g[y]);if(T!==0)return T}return xt(m.length,g.length)}(r.referenceValue,t.referenceValue);case 8:return function(u,f){const m=xt(de(u.latitude),de(f.latitude));return m!==0?m:xt(de(u.longitude),de(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return av(r.arrayValue,t.arrayValue);case 10:return function(u,f){var m,g,y,T;const w=u.fields||{},O=f.fields||{},B=(m=w[Gc])===null||m===void 0?void 0:m.arrayValue,X=(g=O[Gc])===null||g===void 0?void 0:g.arrayValue,Z=xt(((y=B==null?void 0:B.values)===null||y===void 0?void 0:y.length)||0,((T=X==null?void 0:X.values)===null||T===void 0?void 0:T.length)||0);return Z!==0?Z:av(B,X)}(r.mapValue,t.mapValue);case 11:return function(u,f){if(u===Ec.mapValue&&f===Ec.mapValue)return 0;if(u===Ec.mapValue)return 1;if(f===Ec.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let w=0;w<g.length&&w<T.length;++w){const O=xt(g[w],T[w]);if(O!==0)return O;const B=Ya(m[g[w]],y[T[w]]);if(B!==0)return B}return xt(g.length,T.length)}(r.mapValue,t.mapValue);default:throw Et()}}function sv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return xt(r,t);const n=Kr(r),s=Kr(t),o=xt(n.seconds,s.seconds);return o!==0?o:xt(n.nanos,s.nanos)}function av(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ya(n[o],s[o]);if(u)return u}return xt(n.length,s.length)}function Xa(r){return Yd(r)}function Yd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Kr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Qr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ht.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Yd(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Yd(n.fields[f])}`;return o+"}"}(r.mapValue):Et()}function Dc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ah(r);return t?16+Dc(t):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Dc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Jr(s.fields,(u,f)=>{o+=u.length+Dc(f)}),o}(r.mapValue);default:throw Et()}}function ov(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Xd(r){return!!r&&"integerValue"in r}function Im(r){return!!r&&"arrayValue"in r}function lv(r){return!!r&&"nullValue"in r}function uv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nc(r){return!!r&&"mapValue"in r}function LR(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[eE])===null||n===void 0?void 0:n.stringValue)===nE}function Tl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Jr(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Tl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Tl(r.arrayValue.values[n]);return t}return Object.assign({},r)}function jR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.value=t}static empty(){return new on({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Nc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tl(n)}setAll(t){let n=Be.emptyPath(),s={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Tl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());Nc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return fi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];Nc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){Jr(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new on(Tl(this.value))}}function iE(r){const t=[];return Jr(r.fields,(n,s)=>{const o=new Be([n]);if(Nc(s)){const u=iE(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,n,s,o,u,f,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new Ye(t,0,At.min(),At.min(),At.min(),on.empty(),0)}static newFoundDocument(t,n,s,o){return new Ye(t,1,n,At.min(),s,o,0)}static newNoDocument(t,n){return new Ye(t,2,n,At.min(),At.min(),on.empty(),0)}static newUnknownDocument(t,n){return new Ye(t,3,n,At.min(),At.min(),on.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n){this.position=t,this.inclusive=n}}function cv(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=ht.comparator(ht.fromName(f.referenceValue),n.key):s=Ya(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function hv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!fi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t,n="asc"){this.field=t,this.dir=n}}function zR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{}class _e extends rE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new qR(t,n,s):n==="array-contains"?new FR(t,s):n==="in"?new KR(t,s):n==="not-in"?new QR(t,s):n==="array-contains-any"?new YR(t,s):new _e(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new HR(t,s):new GR(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ya(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Ya(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends rE{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new Hn(t,n)}matches(t){return sE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function sE(r){return r.op==="and"}function aE(r){return BR(r)&&sE(r)}function BR(r){for(const t of r.filters)if(t instanceof Hn)return!1;return!0}function $d(r){if(r instanceof _e)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(aE(r))return r.filters.map(t=>$d(t)).join(",");{const t=r.filters.map(n=>$d(n)).join(",");return`${r.op}(${t})`}}function oE(r,t){return r instanceof _e?function(s,o){return o instanceof _e&&s.op===o.op&&s.field.isEqual(o.field)&&fi(s.value,o.value)}(r,t):r instanceof Hn?function(s,o){return o instanceof Hn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&oE(f,o.filters[m]),!0):!1}(r,t):void Et()}function lE(r){return r instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(r):r instanceof Hn?function(n){return n.op.toString()+" {"+n.getFilters().map(lE).join(" ,")+"}"}(r):"Filter"}class qR extends _e{constructor(t,n,s){super(t,n,s),this.key=ht.fromName(s.referenceValue)}matches(t){const n=ht.comparator(t.key,this.key);return this.matchesComparison(n)}}class HR extends _e{constructor(t,n){super(t,"in",n),this.keys=uE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class GR extends _e{constructor(t,n){super(t,"not-in",n),this.keys=uE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function uE(r,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ht.fromName(s.referenceValue))}class FR extends _e{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Im(n)&&Ol(n.arrayValue,this.value)}}class KR extends _e{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class QR extends _e{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class YR extends _e{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ol(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(t,n=null,s=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function fv(r,t=null,n=[],s=[],o=null,u=null,f=null){return new XR(r,t,n,s,o,u,f)}function Cm(r){const t=bt(r);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>$d(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),sh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Xa(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Xa(s)).join(",")),t.le=n}return t.le}function Dm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!zR(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!oE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!hv(r.startAt,t.startAt)&&hv(r.endAt,t.endAt)}function Wd(r){return ht.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function $R(r,t,n,s,o,u,f,m){return new ro(r,t,n,s,o,u,f,m)}function Nm(r){return new ro(r)}function dv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function cE(r){return r.collectionGroup!==null}function Al(r){const t=bt(r);if(t.he===null){t.he=[];const n=new Set;for(const u of t.explicitOrderBy)t.he.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Re(Be.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.he.push(new Vl(u,s))}),n.has(Be.keyField().canonicalString())||t.he.push(new Vl(Be.keyField(),s))}return t.he}function ui(r){const t=bt(r);return t.Pe||(t.Pe=WR(t,Al(r))),t.Pe}function WR(r,t){if(r.limitType==="F")return fv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Vl(o.field,u)});const n=r.endAt?new Fc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Fc(r.startAt.position,r.startAt.inclusive):null;return fv(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function Zd(r,t){const n=r.filters.concat([t]);return new ro(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Kc(r,t,n){return new ro(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function oh(r,t){return Dm(ui(r),ui(t))&&r.limitType===t.limitType}function hE(r){return`${Cm(ui(r))}|lt:${r.limitType}`}function Pa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>lE(o)).join(", ")}]`),sh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Xa(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Xa(o)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function lh(r,t){return t.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ht.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,t)&&function(s,o){for(const u of Al(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,t)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,t)&&function(s,o){return!(s.startAt&&!function(f,m,g){const y=cv(f,m,g);return f.inclusive?y<=0:y<0}(s.startAt,Al(s),o)||s.endAt&&!function(f,m,g){const y=cv(f,m,g);return f.inclusive?y>=0:y>0}(s.endAt,Al(s),o))}(r,t)}function ZR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function fE(r){return(t,n)=>{let s=!1;for(const o of Al(r)){const u=JR(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function JR(r,t,n){const s=r.field.isKeyField()?ht.comparator(t.key,n.key):function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?Ya(g,y):Et()}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Jr(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return X0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new se(ht.comparator);function Yi(){return tI}const dE=new se(ht.comparator);function yl(...r){let t=dE;for(const n of r)t=t.insert(n.key,n);return t}function mE(r){let t=dE;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function ks(){return Sl()}function pE(){return Sl()}function Sl(){return new Hs(r=>r.toString(),(r,t)=>r.isEqual(t))}const eI=new se(ht.comparator),nI=new Re(ht.comparator);function Vt(...r){let t=nI;for(const n of r)t=t.add(n);return t}const iI=new Re(xt);function rI(){return iI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(t)?"-0":t}}function gE(r){return{integerValue:""+r}}function sI(r,t){return VR(t)?gE(t):Om(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this._=void 0}}function aI(r,t,n){return r instanceof Qc?function(o,u){const f={fields:{[Z0]:{stringValue:W0},[tE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Rm(u)&&(u=ah(u)),u&&(f.fields[J0]=u),{mapValue:f}}(n,t):r instanceof Ml?_E(r,t):r instanceof xl?vE(r,t):function(o,u){const f=yE(o,u),m=mv(f)+mv(o.Ie);return Xd(f)&&Xd(o.Ie)?gE(m):Om(o.serializer,m)}(r,t)}function oI(r,t,n){return r instanceof Ml?_E(r,t):r instanceof xl?vE(r,t):n}function yE(r,t){return r instanceof Yc?function(s){return Xd(s)||function(u){return!!u&&"doubleValue"in u}(s)}(t)?t:{integerValue:0}:null}class Qc extends uh{}class Ml extends uh{constructor(t){super(),this.elements=t}}function _E(r,t){const n=EE(t);for(const s of r.elements)n.some(o=>fi(o,s))||n.push(s);return{arrayValue:{values:n}}}class xl extends uh{constructor(t){super(),this.elements=t}}function vE(r,t){let n=EE(t);for(const s of r.elements)n=n.filter(o=>!fi(o,s));return{arrayValue:{values:n}}}class Yc extends uh{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function mv(r){return de(r.integerValue||r.doubleValue)}function EE(r){return Im(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function lI(r,t){return r.field.isEqual(t.field)&&function(s,o){return s instanceof Ml&&o instanceof Ml||s instanceof xl&&o instanceof xl?Qa(s.elements,o.elements,fi):s instanceof Yc&&o instanceof Yc?fi(s.Ie,o.Ie):s instanceof Qc&&o instanceof Qc}(r.transform,t.transform)}class uI{constructor(t,n){this.version=t,this.transformResults=n}}class ci{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Oc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ch{}function TE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new SE(r.key,ci.none()):new ql(r.key,r.data,ci.none());{const n=r.data,s=on.empty();let o=new Re(Be.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ts(r.key,s,new yn(o.toArray()),ci.none())}}function cI(r,t,n){r instanceof ql?function(o,u,f){const m=o.value.clone(),g=gv(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,t,n):r instanceof ts?function(o,u,f){if(!Oc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=gv(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(AE(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function bl(r,t,n,s){return r instanceof ql?function(u,f,m,g){if(!Oc(u.precondition,f))return m;const y=u.value.clone(),T=yv(u.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(r,t,n,s):r instanceof ts?function(u,f,m,g){if(!Oc(u.precondition,f))return m;const y=yv(u.fieldTransforms,g,f),T=f.data;return T.setAll(AE(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,t,n,s):function(u,f,m){return Oc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,t,n)}function hI(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=yE(s.transform,o||null);u!=null&&(n===null&&(n=on.empty()),n.set(s.field,u))}return n||null}function pv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Qa(s,o,(u,f)=>lI(u,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class ql extends ch{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ts extends ch{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function AE(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function gv(r,t,n){const s=new Map;Kt(r.length===n.length);for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=t.data.field(u.field);s.set(u.field,oI(f,m,n[o]))}return s}function yv(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,aI(u,f,t))}return s}class SE extends ch{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fI extends ch{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&cI(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=bl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=bl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=pE();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=TE(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(At.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Qa(this.mutations,t.mutations,(n,s)=>pv(n,s))&&Qa(this.baseMutations,t.baseMutations,(n,s)=>pv(n,s))}}class Vm{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Kt(t.mutations.length===s.length);let o=function(){return eI}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Vm(t,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye,jt;function gI(r){switch(r){case K.OK:return Et();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Et()}}function bE(r){if(r===void 0)return Qi("GRPC error has no .code"),K.UNKNOWN;switch(r){case ye.OK:return K.OK;case ye.CANCELLED:return K.CANCELLED;case ye.UNKNOWN:return K.UNKNOWN;case ye.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ye.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ye.INTERNAL:return K.INTERNAL;case ye.UNAVAILABLE:return K.UNAVAILABLE;case ye.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ye.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ye.NOT_FOUND:return K.NOT_FOUND;case ye.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ye.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ye.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ye.ABORTED:return K.ABORTED;case ye.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ye.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ye.DATA_LOSS:return K.DATA_LOSS;default:return Et()}}(jt=ye||(ye={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Hr([4294967295,4294967295],0);function _v(r){const t=yI().encode(r),n=new z0;return n.update(t),new Uint8Array(n.digest())}function vv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Hr([n,s],0),new Hr([o,u],0)]}class Mm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new _l(`Invalid padding: ${n}`);if(s<0)throw new _l(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new _l(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Hr.fromNumber(this.Ee)}Ae(t,n,s){let o=t.add(n.multiply(Hr.fromNumber(s)));return o.compare(_I)===1&&(o=new Hr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=_v(t),[s,o]=vv(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Mm(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(t){if(this.Ee===0)return;const n=_v(t),[s,o]=vv(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,Hl.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new hh(At.min(),o,new se(xt),Yi(),Vt())}}class Hl{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Hl(s,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,n,s,o){this.me=t,this.removedTargetIds=n,this.key=s,this.fe=o}}class wE{constructor(t,n){this.targetId=t,this.ge=n}}class RE{constructor(t,n,s=qe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Ev{constructor(){this.pe=0,this.ye=Tv(),this.we=qe.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=Vt(),n=Vt(),s=Vt();return this.ye.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Et()}}),new Hl(this.we,this.be,t,n,s)}Me(){this.Se=!1,this.ye=Tv()}xe(t,n){this.Se=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Kt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class vI{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Yi(),this.$e=Tc(),this.Ke=Tc(),this.Ue=new se(xt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const s=this.He(n);switch(t.state){case 0:this.Je(n)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(t.resumeToken));break;default:Et()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(t){const n=t.targetId,s=t.ge.count,o=this.Xe(n);if(o){const u=o.target;if(Wd(u))if(s===0){const f=new ht(u.path);this.ze(n,f,Ye.newNoDocument(f,At.min()))}else Kt(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(t),g=m?this.nt(m,t,f):1;if(g!==0){this.Ye(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,y)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Qr(s).toUint8Array()}catch(g){if(g instanceof $0)return Ka("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Mm(f,o,u)}catch(g){return Ka(g instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(t,n,s){return n.ge.count===s-this.st(t,n.targetId)?0:2}st(t,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(t){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Wd(m.target)){const g=new ht(m.target.path);this._t(g).has(f)||this.ut(f,g)||this.ze(f,g,Ye.newNoDocument(g,t))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Vt();this.Ke.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const y=this.Xe(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(t));const o=new hh(t,n,this.Ue,this.Qe,s);return this.Qe=Yi(),this.$e=Tc(),this.Ke=Tc(),this.Ue=new se(xt),o}Ge(t,n){if(!this.Je(t))return;const s=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,s){if(!this.Je(t))return;const o=this.He(t);this.ut(t,n)?o.xe(n,1):o.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new Ev,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new Re(xt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Re(xt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Ev),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function Tc(){return new se(ht.comparator)}function Tv(){return new se(ht.comparator)}const EI={asc:"ASCENDING",desc:"DESCENDING"},TI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AI={and:"AND",or:"OR"};class SI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Jd(r,t){return r.useProto3Json||sh(t)?t:{value:t}}function Xc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function IE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function bI(r,t){return Xc(r,t.toTimestamp())}function hi(r){return Kt(!!r),At.fromTimestamp(function(n){const s=Kr(n);return new ve(s.seconds,s.nanos)}(r))}function xm(r,t){return tm(r,t).canonicalString()}function tm(r,t){const n=function(o){return new te(["projects",o.projectId,"databases",o.database])}(r).child("documents");return t===void 0?n:n.child(t)}function CE(r){const t=te.fromString(r);return Kt(ME(t)),t}function em(r,t){return xm(r.databaseId,t.path)}function Md(r,t){const n=CE(t);if(n.get(1)!==r.databaseId.projectId)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new rt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ht(NE(n))}function DE(r,t){return xm(r.databaseId,t)}function wI(r){const t=CE(r);return t.length===4?te.emptyPath():NE(t)}function nm(r){return new te(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function NE(r){return Kt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Av(r,t,n){return{name:em(r,t),fields:n.value.mapValue.fields}}function RI(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Et()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(y,T){return y.useProto3Json?(Kt(T===void 0||typeof T=="string"),qe.fromBase64String(T||"")):(Kt(T===void 0||T instanceof Buffer||T instanceof Uint8Array),qe.fromUint8Array(T||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(y){const T=y.code===void 0?K.UNKNOWN:bE(y.code);return new rt(T,y.message||"")}(f);n=new RE(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=Md(r,s.document.name),u=hi(s.document.updateTime),f=s.document.createTime?hi(s.document.createTime):At.min(),m=new on({mapValue:{fields:s.document.fields}}),g=Ye.newFoundDocument(o,u,f,m),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Vc(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=Md(r,s.document),u=s.readTime?hi(s.readTime):At.min(),f=Ye.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Vc([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=Md(r,s.document),u=s.removedTargetIds||[];n=new Vc([],u,o,null)}else{if(!("filter"in t))return Et();{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new pI(o,u),m=s.targetId;n=new wE(m,f)}}return n}function II(r,t){let n;if(t instanceof ql)n={update:Av(r,t.key,t.value)};else if(t instanceof SE)n={delete:em(r,t.key)};else if(t instanceof ts)n={update:Av(r,t.key,t.data),updateMask:PI(t.fieldMask)};else{if(!(t instanceof fI))return Et();n={verify:em(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof Qc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ml)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof xl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Yc)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Et()}(0,s))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:bI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et()}(r,t.precondition)),n}function CI(r,t){return r&&r.length>0?(Kt(t!==void 0),r.map(n=>function(o,u){let f=o.updateTime?hi(o.updateTime):hi(u);return f.isEqual(At.min())&&(f=hi(u)),new uI(f,o.transformResults||[])}(n,t))):[]}function DI(r,t){return{documents:[DE(r,t.path)]}}function NI(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=DE(r,o);const u=function(y){if(y.length!==0)return VE(Hn.create(y,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(T=>function(O){return{field:Ua(O.field),direction:MI(O.dir)}}(T))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Jd(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(t.endAt)),{ht:n,parent:o}}function OI(r){let t=wI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Kt(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];n.where&&(u=function(w){const O=OE(w);return O instanceof Hn&&aE(O)?O.getFilters():[O]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(O=>function(X){return new Vl(La(X.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(O))}(n.orderBy));let m=null;n.limit&&(m=function(w){let O;return O=typeof w=="object"?w.value:w,sh(O)?null:O}(n.limit));let g=null;n.startAt&&(g=function(w){const O=!!w.before,B=w.values||[];return new Fc(B,O)}(n.startAt));let y=null;return n.endAt&&(y=function(w){const O=!w.before,B=w.values||[];return new Fc(B,O)}(n.endAt)),$R(t,o,f,u,m,"F",g,y)}function VI(r,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=La(n.unaryFilter.field);return _e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=La(n.unaryFilter.field);return _e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=La(n.unaryFilter.field);return _e.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=La(n.unaryFilter.field);return _e.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}(r):r.fieldFilter!==void 0?function(n){return _e.create(La(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Hn.create(n.compositeFilter.filters.map(s=>OE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Et()}}(n.compositeFilter.op))}(r):Et()}function MI(r){return EI[r]}function xI(r){return TI[r]}function kI(r){return AI[r]}function Ua(r){return{fieldPath:r.canonicalString()}}function La(r){return Be.fromServerFormat(r.fieldPath)}function VE(r){return r instanceof _e?function(n){if(n.op==="=="){if(uv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NAN"}};if(lv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NAN"}};if(lv(n.value))return{unaryFilter:{field:Ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(n.field),op:xI(n.op),value:n.value}}}(r):r instanceof Hn?function(n){const s=n.getFilters().map(o=>VE(o));return s.length===1?s[0]:{compositeFilter:{op:kI(n.op),filters:s}}}(r):Et()}function PI(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ME(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,n,s,o,u=At.min(),f=At.min(),m=qe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new jr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t){this.Tt=t}}function LI(r){const t=OI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Kc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.Tn=new zI}addToCollectionParentIndex(t,n){return this.Tn.add(n),Y.resolve()}getCollectionParents(t,n){return Y.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return Y.resolve()}deleteFieldIndex(t,n){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,n){return Y.resolve()}getDocumentsMatchingTarget(t,n){return Y.resolve(null)}getIndexType(t,n){return Y.resolve(0)}getFieldIndexes(t,n){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,n){return Y.resolve(Fr.min())}getMinOffsetFromCollectionGroup(t,n){return Y.resolve(Fr.min())}updateCollectionGroup(t,n,s){return Y.resolve()}updateIndexEntries(t,n){return Y.resolve()}}class zI{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new Re(te.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Re(te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xE=41943040;class an{static withCacheSize(t){return new an(t,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(xE,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new $a(0)}static Un(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="LruGarbageCollector",BI=1048576;function wv([r,t],[n,s]){const o=xt(r,n);return o===0?xt(t,s):o}class qI{constructor(t){this.Hn=t,this.buffer=new Re(wv),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();wv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HI{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){st(bv,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?st(bv,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.er(3e5)})}}class GI{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return Y.resolve(rh.ae);const s=new qI(n);return this.tr.forEachTarget(t,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(t,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.tr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Sv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let s,o,u,f,m,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(t,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(t,s,n))).next(w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(t,s))).next(w=>(y=Date.now(),ka()<=Ot.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function FI(r,t){return new GI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.changes=new Hs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ye.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Y.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(s!==null&&bl(s.mutation,o,yn.empty(),ve.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Vt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Vt()){const o=ks();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,s).next(u=>{let f=yl();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=ks();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Vt()))}populateOverlays(t,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,s,o){let u=Yi();const f=Sl(),m=function(){return Sl()}();return n.forEach((g,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof ts)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),bl(T.mutation,y,T.mutation.getFieldMask(),ve.now())):f.set(y.key,yn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>{var w;return m.set(y,new QI(T,(w=f.get(y))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(t,n){const s=Sl();let o=new se((f,m)=>f-m),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||yn.empty();T=m.applyToLocalView(y,T),s.set(g,T);const w=(o.get(m.batchId)||Vt()).add(g);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,T=g.value,w=pE();T.forEach(O=>{if(!u.has(O)){const B=TE(n.get(O),s.get(O));B!==null&&w.set(O,B),u=u.add(O)}}),f.push(this.documentOverlayCache.saveOverlays(t,y,w))}return Y.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,o){return function(f){return ht.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cE(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):Y.resolve(ks());let m=Cl,g=u;return f.next(y=>Y.forEach(y,(T,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(T)?Y.resolve():this.remoteDocumentCache.getEntry(t,T).next(O=>{g=g.insert(T,O)}))).next(()=>this.populateOverlays(t,y,u)).next(()=>this.computeViews(t,g,y,Vt())).next(T=>({batchId:m,changes:mE(T)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ht(n)).next(s=>{let o=yl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=yl();return this.indexManager.getCollectionParents(t,u).next(m=>Y.forEach(m,g=>{const y=function(w,O){return new ro(O,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,s,o).next(T=>{T.forEach((w,O)=>{f=f.insert(w,O)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o))).next(f=>{u.forEach((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,Ye.newInvalidDocument(T)))});let m=yl();return f.forEach((g,y)=>{const T=u.get(g);T!==void 0&&bl(T.mutation,y,yn.empty(),ve.now()),lh(n,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return Y.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:hi(o.createTime)}}(n)),Y.resolve()}getNamedQuery(t,n){return Y.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:LI(o.bundledQuery),readTime:hi(o.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.overlays=new se(ht.comparator),this.Rr=new Map}getOverlay(t,n){return Y.resolve(this.overlays.get(n))}getOverlays(t,n){const s=ks();return Y.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((o,u)=>{this.Et(t,n,u)}),Y.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),Y.resolve()}getOverlaysForCollection(t,n,s){const o=ks(),u=n.length+1,f=new ht(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Y.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new se((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=ks(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=ks(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,T)=>m.set(y,T)),!(m.size()>=o)););return Y.resolve(m)}Et(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new mI(n,s));let u=this.Rr.get(n);u===void 0&&(u=Vt(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this.Vr=new Re(ke.mr),this.gr=new Re(ke.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const s=new ke(t,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.wr(new ke(t,n))}br(t,n){t.forEach(s=>this.removeReference(s,n))}Sr(t){const n=new ht(new te([])),s=new ke(n,t),o=new ke(n,t+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new ht(new te([])),s=new ke(n,t),o=new ke(n,t+1);let u=Vt();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new ke(t,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class ke{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return ht.comparator(t.key,n.key)||xt(t.Cr,n.Cr)}static pr(t,n){return xt(t.Cr,n.Cr)||ht.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Re(ke.mr)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new dI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new ke(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Y.resolve(f)}lookupMutationBatch(t,n){return Y.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return Y.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?wm:this.Fr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new ke(n,0),o=new ke(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),Y.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Re(xt);return n.forEach(o=>{const u=new ke(o,0),f=new ke(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),Y.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;ht.isDocumentKey(u)||(u=u.child(""));const f=new ke(new ht(u),0);let m=new Re(xt);return this.Mr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Cr)),!0)},f),Y.resolve(this.Br(m))}Br(t){const n=[];return t.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Kt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return Y.forEach(n.mutations,o=>{const u=new ke(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,n){const s=new ke(n,0),o=this.Mr.firstAfterOrEqual(s);return Y.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this.kr=t,this.docs=function(){return new se(ht.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Y.resolve(s?s.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(t,n){let s=Yi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ye.newInvalidDocument(o))}),Y.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=Yi();const f=n.path,m=new ht(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||CR(IR(T),s)<=0||(o.has(T.key)||lh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return Y.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Et()}qr(t,n){return Y.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new tC(this)}getSize(t){return Y.resolve(this.size)}}class tC extends KI{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(t,o)):this.Ir.removeEntry(s)}),Y.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t){this.persistence=t,this.Qr=new Hs(n=>Cm(n),Dm),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.$r=0,this.Kr=new km,this.targetCount=0,this.Ur=$a.Kn()}forEachTarget(t,n){return this.Qr.forEach((s,o)=>n(o)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),Y.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new $a(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,Y.resolve()}updateTargetData(t,n){return this.zn(n),Y.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),Y.waitFor(u).next(()=>o)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,n){const s=this.Qr.get(n)||null;return Y.resolve(s)}addMatchingKeys(t,n,s){return this.Kr.yr(n,s),Y.resolve()}removeMatchingKeys(t,n,s){this.Kr.br(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),Y.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.Kr.Sr(n),Y.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Kr.vr(n);return Y.resolve(s)}containsKey(t,n){return Y.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new rh(0),this.zr=!1,this.zr=!0,this.jr=new WI,this.referenceDelegate=t(this),this.Hr=new eC(this),this.indexManager=new jI,this.remoteDocumentCache=function(o){return new JI(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new UI(n),this.Yr=new XI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $I,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Wr[t.toKey()];return s||(s=new ZI(n,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,s){st("MemoryPersistence","Starting transaction:",t);const o=new nC(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(t,n){return Y.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,n)))}}class nC extends NR{constructor(t){super(),this.currentSequenceNumber=t}}class Pm{constructor(t){this.persistence=t,this.ti=new km,this.ni=null}static ri(t){return new Pm(t)}get ii(){if(this.ni)return this.ni;throw Et()}addReference(t,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),Y.resolve()}removeReference(t,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),Y.resolve()}removeTarget(t,n){this.ti.Sr(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ii,s=>{const o=ht.fromPath(s);return this.si(t,o).next(u=>{u||n.removeEntry(o,At.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return Y.or([()=>Y.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class $c{constructor(t,n){this.persistence=t,this.oi=new Hs(s=>MR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=FI(this,n)}static ri(t,n){return new $c(t,n)}Zr(){}Xr(t){return Y.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(o=>s+o))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}rr(t,n){return Y.forEach(this.oi,(s,o)=>this.ar(t,s,o).next(u=>u?Y.resolve():n(o)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(t,f=>this.ar(t,f,n).next(m=>{m||(s++,u.removeEntry(f,At.min()))})).next(()=>u.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),Y.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),Y.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Dc(t.data.value)),n}ar(t,n,s){return Y.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.oi.get(n);return Y.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(t,n){let s=Vt(),o=Vt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Um(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return PS()?8:OR(Xe())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.rs(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(t,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new iC;return this._s(t,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(t,n,f,m.size)})}).next(()=>u.result)}us(t,n,s,o){return s.documentReadCount<this.es?(ka()<=Ot.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",Pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Y.resolve()):(ka()<=Ot.DEBUG&&st("QueryEngine","Query:",Pa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(ka()<=Ot.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",Pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(n))):Y.resolve())}rs(t,n){if(dv(n))return Y.resolve(null);let s=ui(n);return this.indexManager.getIndexType(t,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Kc(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(u=>{const f=Vt(...u);return this.ns.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,s).next(g=>{const y=this.cs(n,m);return this.ls(n,y,f,g.readTime)?this.rs(t,Kc(n,null,"F")):this.hs(t,y,n,g)}))})))}ss(t,n,s,o){return dv(n)||o.isEqual(At.min())?Y.resolve(null):this.ns.getDocuments(t,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?Y.resolve(null):(ka()<=Ot.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Pa(n)),this.hs(t,f,n,RR(o,Cl)).next(m=>m))})}cs(t,n){let s=new Re(fE(t));return n.forEach((o,u)=>{lh(t,u)&&(s=s.add(u))}),s}ls(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(t,n,s){return ka()<=Ot.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",Pa(n)),this.ns.getDocumentsMatchingQuery(t,n,Fr.min(),s)}hs(t,n,s,o){return this.ns.getDocumentsMatchingQuery(t,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LocalStore",sC=3e8;class aC{constructor(t,n,s,o){this.persistence=t,this.Ps=n,this.serializer=o,this.Ts=new se(xt),this.Is=new Hs(u=>Cm(u),Dm),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new YI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function oC(r,t,n,s){return new aC(r,t,n,s)}async function PE(r,t){const n=bt(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(t),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let g=Vt();for(const y of o){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next(y=>({Rs:y,removedBatchIds:f,addedBatchIds:m}))})})}function lC(r,t){const n=bt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,y,T){const w=y.batch,O=w.keys();let B=Y.resolve();return O.forEach(X=>{B=B.next(()=>T.getEntry(g,X)).next(Z=>{const F=y.docVersions.get(X);Kt(F!==null),Z.version.compareTo(F)<0&&(w.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),T.addEntry(Z)))})}),B.next(()=>m.mutationQueue.removeMutationBatch(g,w))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Vt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(t))).next(()=>n.localDocuments.getDocuments(s,o))})}function UE(r){const t=bt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function uC(r,t){const n=bt(r),s=t.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];t.targetChanges.forEach((T,w)=>{const O=o.get(w);if(!O)return;m.push(n.Hr.removeMatchingKeys(u,T.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(u,T.addedDocuments,w)));let B=O.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(w)!==null?B=B.withResumeToken(qe.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,s)),o=o.insert(w,B),function(Z,F,dt){return Z.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=sC?!0:dt.addedDocuments.size+dt.modifiedDocuments.size+dt.removedDocuments.size>0}(O,B,T)&&m.push(n.Hr.updateTargetData(u,B))});let g=Yi(),y=Vt();if(t.documentUpdates.forEach(T=>{t.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(cC(u,f,t.documentUpdates).next(T=>{g=T.Vs,y=T.fs})),!s.isEqual(At.min())){const T=n.Hr.getLastRemoteSnapshotVersion(u).next(w=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(T)}return Y.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(n.Ts=o,u))}function cC(r,t,n){let s=Vt(),o=Vt();return n.forEach(u=>s=s.add(u)),t.getEntries(r,s).next(u=>{let f=Yi();return n.forEach((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):st(Lm,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{Vs:f,fs:o}})}function hC(r,t){const n=bt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=wm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function fC(r,t){const n=bt(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,t).next(u=>u?(o=u,Y.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new jr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(t,s.targetId)),s})}async function im(r,t,n){const s=bt(r),o=s.Ts.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!io(f))throw f;st(Lm,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ts=s.Ts.remove(t),s.Is.delete(o.target)}function Rv(r,t,n){const s=bt(r);let o=At.min(),u=Vt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,T){const w=bt(g),O=w.Is.get(T);return O!==void 0?Y.resolve(w.Ts.get(O)):w.Hr.getTargetData(y,T)}(s,f,ui(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,t,n?o:At.min(),n?u:Vt())).next(m=>(dC(s,ZR(t),m),{documents:m,gs:u})))}function dC(r,t,n){let s=r.Es.get(t)||At.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Es.set(t,s)}class Iv{constructor(){this.activeTargetIds=rI()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mC{constructor(){this.ho=new Iv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,s){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Iv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="ConnectivityMonitor";class Dv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){st(Cv,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){st(Cv,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function rm(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="RestConnection",gC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yC{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Hc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}bo(t,n,s,o,u){const f=rm(),m=this.So(t,n.toUriEncodedString());st(xd,`Sending RPC '${t}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(t,m,g,s).then(y=>(st(xd,`Received RPC '${t}' ${f}: `,y),y),y=>{throw Ka(xd,`RPC '${t}' ${f} failed with error: `,y,"url: ",m,"request:",s),y})}Co(t,n,s,o,u,f){return this.bo(t,n,s,o,u)}Do(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}So(t,n){const s=gC[t];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke="WebChannelConnection";class vC extends yC{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,o){const u=rm();return new Promise((f,m)=>{const g=new B0;g.setWithCredentials(!0),g.listenOnce(q0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Cc.NO_ERROR:const T=g.getResponseJson();st(Ke,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(T)),f(T);break;case Cc.TIMEOUT:st(Ke,`RPC '${t}' ${u} timed out`),m(new rt(K.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const w=g.getStatus();if(st(Ke,`RPC '${t}' ${u} failed with status:`,w,"response text:",g.getResponseText()),w>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const B=O==null?void 0:O.error;if(B&&B.status&&B.message){const X=function(F){const dt=F.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(dt)>=0?dt:K.UNKNOWN}(B.status);m(new rt(X,B.message))}else m(new rt(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new rt(K.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{st(Ke,`RPC '${t}' ${u} completed.`)}});const y=JSON.stringify(o);st(Ke,`RPC '${t}' ${u} sending request:`,o),g.send(n,"POST",y,s,15)})}Wo(t,n,s){const o=rm(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=F0(),m=G0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=u.join("");st(Ke,`Creating RPC '${t}' stream ${o}: ${T}`,g);const w=f.createWebChannel(T,g);let O=!1,B=!1;const X=new _C({Fo:F=>{B?st(Ke,`Not sending because RPC '${t}' stream ${o} is closed:`,F):(O||(st(Ke,`Opening RPC '${t}' stream ${o} transport.`),w.open(),O=!0),st(Ke,`RPC '${t}' stream ${o} sending:`,F),w.send(F))},Mo:()=>w.close()}),Z=(F,dt,mt)=>{F.listen(dt,Tt=>{try{mt(Tt)}catch(kt){setTimeout(()=>{throw kt},0)}})};return Z(w,gl.EventType.OPEN,()=>{B||(st(Ke,`RPC '${t}' stream ${o} transport opened.`),X.Qo())}),Z(w,gl.EventType.CLOSE,()=>{B||(B=!0,st(Ke,`RPC '${t}' stream ${o} transport closed`),X.Ko())}),Z(w,gl.EventType.ERROR,F=>{B||(B=!0,Ka(Ke,`RPC '${t}' stream ${o} transport errored:`,F),X.Ko(new rt(K.UNAVAILABLE,"The operation could not be completed")))}),Z(w,gl.EventType.MESSAGE,F=>{var dt;if(!B){const mt=F.data[0];Kt(!!mt);const Tt=mt,kt=(Tt==null?void 0:Tt.error)||((dt=Tt[0])===null||dt===void 0?void 0:dt.error);if(kt){st(Ke,`RPC '${t}' stream ${o} received error:`,kt);const _t=kt.status;let Rt=function(S){const D=ye[S];if(D!==void 0)return bE(D)}(_t),x=kt.message;Rt===void 0&&(Rt=K.INTERNAL,x="Unknown error status: "+_t+" with message "+kt.message),B=!0,X.Ko(new rt(Rt,x)),w.close()}else st(Ke,`RPC '${t}' stream ${o} received:`,mt),X.Uo(mt)}}),Z(m,H0.STAT_EVENT,F=>{F.stat===Qd.PROXY?st(Ke,`RPC '${t}' stream ${o} detected buffering proxy`):F.stat===Qd.NOPROXY&&st(Ke,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{X.$o()},0),X}}function kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r){return new SI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Ti=t,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&st("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="PersistentStream";class jE{constructor(t,n,s,o,u,f,m,g){this.Ti=t,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new LE(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{t(()=>{const o=new rt(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(t,n){const s=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return st(Nv,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(st(Nv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EC extends jE{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=RI(this.serializer,t),s=function(u){if(!("targetChange"in u))return At.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?At.min():f.readTime?hi(f.readTime):At.min()}(t);return this.listener.p_(n,s)}y_(t){const n={};n.database=nm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=Wd(g)?{documents:DI(u,g)}:{query:NI(u,g).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=IE(u,f.resumeToken);const y=Jd(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(At.min())>0){m.readTime=Xc(u,f.snapshotVersion.toTimestamp());const y=Jd(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,t);const s=VI(this.serializer,t);s&&(n.labels=s),this.I_(n)}w_(t){const n={};n.database=nm(this.serializer),n.removeTarget=t,this.I_(n)}}class TC extends jE{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Kt(!!t.streamToken),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Kt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=CI(t.writeResults,t.commitTime),s=hi(t.commitTime);return this.listener.v_(s,n)}C_(){const t={};t.database=nm(this.serializer),this.I_(t)}S_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>II(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{}class SC extends AC{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.bo(t,tm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new rt(K.UNKNOWN,u.toString())})}Co(t,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(t,tm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new rt(K.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class bC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Qi(n),this.N_=!1):st("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class wC{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{Gs(this)&&(st(Bs,"Restarting streams for network reachability change."),await async function(g){const y=bt(g);y.W_.add(4),await Gl(y),y.j_.set("Unknown"),y.W_.delete(4),await dh(y)}(this))})}),this.j_=new bC(s,o)}}async function dh(r){if(Gs(r))for(const t of r.G_)await t(!0)}async function Gl(r){for(const t of r.G_)await t(!1)}function zE(r,t){const n=bt(r);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),qm(n)?Bm(n):so(n).c_()&&zm(n,t))}function jm(r,t){const n=bt(r),s=so(n);n.U_.delete(t),s.c_()&&BE(n,t),n.U_.size===0&&(s.c_()?s.P_():Gs(n)&&n.j_.set("Unknown"))}function zm(r,t){if(r.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}so(r).y_(t)}function BE(r,t){r.H_.Ne(t),so(r).w_(t)}function Bm(r){r.H_=new vI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>r.U_.get(t)||null,it:()=>r.datastore.serializer.databaseId}),so(r).start(),r.j_.B_()}function qm(r){return Gs(r)&&!so(r).u_()&&r.U_.size>0}function Gs(r){return bt(r).W_.size===0}function qE(r){r.H_=void 0}async function RC(r){r.j_.set("Online")}async function IC(r){r.U_.forEach((t,n)=>{zm(r,t)})}async function CC(r,t){qE(r),qm(r)?(r.j_.q_(t),Bm(r)):r.j_.set("Unknown")}async function DC(r,t,n){if(r.j_.set("Online"),t instanceof RE&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.U_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.U_.delete(m),o.H_.removeTarget(m))}(r,t)}catch(s){st(Bs,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Wc(r,s)}else if(t instanceof Vc?r.H_.We(t):t instanceof wE?r.H_.Ze(t):r.H_.je(t),!n.isEqual(At.min()))try{const s=await UE(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.U_.get(y);T&&u.U_.set(y,T.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,y)=>{const T=u.U_.get(g);if(!T)return;u.U_.set(g,T.withResumeToken(qe.EMPTY_BYTE_STRING,T.snapshotVersion)),BE(u,g);const w=new jr(T.target,g,y,T.sequenceNumber);zm(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){st(Bs,"Failed to raise snapshot:",s),await Wc(r,s)}}async function Wc(r,t,n){if(!io(t))throw t;r.W_.add(1),await Gl(r),r.j_.set("Offline"),n||(n=()=>UE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{st(Bs,"Retrying IndexedDB access"),await n(),r.W_.delete(1),await dh(r)})}function HE(r,t){return t().catch(n=>Wc(r,n,t))}async function mh(r){const t=bt(r),n=Xr(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:wm;for(;NC(t);)try{const o=await hC(t.localStore,s);if(o===null){t.K_.length===0&&n.P_();break}s=o.batchId,OC(t,o)}catch(o){await Wc(t,o)}GE(t)&&FE(t)}function NC(r){return Gs(r)&&r.K_.length<10}function OC(r,t){r.K_.push(t);const n=Xr(r);n.c_()&&n.b_&&n.S_(t.mutations)}function GE(r){return Gs(r)&&!Xr(r).u_()&&r.K_.length>0}function FE(r){Xr(r).start()}async function VC(r){Xr(r).C_()}async function MC(r){const t=Xr(r);for(const n of r.K_)t.S_(n.mutations)}async function xC(r,t,n){const s=r.K_.shift(),o=Vm.from(s,t,n);await HE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await mh(r)}async function kC(r,t){t&&Xr(r).b_&&await async function(s,o){if(function(f){return gI(f)&&f!==K.ABORTED}(o.code)){const u=s.K_.shift();Xr(s).h_(),await HE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await mh(s)}}(r,t),GE(r)&&FE(r)}async function Ov(r,t){const n=bt(r);n.asyncQueue.verifyOperationInProgress(),st(Bs,"RemoteStore received new credentials");const s=Gs(n);n.W_.add(3),await Gl(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await dh(n)}async function PC(r,t){const n=bt(r);t?(n.W_.delete(2),await dh(n)):t||(n.W_.add(2),await Gl(n),n.j_.set("Unknown"))}function so(r){return r.J_||(r.J_=function(n,s,o){const u=bt(n);return u.M_(),new EC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:RC.bind(null,r),No:IC.bind(null,r),Lo:CC.bind(null,r),p_:DC.bind(null,r)}),r.G_.push(async t=>{t?(r.J_.h_(),qm(r)?Bm(r):r.j_.set("Unknown")):(await r.J_.stop(),qE(r))})),r.J_}function Xr(r){return r.Y_||(r.Y_=function(n,s,o){const u=bt(n);return u.M_(),new TC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:VC.bind(null,r),Lo:kC.bind(null,r),D_:MC.bind(null,r),v_:xC.bind(null,r)}),r.G_.push(async t=>{t?(r.Y_.h_(),await mh(r)):(await r.Y_.stop(),r.K_.length>0&&(st(Bs,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,m=new Hm(t,n,f,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(r,t){if(Qi("AsyncQueue",`${t}: ${r}`),io(r))return new rt(K.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(t){return new Ha(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ht.comparator(n.key,s.key):(n,s)=>ht.comparator(n.key,s.key),this.keyedMap=yl(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ha)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new Ha;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.Z_=new se(ht.comparator)}track(t){const n=t.doc.key,s=this.Z_.get(n);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(n):t.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Et():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class Wa{constructor(t,n,s,o,u,f,m,g,y){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Wa(t,n,Ha.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&oh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class LC{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=bt(n),u=o.queries;o.queries=Mv(),u.forEach((f,m)=>{for(const g of m.ta)g.onError(s)})})(this,new rt(K.ABORTED,"Firestore shutting down"))}}function Mv(){return new Hs(r=>hE(r),oh)}async function KE(r,t){const n=bt(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.na()&&t.ra()&&(s=2):(u=new UC,s=t.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Gm(f,`Initialization of query '${Pa(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.ta.push(t),t.sa(n.onlineState),u.ea&&t.oa(u.ea)&&Fm(n)}async function QE(r,t){const n=bt(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(t);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=t.ra()?0:1:!u.na()&&t.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jC(r,t){const n=bt(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Fm(n)}function zC(r,t,n){const s=bt(r),o=s.queries.get(t);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(t)}function Fm(r){r.ia.forEach(t=>{t.next()})}var sm,xv;(xv=sm||(sm={}))._a="default",xv.Cache="cache";class YE{constructor(t,n,s){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new Wa(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Wa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==sm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(t){this.key=t}}class $E{constructor(t){this.key=t}}class BC{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Vt(),this.mutatedKeys=Vt(),this.ya=fE(t),this.wa=new Ha(this.ya)}get ba(){return this.fa}Sa(t,n){const s=n?n.Da:new Vv,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((T,w)=>{const O=o.get(T),B=lh(this.query,w)?w:null,X=!!O&&this.mutatedKeys.has(O.key),Z=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let F=!1;O&&B?O.data.isEqual(B.data)?X!==Z&&(s.track({type:3,doc:B}),F=!0):this.va(O,B)||(s.track({type:2,doc:B}),F=!0,(g&&this.ya(B,g)>0||y&&this.ya(B,y)<0)&&(m=!0)):!O&&B?(s.track({type:0,doc:B}),F=!0):O&&!B&&(s.track({type:1,doc:O}),F=!0,(g||y)&&(m=!0)),F&&(B?(f=f.add(B),u=Z?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const f=t.Da.X_();f.sort((T,w)=>function(B,X){const Z=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return Z(B)-Z(X)}(T.type,w.type)||this.ya(T.doc,w.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,y=g!==this.ga;return this.ga=g,f.length!==0||y?{snapshot:new Wa(this.query,t.wa,u,f,t.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Vv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Vt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return t.forEach(s=>{this.pa.has(s)||n.push(new $E(s))}),this.pa.forEach(s=>{t.has(s)||n.push(new XE(s))}),n}Oa(t){this.fa=t.gs,this.pa=Vt();const n=this.Sa(t.documents);return this.applyChanges(n,!0)}Na(){return Wa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Km="SyncEngine";class qC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class HC{constructor(t){this.key=t,this.Ba=!1}}class GC{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new Hs(m=>hE(m),oh),this.qa=new Map,this.Qa=new Set,this.$a=new se(ht.comparator),this.Ka=new Map,this.Ua=new km,this.Wa={},this.Ga=new Map,this.za=$a.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function FC(r,t,n=!0){const s=nT(r);let o;const u=s.ka.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await WE(s,t,n,!0),o}async function KC(r,t){const n=nT(r);await WE(n,t,!0,!1)}async function WE(r,t,n,s){const o=await fC(r.localStore,ui(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await QC(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&zE(r.remoteStore,o),m}async function QC(r,t,n,s,o){r.Ha=(w,O,B)=>async function(Z,F,dt,mt){let Tt=F.view.Sa(dt);Tt.ls&&(Tt=await Rv(Z.localStore,F.query,!1).then(({documents:x})=>F.view.Sa(x,Tt)));const kt=mt&&mt.targetChanges.get(F.targetId),_t=mt&&mt.targetMismatches.get(F.targetId)!=null,Rt=F.view.applyChanges(Tt,Z.isPrimaryClient,kt,_t);return Pv(Z,F.targetId,Rt.Ma),Rt.snapshot}(r,w,O,B);const u=await Rv(r.localStore,t,!0),f=new BC(t,u.gs),m=f.Sa(u.documents),g=Hl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(m,r.isPrimaryClient,g);Pv(r,n,y.Ma);const T=new qC(t,n,f);return r.ka.set(t,T),r.qa.has(n)?r.qa.get(n).push(t):r.qa.set(n,[t]),y.snapshot}async function YC(r,t,n){const s=bt(r),o=s.ka.get(t),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!oh(f,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await im(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&jm(s.remoteStore,o.targetId),am(s,o.targetId)}).catch(no)):(am(s,o.targetId),await im(s.localStore,o.targetId,!0))}async function XC(r,t){const n=bt(r),s=n.ka.get(t),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jm(n.remoteStore,s.targetId))}async function $C(r,t,n){const s=i2(r);try{const o=await function(f,m){const g=bt(f),y=ve.now(),T=m.reduce((B,X)=>B.add(X.key),Vt());let w,O;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let X=Yi(),Z=Vt();return g.ds.getEntries(B,T).next(F=>{X=F,X.forEach((dt,mt)=>{mt.isValidDocument()||(Z=Z.add(dt))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,X)).next(F=>{w=F;const dt=[];for(const mt of m){const Tt=hI(mt,w.get(mt.key).overlayedDocument);Tt!=null&&dt.push(new ts(mt.key,Tt,iE(Tt.value.mapValue),ci.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,dt,m)}).next(F=>{O=F;const dt=F.applyToLocalDocumentSet(w,Z);return g.documentOverlayCache.saveOverlays(B,F.batchId,dt)})}).then(()=>({batchId:O.batchId,changes:mE(w)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let y=f.Wa[f.currentUser.toKey()];y||(y=new se(xt)),y=y.insert(m,g),f.Wa[f.currentUser.toKey()]=y}(s,o.batchId,n),await Fl(s,o.changes),await mh(s.remoteStore)}catch(o){const u=Gm(o,"Failed to persist write");n.reject(u)}}async function ZE(r,t){const n=bt(r);try{const s=await uC(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Ka.get(u);f&&(Kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?Kt(f.Ba):o.removedDocuments.size>0&&(Kt(f.Ba),f.Ba=!1))}),await Fl(n,s,t)}catch(s){await no(s)}}function kv(r,t,n){const s=bt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=bt(f);g.onlineState=m;let y=!1;g.queries.forEach((T,w)=>{for(const O of w.ta)O.sa(m)&&(y=!0)}),y&&Fm(g)}(s.eventManager,t),o.length&&s.La.p_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function WC(r,t,n){const s=bt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Ka.get(t),u=o&&o.key;if(u){let f=new se(ht.comparator);f=f.insert(u,Ye.newNoDocument(u,At.min()));const m=Vt().add(u),g=new hh(At.min(),new Map,new se(xt),f,m);await ZE(s,g),s.$a=s.$a.remove(u),s.Ka.delete(t),Qm(s)}else await im(s.localStore,t,!1).then(()=>am(s,t,n)).catch(no)}async function ZC(r,t){const n=bt(r),s=t.batch.batchId;try{const o=await lC(n.localStore,t);tT(n,s,null),JE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Fl(n,o)}catch(o){await no(o)}}async function JC(r,t,n){const s=bt(r);try{const o=await function(f,m){const g=bt(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return g.mutationQueue.lookupMutationBatch(y,m).next(w=>(Kt(w!==null),T=w.keys(),g.mutationQueue.removeMutationBatch(y,w))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>g.localDocuments.getDocuments(y,T))})}(s.localStore,t);tT(s,t,n),JE(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await Fl(s,o)}catch(o){await no(o)}}function JE(r,t){(r.Ga.get(t)||[]).forEach(n=>{n.resolve()}),r.Ga.delete(t)}function tT(r,t,n){const s=bt(r);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Wa[s.currentUser.toKey()]=o}}function am(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.qa.get(t))r.ka.delete(s),n&&r.La.Ja(s,n);r.qa.delete(t),r.isPrimaryClient&&r.Ua.Sr(t).forEach(s=>{r.Ua.containsKey(s)||eT(r,s)})}function eT(r,t){r.Qa.delete(t.path.canonicalString());const n=r.$a.get(t);n!==null&&(jm(r.remoteStore,n),r.$a=r.$a.remove(t),r.Ka.delete(n),Qm(r))}function Pv(r,t,n){for(const s of n)s instanceof XE?(r.Ua.addReference(s.key,t),t2(r,s)):s instanceof $E?(st(Km,"Document no longer in limbo: "+s.key),r.Ua.removeReference(s.key,t),r.Ua.containsKey(s.key)||eT(r,s.key)):Et()}function t2(r,t){const n=t.key,s=n.path.canonicalString();r.$a.get(n)||r.Qa.has(s)||(st(Km,"New document in limbo: "+n),r.Qa.add(s),Qm(r))}function Qm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const t=r.Qa.values().next().value;r.Qa.delete(t);const n=new ht(te.fromString(t)),s=r.za.next();r.Ka.set(s,new HC(n)),r.$a=r.$a.insert(n,s),zE(r.remoteStore,new jr(ui(Nm(n.path)),s,"TargetPurposeLimboResolution",rh.ae))}}async function Fl(r,t,n){const s=bt(r),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,g)=>{f.push(s.Ha(g,t,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const w=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Um.Yi(g.targetId,y);u.push(w)}}))}),await Promise.all(f),s.La.p_(o),await async function(g,y){const T=bt(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Y.forEach(y,O=>Y.forEach(O.Hi,B=>T.persistence.referenceDelegate.addReference(w,O.targetId,B)).next(()=>Y.forEach(O.Ji,B=>T.persistence.referenceDelegate.removeReference(w,O.targetId,B)))))}catch(w){if(!io(w))throw w;st(Lm,"Failed to update sequence numbers: "+w)}for(const w of y){const O=w.targetId;if(!w.fromCache){const B=T.Ts.get(O),X=B.snapshotVersion,Z=B.withLastLimboFreeSnapshotVersion(X);T.Ts=T.Ts.insert(O,Z)}}}(s.localStore,u))}async function e2(r,t){const n=bt(r);if(!n.currentUser.isEqual(t)){st(Km,"User change. New user:",t.toKey());const s=await PE(n.localStore,t);n.currentUser=t,function(u,f){u.Ga.forEach(m=>{m.forEach(g=>{g.reject(new rt(K.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Fl(n,s.Rs)}}function n2(r,t){const n=bt(r),s=n.Ka.get(t);if(s&&s.Ba)return Vt().add(s.key);{let o=Vt();const u=n.qa.get(t);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.ba)}return o}}function nT(r){const t=bt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=n2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=WC.bind(null,t),t.La.p_=jC.bind(null,t.eventManager),t.La.Ja=zC.bind(null,t.eventManager),t}function i2(r){const t=bt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=JC.bind(null,t),t}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=fh(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return oC(this.persistence,new rC,t.initialUser,this.serializer)}Xa(t){return new kE(Pm.ri,this.serializer)}Za(t){return new mC}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class r2 extends Zc{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Kt(this.persistence.referenceDelegate instanceof $c);const s=this.persistence.referenceDelegate.garbageCollector;return new HI(s,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new kE(s=>$c.ri(s,n),this.serializer)}}class om{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>kv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=e2.bind(null,this.syncEngine),await PC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new LC}()}createDatastore(t){const n=fh(t.databaseInfo.databaseId),s=function(u){return new vC(u)}(t.databaseInfo);return function(u,f,m,g){return new SC(u,f,m,g)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,o,u,f,m){return new wC(s,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>kv(this.syncEngine,n,0),function(){return Dv.D()?new Dv:new pC}())}createSyncEngine(t,n){return function(o,u,f,m,g,y,T){const w=new GC(o,u,f,m,g,y);return T&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const u=bt(o);st(Bs,"RemoteStore shutting down."),u.W_.add(5),await Gl(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}om.provider={build:()=>new om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Qi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class s2{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Qe.UNAUTHENTICATED,this.clientId=Q0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{st($r,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(st($r,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Gm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Pd(r,t){r.asyncQueue.verifyOperationInProgress(),st($r,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await PE(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Uv(r,t){r.asyncQueue.verifyOperationInProgress();const n=await a2(r);st($r,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>Ov(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Ov(t.remoteStore,o)),r._onlineComponents=t}async function a2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){st($r,"Using user provided OfflineComponentProvider");try{await Pd(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await Pd(r,new Zc)}}else st($r,"Using default OfflineComponentProvider"),await Pd(r,new r2(void 0));return r._offlineComponents}async function rT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(st($r,"Using user provided OnlineComponentProvider"),await Uv(r,r._uninitializedComponentsProvider._online)):(st($r,"Using default OnlineComponentProvider"),await Uv(r,new om))),r._onlineComponents}function o2(r){return rT(r).then(t=>t.syncEngine)}async function sT(r){const t=await rT(r),n=t.eventManager;return n.onListen=FC.bind(null,t.syncEngine),n.onUnlisten=YC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=KC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=XC.bind(null,t.syncEngine),n}function l2(r,t,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,y){const T=new iT({next:O=>{T.su(),f.enqueueAndForget(()=>QE(u,w));const B=O.docs.has(m);!B&&O.fromCache?y.reject(new rt(K.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&O.fromCache&&g&&g.source==="server"?y.reject(new rt(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(O)},error:O=>y.reject(O)}),w=new YE(Nm(m.path),T,{includeMetadataChanges:!0,Ta:!0});return KE(u,w)}(await sT(r),r.asyncQueue,t,n,s)),s.promise}function u2(r,t,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,y){const T=new iT({next:O=>{T.su(),f.enqueueAndForget(()=>QE(u,w)),O.fromCache&&g.source==="server"?y.reject(new rt(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(O)},error:O=>y.reject(O)}),w=new YE(m,T,{includeMetadataChanges:!0,Ta:!0});return KE(u,w)}(await sT(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,t,n){if(!n)throw new rt(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function c2(r,t,n,s){if(t===!0&&s===!0)throw new rt(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function jv(r){if(!ht.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function zv(r){if(ht.isDocumentKey(r))throw new rt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ph(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Et()}function Wr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new rt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(r);throw new rt(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function h2(r,t){if(t<=0)throw new rt(K.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firestore.googleapis.com",Bv=!0;class qv{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new rt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lT,this.ssl=Bv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Bv;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=xE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<BI)throw new rt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}c2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aT((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new rt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class gh{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new rt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _R;switch(s.type){case"firstParty":return new AR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new rt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Lv.get(n);s&&(st("ComponentProvider","Removing Datastore"),Lv.delete(n),s.terminate())}(this),Promise.resolve()}}function f2(r,t,n,s={}){var o;const u=(r=Wr(r,gh))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:r._getEmulatorOptions()}),m=`${t}:${n}`;u.host!==lT&&u.host!==m&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!Ps(g,f)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=Qe.MOCK_USER;else{y=DS(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new rt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Qe(w)}r._authCredentials=new vR(new K0(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new es(this.firestore,t,this._query)}}class ln{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ln(this.firestore,t,this._key)}}class Gr extends es{constructor(t,n,s){super(t,n,Nm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ln(this.firestore,null,new ht(t))}withConverter(t){return new Gr(this.firestore,t,this._path)}}function Ym(r,t,...n){if(r=Ie(r),oT("collection","path",t),r instanceof gh){const s=te.fromString(t,...n);return zv(s),new Gr(r,null,s)}{if(!(r instanceof ln||r instanceof Gr))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return zv(s),new Gr(r.firestore,null,s)}}function Xm(r,t,...n){if(r=Ie(r),arguments.length===1&&(t=Q0.newId()),oT("doc","path",t),r instanceof gh){const s=te.fromString(t,...n);return jv(s),new ln(r,null,new ht(s))}{if(!(r instanceof ln||r instanceof Gr))throw new rt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(te.fromString(t,...n));return jv(s),new ln(r.firestore,r instanceof Gr?r.converter:null,new ht(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="AsyncQueue";class Gv{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new LE(this,"async_queue_retry"),this.bu=()=>{const s=kd();s&&st(Hv,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=t;const n=kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Gi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!io(t))throw t;st(Hv,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.Su.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw Qi("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.Su=n,n}enqueueAfterDelay(t,n,s){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const o=Hm.createAndSchedule(this,t,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Et()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class Kl extends gh{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new Gv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Gv(t),this._firestoreClient=void 0,await t}}}function d2(r,t){const n=typeof r=="object"?r:n0(),s=typeof r=="string"?r:Hc,o=mm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=IS("firestore");u&&f2(o,...u)}return o}function $m(r){if(r._terminated)throw new rt(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||m2(r),r._firestoreClient}function m2(r){var t,n,s;const o=r._freezeSettings(),u=function(m,g,y,T){return new PR(m,g,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,aT(T.experimentalLongPollingOptions),T.useFetchStreams)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new s2(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Za(qe.fromBase64String(t))}catch(n){throw new rt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Za(qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new rt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new rt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new rt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=/^__.*__$/;class g2{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new ts(t,this.data,this.fieldMask,n,this.fieldTransforms):new ql(t,this.data,n,this.fieldTransforms)}}class uT{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new ts(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function cT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class tp{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new tp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.ku({path:s,Qu:!1});return o.$u(t),o}Ku(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Jc(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(cT(this.Lu)&&p2.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class y2{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||fh(t)}ju(t,n,s,o=!1){return new tp({Lu:t,methodName:n,zu:s,path:Be.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ep(r){const t=r._freezeSettings(),n=fh(r._databaseId);return new y2(r._databaseId,!!t.ignoreUndefinedProperties,n)}function _2(r,t,n,s,o,u={}){const f=r.ju(u.merge||u.mergeFields?2:0,t,n,o);np("Data must be an object, but it was:",f,s);const m=hT(s,f);let g,y;if(u.merge)g=new yn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const w of u.mergeFields){const O=lm(t,w,n);if(!f.contains(O))throw new rt(K.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);dT(T,O)||T.push(O)}g=new yn(T),y=f.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,y=f.fieldTransforms;return new g2(new on(m),g,y)}class _h extends Wm{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _h}}function v2(r,t,n,s){const o=r.ju(1,t,n);np("Data must be an object, but it was:",o,s);const u=[],f=on.empty();Jr(s,(g,y)=>{const T=ip(t,g,n);y=Ie(y);const w=o.Ku(T);if(y instanceof _h)u.push(T);else{const O=Ql(y,w);O!=null&&(u.push(T),f.set(T,O))}});const m=new yn(u);return new uT(f,m,o.fieldTransforms)}function E2(r,t,n,s,o,u){const f=r.ju(1,t,n),m=[lm(t,s,n)],g=[o];if(u.length%2!=0)throw new rt(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<u.length;O+=2)m.push(lm(t,u[O])),g.push(u[O+1]);const y=[],T=on.empty();for(let O=m.length-1;O>=0;--O)if(!dT(y,m[O])){const B=m[O];let X=g[O];X=Ie(X);const Z=f.Ku(B);if(X instanceof _h)y.push(B);else{const F=Ql(X,Z);F!=null&&(y.push(B),T.set(B,F))}}const w=new yn(y);return new uT(T,w,f.fieldTransforms)}function T2(r,t,n,s=!1){return Ql(n,r.ju(s?4:3,t))}function Ql(r,t){if(fT(r=Ie(r)))return np("Unsupported field value:",t,r),hT(r,t);if(r instanceof Wm)return function(s,o){if(!cT(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let g=Ql(m,o.Uu(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(r,t)}return function(s,o){if((s=Ie(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ve.fromDate(s);return{timestampValue:Xc(o.serializer,u)}}if(s instanceof ve){const u=new ve(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xc(o.serializer,u)}}if(s instanceof Zm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Za)return{bytesValue:IE(o.serializer,s._byteString)};if(s instanceof ln){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Jm)return function(f,m){return{mapValue:{fields:{[eE]:{stringValue:nE},[Gc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return Om(m.serializer,y)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${ph(s)}`)}(r,t)}function hT(r,t){const n={};return X0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jr(r,(s,o)=>{const u=Ql(o,t.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function fT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ve||r instanceof Zm||r instanceof Za||r instanceof ln||r instanceof Wm||r instanceof Jm)}function np(r,t,n){if(!fT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=ph(n);throw s==="an object"?t.Wu(r+" a custom object"):t.Wu(r+" "+s)}}function lm(r,t,n){if((t=Ie(t))instanceof yh)return t._internalPath;if(typeof t=="string")return ip(r,t);throw Jc("Field path arguments must be of type string or ",r,!1,void 0,n)}const A2=new RegExp("[~\\*/\\[\\]]");function ip(r,t,n){if(t.search(A2)>=0)throw Jc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new yh(...t.split("."))._internalPath}catch{throw Jc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Jc(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new rt(K.INVALID_ARGUMENT,m+r+g)}function dT(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new S2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vh("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class S2 extends mT{data(){return super.data()}}function vh(r,t){return typeof t=="string"?ip(r,t):t instanceof yh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new rt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class sp extends rp{}function pT(r,t,...n){let s=[];t instanceof rp&&s.push(t),s=s.concat(n),function(u){const f=u.filter(g=>g instanceof ap).length,m=u.filter(g=>g instanceof Eh).length;if(f>1||f>0&&m>0)throw new rt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Eh extends sp{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new Eh(t,n,s)}_apply(t){const n=this._parse(t);return yT(t._query,n),new es(t.firestore,t.converter,Zd(t._query,n))}_parse(t){const n=ep(t.firestore);return function(u,f,m,g,y,T,w){let O;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new rt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Kv(w,T);const X=[];for(const Z of w)X.push(Fv(g,u,Z));O={arrayValue:{values:X}}}else O=Fv(g,u,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Kv(w,T),O=T2(m,f,w,T==="in"||T==="not-in");return _e.create(y,T,O)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function um(r,t,n){const s=t,o=vh("where",r);return Eh._create(o,s,n)}class ap extends rp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ap(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Hn.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)yT(f,g),f=Zd(f,g)}(t._query,n),new es(t.firestore,t.converter,Zd(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class op extends sp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new op(t,n)}_apply(t){const n=function(o,u,f){if(o.startAt!==null)throw new rt(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new rt(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vl(u,f)}(t._query,this._field,this._direction);return new es(t.firestore,t.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new ro(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function wl(r,t="asc"){const n=t,s=vh("orderBy",r);return op._create(s,n)}class lp extends sp{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new lp(t,n,s)}_apply(t){return new es(t.firestore,t.converter,Kc(t._query,this._limit,this._limitType))}}function gT(r){return h2("limit",r),lp._create("limit",r,"F")}function Fv(r,t,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new rt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(t)&&n.indexOf("/")!==-1)throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(te.fromString(n));if(!ht.isDocumentKey(s))throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ov(r,new ht(s))}if(n instanceof ln)return ov(r,n._key);throw new rt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function Kv(r,t){if(!Array.isArray(r)||r.length===0)throw new rt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yT(r,t){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new rt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class w2{convertValue(t,n="none"){switch(Yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return de(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Jr(t,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(t){var n,s,o;const u=(o=(s=(n=t.fields)===null||n===void 0?void 0:n[Gc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>de(f.doubleValue));return new Jm(u)}convertGeoPoint(t){return new Zm(de(t.latitude),de(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=ah(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Dl(t));default:return null}}convertTimestamp(t){const n=Kr(t);return new ve(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=te.fromString(t);Kt(ME(s));const o=new Nl(s.get(1),s.get(3)),u=new ht(s.popFirst(5));return o.isEqual(n)||Qi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(r,t,n){let s;return s=r?r.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _T extends mT{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(vh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Mc extends _T{data(t={}){return super.data(t)}}class I2{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new vl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new Mc(this._firestore,this._userDataWriter,s.key,s,new vl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new Mc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Mc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new vl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:C2(m.type),doc:g,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function C2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(r){r=Wr(r,ln);const t=Wr(r.firestore,Kl);return l2($m(t),r._key).then(n=>O2(t,r,n))}class ET extends w2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Za(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function TT(r){r=Wr(r,es);const t=Wr(r.firestore,Kl),n=$m(t),s=new ET(t);return b2(r._query),u2(n,r._query).then(o=>new I2(t,s,r,o))}function D2(r,t,n,...s){r=Wr(r,ln);const o=Wr(r.firestore,Kl),u=ep(o);let f;return f=typeof(t=Ie(t))=="string"||t instanceof yh?E2(u,"updateDoc",r._key,t,n,s):v2(u,"updateDoc",r._key,t),AT(o,[f.toMutation(r._key,ci.exists(!0))])}function N2(r,t){const n=Wr(r.firestore,Kl),s=Xm(r),o=R2(r.converter,t);return AT(n,[_2(ep(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,ci.exists(!1))]).then(()=>s)}function AT(r,t){return function(s,o){const u=new Gi;return s.asyncQueue.enqueueAndForget(async()=>$C(await o2(s),o,u)),u.promise}($m(r),t)}function O2(r,t,n){const s=n.docs.get(t._key),o=new ET(r);return new _T(r,o,t._key,s,new vl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){eo=o})(Ja),Ga(new Us("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Kl(new ER(s.getProvider("auth-internal")),new SR(f,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new rt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(y.options.projectId,T)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),qr($_,W_,t),qr($_,W_,"esm2017")})();const V2={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},ST=e0(V2),Sc=mR(ST),Yl=d2(ST),bT=lt.createContext(null),Xl=()=>{const r=lt.useContext(bT);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},M2=({children:r})=>{const[t,n]=lt.useState(null),[s,o]=lt.useState(!0),u=async(y,T,w)=>{const O=await $w(Sc,y,T);return O.user&&await Jw(O.user,{displayName:w}),O.user},f=async(y,T)=>(await Ww(Sc,y,T)).user,m=async()=>i1(Sc);lt.useEffect(()=>n1(Sc,T=>{n(T),o(!1)}),[]);const g={currentUser:t,loading:s,signUp:u,login:f,logout:m};return C.jsx(bT.Provider,{value:g,children:!s&&r})},wT=lt.createContext(null),x2=()=>{const r=lt.useContext(wT);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},k2=({children:r})=>{const t=()=>{const f=localStorage.getItem("theme");return f||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[n,s]=lt.useState(t);lt.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),n==="dark"?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[n]);const u={theme:n,toggleTheme:()=>{s(f=>f==="light"?"dark":"light")}};return C.jsx(wT.Provider,{value:u,children:r})},P2=()=>{const{theme:r,toggleTheme:t}=x2();return C.jsx("button",{className:"theme-toggle",onClick:t,"aria-label":`Switch to ${r==="light"?"dark":"light"} mode`,children:r==="light"?C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:C.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}):C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[C.jsx("circle",{cx:"12",cy:"12",r:"5"}),C.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),C.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),C.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),C.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),C.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),C.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),C.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),C.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})})},U2=({onSwitchToSignUp:r,onLoginSuccess:t})=>{const[n,s]=lt.useState(""),[o,u]=lt.useState(""),[f,m]=lt.useState(""),[g,y]=lt.useState(!1),{login:T}=Xl(),w=async O=>{if(O.preventDefault(),!n||!o){m("Please fill in all fields");return}try{m(""),y(!0),await T(n,o),t()}catch(B){m(B.message||"Failed to log in")}finally{y(!1)}};return C.jsxs("div",{className:"auth-container",children:[C.jsx("h2",{className:"app-title",children:"Login"}),f&&C.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(248, 113, 113, 0.2)",color:"#b91c1c",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem"},children:f}),C.jsxs("form",{className:"auth-form",onSubmit:w,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),C.jsx("input",{id:"email",type:"email",className:"form-input",value:n,onChange:O=>s(O.target.value),required:!0})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),C.jsx("input",{id:"password",type:"password",className:"form-input",value:o,onChange:O=>u(O.target.value),required:!0})]}),C.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g,style:{marginTop:"1rem"},children:g?"Logging in...":"Login"})]}),C.jsxs("div",{className:"auth-switch",children:["Don't have an account? ",C.jsx("a",{href:"#",onClick:O=>{O.preventDefault(),r()},children:"Sign up"})]})]})},L2=({onSwitchToLogin:r,onSignUpSuccess:t})=>{const[n,s]=lt.useState(""),[o,u]=lt.useState(""),[f,m]=lt.useState(""),[g,y]=lt.useState(""),[T,w]=lt.useState(""),[O,B]=lt.useState(!1),{signUp:X}=Xl(),Z=async F=>{if(F.preventDefault(),!n||!o||!f||!g){w("Please fill in all fields");return}if(f!==g){w("Passwords do not match");return}if(f.length<6){w("Password must be at least 6 characters long");return}try{w(""),B(!0),await X(o,f,n),t()}catch(dt){w(dt.message||"Failed to create an account")}finally{B(!1)}};return C.jsxs("div",{className:"auth-container",children:[C.jsx("h2",{className:"app-title",children:"Sign Up"}),T&&C.jsx("div",{className:"error-message",style:{backgroundColor:"rgba(248, 113, 113, 0.2)",color:"#b91c1c",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem"},children:T}),C.jsxs("form",{className:"auth-form",onSubmit:Z,children:[C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"displayName",children:"Display Name"}),C.jsx("input",{id:"displayName",type:"text",className:"form-input",value:n,onChange:F=>s(F.target.value),required:!0})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"email",children:"Email"}),C.jsx("input",{id:"email",type:"email",className:"form-input",value:o,onChange:F=>u(F.target.value),required:!0})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"password",children:"Password"}),C.jsx("input",{id:"password",type:"password",className:"form-input",value:f,onChange:F=>m(F.target.value),required:!0})]}),C.jsxs("div",{className:"form-group",children:[C.jsx("label",{className:"form-label",htmlFor:"confirmPassword",children:"Confirm Password"}),C.jsx("input",{id:"confirmPassword",type:"password",className:"form-input",value:g,onChange:F=>y(F.target.value),required:!0})]}),C.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O,style:{marginTop:"1rem"},children:O?"Creating Account...":"Sign Up"})]}),C.jsxs("div",{className:"auth-switch",children:["Already have an account? ",C.jsx("a",{href:"#",onClick:F=>{F.preventDefault(),r()},children:"Login"})]})]})},j2=({isOpen:r,onClose:t})=>{const[n,s]=lt.useState(!0);if(!r)return null;const o=f=>{f.target===f.currentTarget&&t()},u=()=>{t()};return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:C.jsx("div",{className:"modal-content",style:{width:"100%",maxWidth:"28rem",maxHeight:"90vh",overflow:"auto"},children:n?C.jsx(U2,{onSwitchToSignUp:()=>s(!1),onLoginSuccess:u}):C.jsx(L2,{onSwitchToLogin:()=>s(!0),onSignUpSuccess:u})})})},z2=async r=>{const t={...r,date:ve.now()};return(await N2(Ym(Yl,"leaderboard"),t)).id},B2=async(r,t=10)=>{const n=pT(Ym(Yl,"leaderboard"),um("difficulty","==",r),wl("timeElapsed","asc"),wl("movesCount","asc"),wl("hintsUsed","asc"),gT(t)),s=await TT(n),o=[];return s.forEach(u=>{o.push({id:u.id,...u.data()})}),o},q2=async r=>{const t=["easy","medium","hard","expert"],n={};for(const s of t){const o=pT(Ym(Yl,"leaderboard"),um("userId","==",r),um("difficulty","==",s),wl("timeElapsed","asc"),wl("movesCount","asc"),gT(1)),u=await TT(o);if(u.empty)n[s]=null;else{const f=u.docs[0];n[s]={id:f.id,...f.data()}}}return n},H2=async r=>{const t=Xm(Yl,"users",r),n=await vT(t);return n.exists()?n.data():null},G2=async(r,t,n)=>{const s=Xm(Yl,"users",r),o=await vT(s);let u;o.exists()?u=o.data():u={userId:r,displayName:t,gamesPlayed:0,gamesWon:0,totalPlayTime:0,bestTimes:{easy:null,medium:null,hard:null,expert:null}},u.gamesPlayed+=1,u.gamesWon+=1,u.totalPlayTime+=n.timeElapsed;const f=n.difficulty;(u.bestTimes[f]===null||n.timeElapsed<u.bestTimes[f])&&(u.bestTimes[f]=n.timeElapsed),await D2(s,u),await z2({userId:r,userName:t,difficulty:n.difficulty,timeElapsed:n.timeElapsed,movesCount:n.movesCount,hintsUsed:n.hintsUsed})},F2=({onClose:r})=>{const{currentUser:t,logout:n}=Xl(),[s,o]=lt.useState(null),[u,f]=lt.useState(!0),[m,g]=lt.useState(null),[y,T]=lt.useState("stats"),[w,O]=lt.useState({});lt.useEffect(()=>{(async()=>{if(t)try{f(!0);const F=await H2(t.uid);F&&o(F);const dt=await q2(t.uid);O(dt),g(null)}catch(F){console.error("Error fetching user data:",F),g("Failed to load profile data. Please try again later.")}finally{f(!1)}})()},[t]);const B=async()=>{try{await n(),r()}catch(Z){console.error("Failed to log out:",Z)}},X=Z=>{if(Z===null)return"--:--";const F=Math.floor(Z/60),dt=Z%60;return`${F}:${dt.toString().padStart(2,"0")}`};return t?u?C.jsxs("div",{className:"auth-container",children:[C.jsx("h2",{className:"app-title",children:"Profile"}),C.jsx("div",{className:"flex justify-center py-8",children:C.jsx("div",{className:"loading-spinner"})})]}):C.jsxs("div",{className:"auth-container",children:[C.jsx("h2",{className:"app-title",children:"Your Profile"}),m&&C.jsx("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg mb-4",children:m}),C.jsxs("div",{className:"profile-header",children:[C.jsx("div",{className:"profile-avatar",children:t.photoURL?C.jsx("img",{src:t.photoURL,alt:t.displayName||"User"}):C.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:(t.displayName||"A").charAt(0).toUpperCase()})}),C.jsxs("div",{className:"profile-info",children:[C.jsx("h3",{className:"profile-name",children:t.displayName||"Anonymous"}),C.jsxs("div",{className:"profile-stats",children:[C.jsxs("span",{children:[(s==null?void 0:s.gamesPlayed)||0," games played"]}),C.jsxs("span",{children:[(s==null?void 0:s.gamesWon)||0," wins"]})]})]})]}),C.jsxs("div",{className:"tabs",children:[C.jsx("div",{className:`tab ${y==="stats"?"active":""}`,onClick:()=>T("stats"),children:"Statistics"}),C.jsx("div",{className:`tab ${y==="best"?"active":""}`,onClick:()=>T("best"),children:"Best Times"})]}),y==="stats"&&C.jsx("div",{className:"stats-tab",children:C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-label",children:"Games Played"}),C.jsx("span",{className:"stat-value",children:(s==null?void 0:s.gamesPlayed)||0})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-label",children:"Games Won"}),C.jsx("span",{className:"stat-value",children:(s==null?void 0:s.gamesWon)||0})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-label",children:"Win Rate"}),C.jsxs("span",{className:"stat-value",children:[s!=null&&s.gamesPlayed?Math.round(s.gamesWon/s.gamesPlayed*100):0,"%"]})]}),C.jsxs("div",{className:"stat-item",children:[C.jsx("span",{className:"stat-label",children:"Total Play Time"}),C.jsx("span",{className:"stat-value",children:X((s==null?void 0:s.totalPlayTime)||0)})]})]})}),y==="best"&&C.jsx("div",{className:"best-times-tab",children:C.jsxs("table",{className:"leaderboard",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{children:"Difficulty"}),C.jsx("th",{children:"Best Time"}),C.jsx("th",{children:"Moves"}),C.jsx("th",{children:"Hints"})]})}),C.jsx("tbody",{children:["easy","medium","hard","expert"].map(Z=>{const F=w[Z];return C.jsxs("tr",{children:[C.jsx("td",{children:Z.charAt(0).toUpperCase()+Z.slice(1)}),C.jsx("td",{children:F?X(F.timeElapsed):"--:--"}),C.jsx("td",{children:F?F.movesCount:"--"}),C.jsx("td",{children:F?F.hintsUsed:"--"})]},Z)})})]})}),C.jsx("div",{className:"mt-8",children:C.jsx("button",{className:"btn btn-primary w-full",onClick:B,children:"Log Out"})})]}):C.jsxs("div",{className:"auth-container",children:[C.jsx("h2",{className:"app-title",children:"Profile"}),C.jsx("p",{className:"text-center",children:"Please log in to view your profile."})]})},K2=()=>{var u;const{currentUser:r}=Xl(),[t,n]=lt.useState(!1),[s,o]=lt.useState(!1);return C.jsxs("header",{style:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"1rem",position:"relative",zIndex:10},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[C.jsx(P2,{}),r?C.jsxs("button",{onClick:()=>o(!0),style:{display:"flex",alignItems:"center",background:"transparent",border:"none",cursor:"pointer",color:"var(--color-text)",padding:"0.5rem 0.75rem",borderRadius:"0.375rem",transition:"all 0.2s"},onMouseOver:f=>{f.currentTarget.style.backgroundColor="var(--color-bg-secondary)"},onMouseOut:f=>{f.currentTarget.style.backgroundColor="transparent"},children:[C.jsx("div",{style:{width:"2rem",height:"2rem",borderRadius:"9999px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.5rem",backgroundColor:"var(--color-primary)",color:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:((u=r.displayName)==null?void 0:u.charAt(0))||"U"}),C.jsx("span",{children:r.displayName})]}):C.jsx("button",{className:"btn btn-primary",onClick:()=>n(!0),children:"Login / Sign Up"})]}),C.jsx(j2,{isOpen:t,onClose:()=>n(!1)}),s&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f=>f.target===f.currentTarget&&o(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:C.jsx("div",{className:"modal-content",style:{width:"100%",maxWidth:"32rem",maxHeight:"90vh",overflow:"auto"},children:C.jsx(F2,{onClose:()=>o(!1)})})})]})},Q2=({selectedDifficulty:r})=>{const[t,n]=lt.useState([]),[s,o]=lt.useState(!0),[u,f]=lt.useState(null);lt.useEffect(()=>{(async()=>{try{o(!0);const T=await B2(r);n(T),f(null)}catch(T){console.error("Error fetching leaderboard:",T),f("Error loading leaderboard data. Please try again later.")}finally{o(!1)}})()},[r]);const m=y=>{const T=Math.floor(y/60),w=y%60;return`${T}:${w.toString().padStart(2,"0")}`},g=y=>{if(!y)return"Unknown";try{const T=y.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(T)}catch{return"Invalid date"}};return s?C.jsx("div",{className:"flex justify-center py-8",children:C.jsx("div",{className:"loading-spinner"})}):u?C.jsx("div",{className:"p-4 bg-red-100 text-red-800 rounded-lg",children:u}):t.length===0?C.jsxs("div",{className:"p-4 bg-gray-100 text-gray-600 rounded-lg text-center",children:["No entries yet for ",r," difficulty. Be the first to complete a puzzle and get on the leaderboard!"]}):C.jsxs("div",{children:[C.jsxs("h3",{className:"text-xl font-bold mb-4 text-center",children:["Leaderboard - ",r.charAt(0).toUpperCase()+r.slice(1)]}),C.jsx("div",{className:"overflow-x-auto",children:C.jsxs("table",{className:"leaderboard",children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{children:"Rank"}),C.jsx("th",{children:"Player"}),C.jsx("th",{children:"Time"}),C.jsx("th",{children:"Moves"}),C.jsx("th",{children:"Hints"}),C.jsx("th",{children:"Date"})]})}),C.jsx("tbody",{children:t.map((y,T)=>C.jsxs("tr",{children:[C.jsx("td",{children:C.jsx("span",{className:`user-rank rank-${T+1}`,children:T+1})}),C.jsx("td",{children:y.userName}),C.jsx("td",{children:m(y.timeElapsed)}),C.jsx("td",{children:y.movesCount}),C.jsx("td",{children:y.hintsUsed}),C.jsx("td",{children:g(y.date)})]},y.id))})]})})]})},Y2=({isOpen:r,onClose:t,initialDifficulty:n})=>{const[s,o]=lt.useState(n);if(!r)return null;const u=f=>{f.target===f.currentTarget&&t()};return C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:u,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:C.jsxs("div",{className:"modal-content app-card",style:{width:"100%",maxWidth:"42rem",maxHeight:"90vh",overflow:"auto"},children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"text-2xl font-bold",children:"Leaderboard"}),C.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",style:{border:"none",background:"transparent",fontSize:"1.5rem",cursor:"pointer",color:"var(--color-text-secondary)"},children:""})]}),C.jsx("div",{className:"tabs",children:["easy","medium","hard","expert"].map(f=>C.jsx("div",{className:`tab ${s===f?"active":""}`,onClick:()=>o(f),children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),C.jsx(Q2,{selectedDifficulty:s})]})})};function X2(){const{currentUser:r}=Xl(),[t,n]=lt.useState(Ud()),[s,o]=lt.useState(Ud()),[u,f]=lt.useState(Array(9).fill(null).map(()=>Array(9).fill(!1))),[m,g]=lt.useState(null),[y,T]=lt.useState([]),[w,O]=lt.useState("medium"),[B,X]=lt.useState(!1),[Z,F]=lt.useState(!1),[dt,mt]=lt.useState(0),[Tt,kt]=lt.useState(!1),[_t,Rt]=lt.useState(0),[x,R]=lt.useState(0),[S,D]=lt.useState(!1),[M,U]=lt.useState(!1);lt.useEffect(()=>{let J=null;return Tt&&(J=setInterval(()=>{mt(tt=>tt+1)},1e3)),()=>{J&&clearInterval(J)}},[Tt]);const I=lt.useCallback(()=>{for(let J=0;J<9;J++)for(let tt=0;tt<9;tt++)if(t[J][tt]===null)return!1;return!(y.length>0)},[t,y]);lt.useEffect(()=>{T(cS(gn(t))),I()&&!B&&(X(!0),kt(!1),r&&G2(r.uid,r.displayName||"Anonymous",{difficulty:w,timeElapsed:dt,movesCount:_t,hintsUsed:x}).catch(tt=>{console.error("Error updating user stats:",tt)}))},[t,I,B,r,w,dt,_t,x]);const ee=lt.useCallback(()=>{F(!0),setTimeout(()=>{try{let J;w in xc?J=gn(xc[w]):J=fS(w);const tt=Array(9).fill(null).map(()=>Array(9).fill(!1));for(let et=0;et<9;et++)for(let ft=0;ft<9;ft++)J[et][ft]!==null&&(tt[et][ft]=!0);n(J),o(gn(J)),f(tt),g(null),T([]),X(!1),mt(0),kt(!0),Rt(0),R(0)}catch(J){console.error("Error starting new game:",J)}finally{F(!1)}},100)},[w]);lt.useEffect(()=>{ee()},[ee]);const ae=(J,tt)=>{B||g([J,tt])},it=J=>{if(!m||B)return;const[tt,et]=m;if(u[tt][et])return;const ft=gn(t);ft[tt][et]=J,n(ft),Rt(gt=>gt+1)},pt=()=>{B||(F(!0),D(!0),setTimeout(()=>{try{const J=gn(t);if(kl(J)){const et=(ft,gt,Qt)=>{if(Qt>=81){D(!1),F(!1);return}const Nt=Math.floor(Qt/9),Wt=Qt%9;if(u[Nt][Wt]){et(ft,gt,Qt+1);return}const zt=gn(ft);zt[Nt][Wt]=gt[Nt][Wt],n(zt),setTimeout(()=>{et(zt,gt,Qt+1)},50)};et(t,J,0)}else alert("No solution exists for the current state of the puzzle."),F(!1),D(!1)}catch(J){console.error("Error solving puzzle:",J),F(!1),D(!1)}},100))},ut=()=>{if(B)return;const J=mS(gn(t));if(J){const[tt,et,ft]=J;if(u[tt][et]){alert("That cell is already filled in correctly.");return}const gt=gn(t);gt[tt][et]=ft,n(gt),g([tt,et]),R(Qt=>Qt+1)}else alert("No hint available. The puzzle may not be solvable in its current state.")},Bt=()=>{n(gn(s)),g(null),X(!1),mt(0),kt(!0),Rt(0),R(0)},N=J=>{w!==J&&(O(J),setTimeout(()=>{ee()},0))},W=()=>{U(!0)};return C.jsxs("div",{className:"app-container",children:[C.jsx(K2,{}),C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"app-title",children:"Sudoku Solver"}),C.jsx("p",{className:"app-subtitle",children:"Play, solve, and learn with our advanced Sudoku solver"})]}),C.jsx(_S,{timeElapsed:dt,movesCount:_t,hintsUsed:x,isSolved:B}),C.jsxs("div",{className:"sudoku-container",children:[C.jsx("div",{className:S?"animate-solve":"",children:C.jsx(pS,{grid:t,presetCells:u,conflicts:y,selectedCell:m,onCellClick:ae})}),C.jsx("div",{style:{marginTop:"1.5rem"},children:C.jsx(gS,{onNumberClick:it,disabled:!m||m&&u[m[0]][m[1]]||B})})]}),C.jsx(yS,{onNewGame:ee,onSolve:pt,onHint:ut,onReset:Bt,onDifficultyChange:N,currentDifficulty:w,isSolved:B,isLoading:Z}),B&&C.jsxs("div",{className:"app-card animate-celebrate",style:{backgroundColor:"#dcfce7",color:"#15803d",textAlign:"center"},children:[C.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Congratulations!"}),C.jsxs("p",{children:["You've solved the puzzle in ",dt," seconds with ",_t," moves and ",x," hints."]}),C.jsx("button",{className:"btn btn-primary",onClick:W,style:{marginTop:"1rem"},children:"View Leaderboard"})]}),C.jsxs("footer",{style:{marginTop:"3rem",textAlign:"center",color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:[C.jsx("p",{children:"Built with React and TypeScript. Uses a backtracking algorithm for solving."}),C.jsx("button",{onClick:W,className:"btn btn-outline",style:{marginTop:"1rem"},children:"View Leaderboard"})]}),C.jsx(Y2,{isOpen:M,onClose:()=>U(!1),initialDifficulty:w})]})}oS.createRoot(document.getElementById("root")).render(C.jsx(lt.StrictMode,{children:C.jsx(M2,{children:C.jsx(k2,{children:C.jsx(X2,{})})})}));
